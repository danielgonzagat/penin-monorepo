Last login: Mon Aug 11 11:28:03 on ttys000
danielpenin@Daniels-iMac ~ % curl http://92.38.150.138:8080/v1/chat/completions \
  -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
  -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Resuma o caso Watergate em 5 bullets."}],"max_tokens":200}'

{"choices":[{"finish_reason":"length","index":0,"message":{"role":"assistant","content":"Aqui está um resumo dos principais pontos do caso Watergate em 5 bullet points:\n\n• Em 17 de junho de 1972, quatro homens ligados a campanha do presidente republicano Nixon invadiram as instalações do Partido Democrata em Washington, roubando materiais confidenciais.\n\n• Após a invasão, foi descoberto que os homens tinham conexões com o Comitê Nacional Republicano e com a Casa Branca.\n\n• Em julho, foi revelada uma ligação telefônica maliciosa feita por membros do comitê republicano, levando a investigações mais profundas.\n\n• A Casa Branca tentou obstruir as investigações, destruindo gravações de conversas e obstruindo os investigadores.\n\n• Pressionado pela evidência acumulada, Nixon renunciou ao cargo em 8"}}],"created":1754935559,"model":"qwen2.5-7b-instruct","system_fingerprint":"b6134-be48528b","object":"chat.completion","usage":{"completion_tokens":200,"prompt_tokens":19,"total_tokens":219},"id":"chatcmpl-FMsiduMavOgAjeHZ67KrBBuCgFvFy7t1","timings":{"prompt_n":1,"prompt_ms":107.506,"prompt_per_token_ms":107.506,"prompt_per_second":9.301806410804978,"predicted_n":200,"predicted_ms":21306.727,"predicted_per_token_ms":106.53363499999999,"predicted_per_second":9.386706836765685}}%                                                                danielpenin@Daniels-iMac ~ % curl http://92.38.150.138:8080/v1/chat/completions \
  -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
  -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Escreva um haicai sobre café."}],"max_tokens":50}'

{"choices":[{"finish_reason":"stop","index":0,"message":{"role":"assistant","content":"Café brota da terra,  \nAroma invade a manhã,  \nSímbolo de encontros."}}],"created":1754935802,"model":"qwen2.5-7b-instruct","system_fingerprint":"b6134-be48528b","object":"chat.completion","usage":{"completion_tokens":26,"prompt_tokens":18,"total_tokens":44},"id":"chatcmpl-0nHhBYXLN6wwIAT0mmUL8HJWUx3VXrWP","timings":{"prompt_n":15,"prompt_ms":397.933,"prompt_per_token_ms":26.528866666666666,"prompt_per_second":37.69478781603938,"predicted_n":26,"predicted_ms":2760.307,"predicted_per_token_ms":106.16565384615384,"predicted_per_second":9.419242135023387}}%                                                                       danielpenin@Daniels-iMac ~ % ssh root@92.38.150.138
Enter passphrase for key '/Users/danielpenin/.ssh/id_ed25519': 
Enter passphrase for key '/Users/danielpenin/.ssh/id_ed25519': 
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-151-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Aug 12 04:22:01 AM UTC 2025

  System load:  0.07             Temperature:           57.0 C
  Usage of /:   7.0% of 3.43TB   Processes:             602
  Memory usage: 2%               Users logged in:       1
  Swap usage:   0%               IPv4 address for eno1: 92.38.150.138


1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.


Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

1 additional security update can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm



1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.

Last login: Tue Aug 12 04:20:13 2025 from 187.62.85.87
root@danielgonzagatj1:~# journalctl -u llama-s0 -n 80 --no-pager
Aug 12 04:21:51 danielgonzagatj1 llama-run-s0.sh[740586]: --numa TYPE                             attempt optimizations that help on some NUMA systems
Aug 12 04:21:51 danielgonzagatj1 llama-run-s0.sh[740586]:                                         - distribute: spread execution evenly over all nodes
Aug 12 04:21:51 danielgonzagatj1 llama-run-s0.sh[740586]:                                         - isolate: only spawn threads on CPUs on the node that execution
Aug 12 04:21:51 danielgonzagatj1 llama-run-s0.sh[740586]:                                         started on
Aug 12 04:21:51 danielgonzagatj1 llama-run-s0.sh[740586]:                                         - numactl: use the CPU map provided by numactl
Aug 12 04:21:51 danielgonzagatj1 llama-run-s0.sh[740586]:                                         if run without this previously, it is recommended to drop the system
Aug 12 04:21:51 danielgonzagatj1 llama-run-s0.sh[740586]:                                         page cache before using this
Aug 12 04:21:51 danielgonzagatj1 llama-run-s0.sh[740586]:                                         see https://github.com/ggml-org/llama.cpp/issues/1437
Aug 12 04:21:51 danielgonzagatj1 llama-run-s0.sh[740586]:                                         (env: LLAMA_ARG_NUMA)
Aug 12 04:21:51 danielgonzagatj1 llama-run-s0.sh[740586]: to show complete usage, run with -h
Aug 12 04:21:51 danielgonzagatj1 systemd[1]: llama-s0.service: Main process exited, code=exited, status=1/FAILURE
Aug 12 04:21:51 danielgonzagatj1 systemd[1]: llama-s0.service: Failed with result 'exit-code'.
Aug 12 04:21:54 danielgonzagatj1 systemd[1]: llama-s0.service: Scheduled restart job, restart counter is at 447.
Aug 12 04:21:54 danielgonzagatj1 systemd[1]: Stopped llama.cpp s0 (NUMA0).
Aug 12 04:21:54 danielgonzagatj1 systemd[1]: Started llama.cpp s0 (NUMA0).
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]: error while handling argument "--numa": invalid value
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]: usage:
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]: --numa TYPE                             attempt optimizations that help on some NUMA systems
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]:                                         - distribute: spread execution evenly over all nodes
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]:                                         - isolate: only spawn threads on CPUs on the node that execution
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]:                                         started on
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]:                                         - numactl: use the CPU map provided by numactl
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]:                                         if run without this previously, it is recommended to drop the system
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]:                                         page cache before using this
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]:                                         see https://github.com/ggml-org/llama.cpp/issues/1437
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]:                                         (env: LLAMA_ARG_NUMA)
Aug 12 04:21:55 danielgonzagatj1 llama-run-s0.sh[740637]: to show complete usage, run with -h
Aug 12 04:21:55 danielgonzagatj1 systemd[1]: llama-s0.service: Main process exited, code=exited, status=1/FAILURE
Aug 12 04:21:55 danielgonzagatj1 systemd[1]: llama-s0.service: Failed with result 'exit-code'.
Aug 12 04:21:58 danielgonzagatj1 systemd[1]: llama-s0.service: Scheduled restart job, restart counter is at 448.
Aug 12 04:21:58 danielgonzagatj1 systemd[1]: Stopped llama.cpp s0 (NUMA0).
Aug 12 04:21:58 danielgonzagatj1 systemd[1]: Started llama.cpp s0 (NUMA0).
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]: error while handling argument "--numa": invalid value
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]: usage:
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]: --numa TYPE                             attempt optimizations that help on some NUMA systems
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]:                                         - distribute: spread execution evenly over all nodes
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]:                                         - isolate: only spawn threads on CPUs on the node that execution
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]:                                         started on
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]:                                         - numactl: use the CPU map provided by numactl
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]:                                         if run without this previously, it is recommended to drop the system
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]:                                         page cache before using this
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]:                                         see https://github.com/ggml-org/llama.cpp/issues/1437
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]:                                         (env: LLAMA_ARG_NUMA)
Aug 12 04:21:58 danielgonzagatj1 llama-run-s0.sh[740686]: to show complete usage, run with -h
Aug 12 04:21:58 danielgonzagatj1 systemd[1]: llama-s0.service: Main process exited, code=exited, status=1/FAILURE
Aug 12 04:21:58 danielgonzagatj1 systemd[1]: llama-s0.service: Failed with result 'exit-code'.
Aug 12 04:22:01 danielgonzagatj1 systemd[1]: llama-s0.service: Scheduled restart job, restart counter is at 449.
Aug 12 04:22:01 danielgonzagatj1 systemd[1]: Stopped llama.cpp s0 (NUMA0).
Aug 12 04:22:01 danielgonzagatj1 systemd[1]: Started llama.cpp s0 (NUMA0).
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]: error while handling argument "--numa": invalid value
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]: usage:
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]: --numa TYPE                             attempt optimizations that help on some NUMA systems
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]:                                         - distribute: spread execution evenly over all nodes
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]:                                         - isolate: only spawn threads on CPUs on the node that execution
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]:                                         started on
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]:                                         - numactl: use the CPU map provided by numactl
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]:                                         if run without this previously, it is recommended to drop the system
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]:                                         page cache before using this
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]:                                         see https://github.com/ggml-org/llama.cpp/issues/1437
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]:                                         (env: LLAMA_ARG_NUMA)
Aug 12 04:22:01 danielgonzagatj1 llama-run-s0.sh[740734]: to show complete usage, run with -h
Aug 12 04:22:01 danielgonzagatj1 systemd[1]: llama-s0.service: Main process exited, code=exited, status=1/FAILURE
Aug 12 04:22:01 danielgonzagatj1 systemd[1]: llama-s0.service: Failed with result 'exit-code'.
Aug 12 04:22:04 danielgonzagatj1 systemd[1]: llama-s0.service: Scheduled restart job, restart counter is at 450.
Aug 12 04:22:04 danielgonzagatj1 systemd[1]: Stopped llama.cpp s0 (NUMA0).
Aug 12 04:22:04 danielgonzagatj1 systemd[1]: Started llama.cpp s0 (NUMA0).
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]: error while handling argument "--numa": invalid value
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]: usage:
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]: --numa TYPE                             attempt optimizations that help on some NUMA systems
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]:                                         - distribute: spread execution evenly over all nodes
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]:                                         - isolate: only spawn threads on CPUs on the node that execution
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]:                                         started on
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]:                                         - numactl: use the CPU map provided by numactl
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]:                                         if run without this previously, it is recommended to drop the system
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]:                                         page cache before using this
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]:                                         see https://github.com/ggml-org/llama.cpp/issues/1437
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]:                                         (env: LLAMA_ARG_NUMA)
Aug 12 04:22:04 danielgonzagatj1 llama-run-s0.sh[740849]: to show complete usage, run with -h
Aug 12 04:22:04 danielgonzagatj1 systemd[1]: llama-s0.service: Main process exited, code=exited, status=1/FAILURE
Aug 12 04:22:04 danielgonzagatj1 systemd[1]: llama-s0.service: Failed with result 'exit-code'.
root@danielgonzagatj1:~# # Deve listar o modelo (backend 8090)
curl -s http://127.0.0.1:8090/v1/models | head

# (backend 8091)
curl -s http://127.0.0.1:8091/v1/models | head

# Agora pelo balanceador 8080 (deve parar de dar 502)
curl -s http://127.0.0.1:8080/v1/models | head
<html>
<head><title>502 Bad Gateway</title></head>
<body>
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx/1.18.0 (Ubuntu)</center>
</body>
</html>
root@danielgonzagatj1:~# curl -s http://127.0.0.1:8090/v1/models | head
root@danielgonzagatj1:~# curl -s http://127.0.0.1:8091/v1/models | head
root@danielgonzagatj1:~# curl -s http://127.0.0.1:8080/v1/models | head
<html>
<head><title>502 Bad Gateway</title></head>
<body>
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx/1.18.0 (Ubuntu)</center>
</body>
</html>
root@danielgonzagatj1:~# nginx -t && systemctl restart nginx && sleep 1
curl -s http://127.0.0.1:8080/v1/models | head
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
<html>
<head><title>502 Bad Gateway</title></head>
<body>
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx/1.18.0 (Ubuntu)</center>
</body>
</html>
root@danielgonzagatj1:~# bash -lc 'set -euo pipefail
python3 - "$(< /opt/et/et_autoevolve.py)" << "PY"
import sys, re
src=sys.stdin.read()
new_fn = r"""
def ask(prompt, temp=0.7, max_tokens=512):
    s = requests.Session()
    headers={"Authorization": f"Bearer {LLAMA_KEY}", "Content-Type":"application/json"}
    payload={"model": LLAMA_MODEL, "messages":[{"role":"user","content":prompt}],
             "max_tokens": max_tokens, "temperature": temp}
    t0=time.time()
    try:
        r = s.post(LLAMA_URL, headers=headers, json=payload, timeout=120)
        dt = time.time()-t0
        if r.status_code != 200:
            raise RuntimeError(f"HTTP {r.status_code}: {r.text[:200]}")
        data = r.json()
        content = data["choices"][0]["message"]["content"]
        return content.strip(), dt
    except Exception as e:
        err = f"ASK_FAIL: {type(e).__name__}: {e}"
        print(f"[warn] {err}", flush=True)
'ail -n 8 /var/log/et/autoevolve.log || true="utf-8").write(src) count=1, flags=
ask() reforçado.
[2025-08-12T04:22:49.342607Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:50.350332Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:51.357388Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:52.364448Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:53.371547Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:54.378597Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:55.385606Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:56.394661Z] REJEITADO: motivos=[] score=0.314 best=0.314
root@danielgonzagatj1:~# # opção A: definir explicitamente o tipo
sed -i 's/--numa \\/--numa numactl \\\\/' /usr/local/bin/llama-run-s0.sh
sed -i 's/--numa \\/--numa numactl \\\\/' /usr/local/bin/llama-run-s1.sh

# (alternativa B: remover o --numa do llama.cpp, se preferir)
# sed -i 's/ --numa \\\\/ \\\\/' /usr/local/bin/llama-run-s0.sh
# sed -i 's/ --numa \\\\/ \\\\/' /usr/local/bin/llama-run-s1.sh
root@danielgonzagatj1:~# systemctl daemon-reload
systemctl restart llama-s0 llama-s1
sleep 2
systemctl status llama-s0 llama-s1 --no-pager -n 10
● llama-s0.service - llama.cpp s0 (NUMA0)
     Loaded: loaded (/etc/systemd/system/llama-s0.service; enabled; vendor preset: enabled)
     Active: activating (auto-restart) (Result: exit-code) since Tue 2025-08-12 04:24:12 UTC; 1s ago
    Process: 742940 ExecStart=/usr/local/bin/llama-run-s0.sh (code=exited, status=1/FAILURE)
   Main PID: 742940 (code=exited, status=1/FAILURE)
        CPU: 752ms

● llama-s1.service - llama.cpp s1 (NUMA1)
     Loaded: loaded (/etc/systemd/system/llama-s1.service; enabled; vendor preset: enabled)
     Active: activating (auto-restart) (Result: exit-code) since Tue 2025-08-12 04:24:12 UTC; 1s ago
    Process: 742941 ExecStart=/usr/local/bin/llama-run-s1.sh (code=exited, status=1/FAILURE)
   Main PID: 742941 (code=exited, status=1/FAILURE)
        CPU: 274ms
root@danielgonzagatj1:~# curl -s http://127.0.0.1:8090/v1/models | head
curl -s http://127.0.0.1:8091/v1/models | head
root@danielgonzagatj1:~# nginx -t && systemctl restart nginx && sleep 1
curl -s http://127.0.0.1:8080/v1/models | head
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
<html>
<head><title>502 Bad Gateway</title></head>
<body>
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx/1.18.0 (Ubuntu)</center>
</body>
</html>
root@danielgonzagatj1:~# apt-get update -y && apt-get install -y numactl
lscpu | egrep 'Model name|CPU\(s\)|Thread|NUMA'
numactl -H | head -n 20
Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://archive.ubuntu.com/ubuntu jammy-security InRelease
Reading package lists... Done
E: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 739320 (apt-get)
N: Be aware that removing the lock file is not a solution and may break your system.
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?
CPU(s):                                  48
On-line CPU(s) list:                     0-47
Model name:                              Intel(R) Xeon(R) Silver 4214 CPU @ 2.20GHz
Thread(s) per core:                      2
NUMA node(s):                            2
NUMA node0 CPU(s):                       0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46
NUMA node1 CPU(s):                       1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47
available: 2 nodes (0-1)
node 0 cpus: 0 2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46
node 0 size: 191903 MB
node 0 free: 1266 MB
node 1 cpus: 1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47
node 1 size: 193526 MB
node 1 free: 136899 MB
node distances:
node   0   1 
  0:  10  21 
  1:  21  10 
root@danielgonzagatj1:~# command -v llama-server || true
find / -type f -name llama-server -perm -111 2>/dev/null | head
/root/llama.cpp/build/bin/llama-server
root@danielgonzagatj1:~# BIN="$(command -v llama-server || echo /root/llama.cpp/build/bin/llama-server)"
test -x "$BIN" || { echo "Erro: não achei llama-server em $BIN"; exit 1; }

MODEL="/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf"
test -f "$MODEL" || { echo "Erro: modelo não existe em $MODEL"; exit 1; }

cat >/usr/local/bin/llama-run-s0.sh <<SH
#!/usr/bin/env bash
set -euo pipefail
THREADS="\$(nproc)"
CTX="8192"
PORT="8090"
API_KEY="DANIEL"
ulimit -n 65535 || true
exec numactl --cpunodebind=0 --membind=0 \\
  "$BIN" -m "$MODEL" -t "\$THREADS" -c "\$CTX" \\
  --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY"
SH

cat >/usr/local/bin/llama-run-s1.sh <<SH
#!/usr/bin/env bash
set -euo pipefail
THREADS="\$(nproc)"
systemctl status llama-s0 llama-s1 --no-pager -n 20bin/llama-run-s1.sh
● llama-s0.service - llama.cpp s0 (NUMA0)
     Loaded: loaded (/etc/systemd/system/llama-s0.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:25:39 UTC; 2s ago
   Main PID: 744751 (llama-server)
      Tasks: 120 (limit: 462380)
     Memory: 520.8M
        CPU: 9.135s
     CGroup: /system.slice/llama-s0.service
             └─744751 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]:         {%- if loop…%}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]:             {{- '<|…}}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]:         {%- endif %}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]:     {%- endif %}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: {%- endfor %}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: {%- if add_generati…%}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]:     {{- '<|im_start…}}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: {%- endif %}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: , example_format: '…em
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: You are a helpful a…|>
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: <|im_start|>user
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: Hello<|im_end|>
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: <|im_start|>assistant
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: Hi there<|im_end|>
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: <|im_start|>user
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: How are you?<|im_end|>
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: <|im_start|>assistant
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: '
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: main: server is lis…op
Aug 12 04:25:41 danielgonzagatj1 llama-run-s0.sh[744751]: srv  update_slots: …le

● llama-s1.service - llama.cpp s1 (NUMA1)
     Loaded: loaded (/etc/systemd/system/llama-s1.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:25:39 UTC; 2s ago
   Main PID: 744752 (llama-server)
      Tasks: 120 (limit: 462380)
     Memory: 520.8M
        CPU: 9.473s
     CGroup: /system.slice/llama-s1.service
             └─744752 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]:         {%- if loop…%}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]:             {{- '<|…}}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]:         {%- endif %}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]:     {%- endif %}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: {%- endfor %}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: {%- if add_generati…%}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]:     {{- '<|im_start…}}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: {%- endif %}
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: , example_format: '…em
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: You are a helpful a…|>
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: <|im_start|>user
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: Hello<|im_end|>
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: <|im_start|>assistant
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: Hi there<|im_end|>
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: <|im_start|>user
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: How are you?<|im_end|>
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: <|im_start|>assistant
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: '
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: main: server is lis…op
Aug 12 04:25:41 danielgonzagatj1 llama-run-s1.sh[744752]: srv  update_slots: …le
Hint: Some lines were ellipsized, use -l to show in full.
root@danielgonzagatj1:~# curl -s http://127.0.0.1:8090/v1/models | head
curl -s http://127.0.0.1:8091/v1/models | head
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754972743,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754972743,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}root@danielgonzagatj1:~# nginx -t && systemctl restart nginx && slenginx -t && systemctl restart nginx && sleep 1
curl -s http://127.0.0.1:8080/v1/models | head
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754972751,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}root@danielgonzagatj1:~# bash -lc 'set -euo pipefail

echo "==[1/6] Descobrindo binário e modelo =="
BIN="$(command -v llama-server || echo /root/llama.cpp/build/bin/llama-server)"
MODEL="/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf"
test -x "$BIN"   || { echo "ERRO: llama-server não encontrado em $BIN"; exit 1; }
test -f "$MODEL" || { echo "ERRO: modelo não encontrado em $MODEL"; exit 1; }

echo "==[2/6] Wrappers NUMA (um backend por nó) =="
install -d /usr/local/bin

cat >/usr/local/bin/llama-run-s0.sh <<SH
#!/usr/bin/env bash
set -euo pipefail
THREADS="\$(nproc)"      # pode reduzir pra metade se quiser isolar por nó
CTX="8192"
PORT="8090"
API_KEY="DANIEL"
ulimit -n 65535 || true
exec numactl --cpunodebind=0 --membind=0 \\
  "$BIN" -m "$MODEL" -t "\$THREADS" -c "\$CTX" \\
  --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY"
SH
'cho "OK: backends e balanceador configurados."1 | sed -n "1,120p" || true_api
==[1/6] Descobrindo binário e modelo ==
==[2/6] Wrappers NUMA (um backend por nó) ==
==[3/6] Units systemd dos backends (garante ExecStart correto) ==
==[4/6] NGINX como balanceador (8080 -> 8090/8091) ==
nginx: [emerg] duplicate upstream "llama_backends" in /etc/nginx/sites-enabled/llama_api:1
nginx: configuration file /etc/nginx/nginx.conf test failed
root@danielgonzagatj1:~# bash -lc 'set -euo pipefail

echo "==> 1) Descobrir onde está duplicado"
grep -Rn "^upstream[[:space:]]\+llama_backends" /etc/nginx || true
echo

echo "==> 2) Remover possíveis duplicatas fora de sites-available/llama_api"
# Se existir em conf.d, apaga:
test -f /etc/nginx/conf.d/llama_api.conf && rm -f /etc/nginx/conf.d/llama_api.conf

# Garanta que só exista UM symlink de sites-enabled para o arquivo correto
find /etc/nginx/sites-enabled -maxdepth 1 -type l -name "llama_api*" -exec ls -l {} \; || true
# se aparecer algo além de /etc/nginx/sites-enabled/llama_api -> /etc/nginx/sites-available/llama_api, removemos:
for f in /etc/nginx/sites-enabled/llama_api*; do
  test -L "$f" || continue
  # mantém apenas o symlink chamado exatamente "llama_api"
  if [ "$(basename "$f")" != "llama_api" ]; then rm -f "$f"; fi
done

echo "==> 3) Reescrever o site com UMA definição de upstream"
cat >/etc/nginx/sites-available/llama_api <<'NGX'
' echo-- 8080:";  curl -sS http://127.0.0.1:8080/v1/models | head -c 200 || true
==> 1) Descobrir onde está duplicado
/etc/nginx/sites-available/llama-balancer:1:upstream llama_backends {
/etc/nginx/sites-available/llama_api:1:upstream llama_backends {
/etc/nginx/sites-enabled/llama-balancer:1:upstream llama_backends {
/etc/nginx/sites-enabled/llama_api:1:upstream llama_backends {

==> 2) Remover possíveis duplicatas fora de sites-available/llama_api
lrwxrwxrwx 1 root root 36 Aug 12 04:28 /etc/nginx/sites-enabled/llama_api -> /etc/nginx/sites-available/llama_api
==> 3) Reescrever o site com UMA definição de upstream
bash: line 21: host: unbound variable
root@danielgonzagatj1:~# bash -lc 'set -euo pipefail

echo "==> Removendo duplicata antiga"
# Desabilita e remove o site duplicado "llama-balancer"
if [ -L /etc/nginx/sites-enabled/llama-balancer ]; then
  rm -f /etc/nginx/sites-enabled/llama-balancer
fi
rm -f /etc/nginx/sites-available/llama-balancer

# Também garanta que não exista conf duplicada em conf.d
rm -f /etc/nginx/conf.d/llama_api.conf || true

echo "==> Recriando APENAS um site com um único upstream (llama_api)"
cat >/etc/nginx/sites-available/llama_api <<'"NGX"'
upstream llama_backends {
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 32;
}

server {
    listen 8080;

    location / {
'cho "-- 8080:"; curl -sS http://127.0.0.1:8080/v1/models | head -c 200; echoi
==> Removendo duplicata antiga
==> Recriando APENAS um site com um único upstream (llama_api)
bash: line 50: warning: here-document at line 14 delimited by end-of-file (wanted `NGX')
bash: line 14: host: unbound variable
root@danielgonzagatj1:~# bash -lc 'set -euo pipefail

### 0) Vars básicas
BIN="$(command -v llama-server || echo /root/llama.cpp/build/bin/llama-server)"
MODEL="/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf"
test -x "$BIN"   || { echo "ERRO: llama-server não encontrado em $BIN"; exit 1; }
test -f "$MODEL" || { echo "ERRO: modelo não encontrado em $MODEL"; exit 1; }

### 1) Wrappers NUMA estáveis (um por nó)
install -d /usr/local/bin
cat >/usr/local/bin/llama-run-s0.sh <<SH
#!/usr/bin/env bash
set -euo pipefail
THREADS="\$(nproc)"
CTX="8192"
PORT="8090"
API_KEY="DANIEL"
ulimit -n 65535 || true
exec numactl --cpunodebind=0 --membind=0 \\
  "$BIN" -m "$MODEL" -t "\$THREADS" -c "\$CTX" \\
  --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY"
SH
'cho "Pronto."-pager -n 5 status llama-s0 llama-s1 et-autoevolve | sed -n "1,160
bash: line 262: warning: here-document at line 76 delimited by end-of-file (wanted `NGX')
bash: line 76: host: unbound variable
root@danielgonzagatj1:~# nginx -T | sed -n '1,200p'
journalctl -u llama-s0 -u llama-s1 -u et-autoevolve -n 120 --no-pager
tail -n 60 /var/log/et/autoevolve.log
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
# configuration file /etc/nginx/nginx.conf:
user www-data;
worker_processes auto;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;

events {
	worker_connections 768;
	# multi_accept on;
}

http {

	##
	# Basic Settings
	##

	sendfile on;
	tcp_nopush on;
	types_hash_max_size 2048;
	# server_tokens off;

	# server_names_hash_bucket_size 64;
	# server_name_in_redirect off;

	include /etc/nginx/mime.types;
	default_type application/octet-stream;

	##
	# SSL Settings
	##

	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE
	ssl_prefer_server_ciphers on;

	##
	# Logging Settings
	##

	access_log /var/log/nginx/access.log;
	error_log /var/log/nginx/error.log;

	##
	# Gzip Settings
	##

	gzip on;

	# gzip_vary on;
	# gzip_proxied any;
	# gzip_comp_level 6;
	# gzip_buffers 16 8k;
	# gzip_http_version 1.1;
	# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

	##
	# Virtual Host Configs
	##

	include /etc/nginx/conf.d/*.conf;
	include /etc/nginx/sites-enabled/*;
}


#mail {
#	# See sample authentication script at:
#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript
#
#	# auth_http localhost/auth.php;
#	# pop3_capabilities "TOP" "USER";
#	# imap_capabilities "IMAP4rev1" "UIDPLUS";
#
#	server {
#		listen     localhost:110;
#		protocol   pop3;
#		proxy      on;
#	}
#
#	server {
#		listen     localhost:143;
#		protocol   imap;
#		proxy      on;
#	}
#}

# configuration file /etc/nginx/modules-enabled/50-mod-http-geoip2.conf:
load_module modules/ngx_http_geoip2_module.so;

# configuration file /etc/nginx/modules-enabled/50-mod-http-image-filter.conf:
load_module modules/ngx_http_image_filter_module.so;

# configuration file /etc/nginx/modules-enabled/50-mod-http-xslt-filter.conf:
load_module modules/ngx_http_xslt_filter_module.so;

# configuration file /etc/nginx/modules-enabled/50-mod-mail.conf:
load_module modules/ngx_mail_module.so;

# configuration file /etc/nginx/modules-enabled/50-mod-stream.conf:
load_module modules/ngx_stream_module.so;

# configuration file /etc/nginx/modules-enabled/70-mod-stream-geoip2.conf:
load_module modules/ngx_stream_geoip2_module.so;

# configuration file /etc/nginx/mime.types:

types {
    text/html                             html htm shtml;
    text/css                              css;
    text/xml                              xml;
    image/gif                             gif;
    image/jpeg                            jpeg jpg;
    application/javascript                js;
    application/atom+xml                  atom;
    application/rss+xml                   rss;

    text/mathml                           mml;
    text/plain                            txt;
    text/vnd.sun.j2me.app-descriptor      jad;
    text/vnd.wap.wml                      wml;
    text/x-component                      htc;

    image/png                             png;
    image/tiff                            tif tiff;
    image/vnd.wap.wbmp                    wbmp;
    image/x-icon                          ico;
    image/x-jng                           jng;
    image/x-ms-bmp                        bmp;
    image/svg+xml                         svg svgz;
    image/webp                            webp;

    application/font-woff                 woff;
    application/java-archive              jar war ear;
    application/json                      json;
    application/mac-binhex40              hqx;
    application/msword                    doc;
    application/pdf                       pdf;
    application/postscript                ps eps ai;
    application/rtf                       rtf;
    application/vnd.apple.mpegurl         m3u8;
    application/vnd.ms-excel              xls;
    application/vnd.ms-fontobject         eot;
    application/vnd.ms-powerpoint         ppt;
    application/vnd.wap.wmlc              wmlc;
    application/vnd.google-earth.kml+xml  kml;
    application/vnd.google-earth.kmz      kmz;
    application/x-7z-compressed           7z;
    application/x-cocoa                   cco;
    application/x-java-archive-diff       jardiff;
    application/x-java-jnlp-file          jnlp;
    application/x-makeself                run;
    application/x-perl                    pl pm;
    application/x-pilot                   prc pdb;
    application/x-rar-compressed          rar;
    application/x-redhat-package-manager  rpm;
    application/x-sea                     sea;
    application/x-shockwave-flash         swf;
    application/x-stuffit                 sit;
    application/x-tcl                     tcl tk;
    application/x-x509-ca-cert            der pem crt;
    application/x-xpinstall               xpi;
    application/xhtml+xml                 xhtml;
    application/xspf+xml                  xspf;
    application/zip                       zip;

    application/octet-stream              bin exe dll;
    application/octet-stream              deb;
    application/octet-stream              dmg;
    application/octet-stream              iso img;
    application/octet-stream              msi msp msm;

    application/vnd.openxmlformats-officedocument.wordprocessingml.document    docx;
    application/vnd.openxmlformats-officedocument.spreadsheetml.sheet          xlsx;
    application/vnd.openxmlformats-officedocument.presentationml.presentation  pptx;

    audio/midi                            mid midi kar;
    audio/mpeg                            mp3;
    audio/ogg                             ogg;
    audio/x-m4a                           m4a;
    audio/x-realaudio                     ra;

    video/3gpp                            3gpp 3gp;
    video/mp2t                            ts;
    video/mp4                             mp4;
    video/mpeg                            mpeg mpg;
    video/quicktime                       mov;
    video/webm                            webm;
    video/x-flv                           flv;
    video/x-m4v                           m4v;
    video/x-mng                           mng;
    video/x-ms-asf                        asx asf;
    video/x-ms-wmv                        wmv;
    video/x-msvideo                       avi;
}

# configuration file /etc/nginx/sites-enabled/llama_api:

Aug 12 04:31:57 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:31:57 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:00 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 244.
Aug 12 04:32:00 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:00 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:00 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:02 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 245.
Aug 12 04:32:02 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:02 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:02 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:04 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 246.
Aug 12 04:32:04 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:04 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:04 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:06 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 247.
Aug 12 04:32:06 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:06 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:06 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:09 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 248.
Aug 12 04:32:09 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:09 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:09 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:09 danielgonzagatj1 llama-run-s0.sh[744751]: srv  params_from_: Chat format: Content-only
Aug 12 04:32:09 danielgonzagatj1 llama-run-s0.sh[744751]: slot launch_slot_: id  0 | task 7 | processing task
Aug 12 04:32:09 danielgonzagatj1 llama-run-s0.sh[744751]: slot update_slots: id  0 | task 7 | new prompt, n_ctx_slot = 8192, n_keep = 0, n_prompt_tokens = 17
Aug 12 04:32:09 danielgonzagatj1 llama-run-s0.sh[744751]: slot update_slots: id  0 | task 7 | need to evaluate at least 1 token for each active slot, n_past = 17, n_prompt_tokens = 17
Aug 12 04:32:09 danielgonzagatj1 llama-run-s0.sh[744751]: slot update_slots: id  0 | task 7 | kv cache rm [16, end)
Aug 12 04:32:09 danielgonzagatj1 llama-run-s0.sh[744751]: slot update_slots: id  0 | task 7 | prompt processing progress, n_past = 17, n_tokens = 1, progress = 0.058824
Aug 12 04:32:09 danielgonzagatj1 llama-run-s0.sh[744751]: slot update_slots: id  0 | task 7 | prompt done, n_past = 17, n_tokens = 1
Aug 12 04:32:10 danielgonzagatj1 llama-run-s0.sh[744751]: slot      release: id  0 | task 7 | stop processing: n_past = 22, truncated = 0
Aug 12 04:32:10 danielgonzagatj1 llama-run-s0.sh[744751]: slot print_timing: id  0 | task 7 |
Aug 12 04:32:10 danielgonzagatj1 llama-run-s0.sh[744751]: prompt eval time =     183.06 ms /     1 tokens (  183.06 ms per token,     5.46 tokens per second)
Aug 12 04:32:10 danielgonzagatj1 llama-run-s0.sh[744751]:        eval time =     779.87 ms /     6 tokens (  129.98 ms per token,     7.69 tokens per second)
Aug 12 04:32:10 danielgonzagatj1 llama-run-s0.sh[744751]:       total time =     962.93 ms /     7 tokens
Aug 12 04:32:10 danielgonzagatj1 llama-run-s0.sh[744751]: srv  update_slots: all slots are idle
Aug 12 04:32:10 danielgonzagatj1 llama-run-s0.sh[744751]: srv  log_server_r: request: POST /v1/chat/completions 127.0.0.1 200
Aug 12 04:32:11 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 249.
Aug 12 04:32:11 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:11 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:11 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:13 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 250.
Aug 12 04:32:13 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:13 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:13 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:15 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 251.
Aug 12 04:32:15 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:15 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:15 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:18 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 252.
Aug 12 04:32:18 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:18 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:18 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:20 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 253.
Aug 12 04:32:20 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:20 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:20 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:22 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 254.
Aug 12 04:32:22 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:22 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:22 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:24 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 255.
Aug 12 04:32:24 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:24 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:24 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:27 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 256.
Aug 12 04:32:27 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:27 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:27 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:29 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 257.
Aug 12 04:32:29 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:29 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:29 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:31 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 258.
Aug 12 04:32:31 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:31 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:31 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:33 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 259.
Aug 12 04:32:33 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:33 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:33 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:36 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 260.
Aug 12 04:32:36 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:36 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:36 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:38 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 261.
Aug 12 04:32:38 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:38 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:38 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:40 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 262.
Aug 12 04:32:40 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:40 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:40 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:42 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 263.
Aug 12 04:32:42 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:42 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:42 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:44 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 264.
Aug 12 04:32:44 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:44 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:44 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:47 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 265.
Aug 12 04:32:47 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:47 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:47 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:49 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 266.
Aug 12 04:32:49 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:49 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:49 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:51 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 267.
Aug 12 04:32:51 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:51 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:51 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:53 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 268.
Aug 12 04:32:53 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:53 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:53 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:32:55 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 269.
Aug 12 04:32:55 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:32:55 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:32:55 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
[2025-08-12T04:21:56.965529Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:57.972460Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:58.979456Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:59.986354Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:00.995097Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:02.002549Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:03.010061Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:04.016897Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:05.023811Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:06.030893Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:07.037889Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:08.045000Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:09.051937Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:10.058930Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:11.065906Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:12.073187Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:13.080214Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:14.087061Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:15.094290Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:16.103238Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:17.110191Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:18.117451Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:19.124435Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:20.131454Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:21.139733Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:22.146703Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:23.153673Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:24.160742Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:25.168032Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:26.175009Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:27.181869Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:28.189270Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:29.196084Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:30.203046Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:31.211039Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:32.217838Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:33.224846Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:34.232133Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:35.238951Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:36.247819Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:37.257665Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:38.264638Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:39.271734Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:40.278552Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:41.286532Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:42.293439Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:43.300332Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:44.307602Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:45.314415Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:46.321311Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:47.328658Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:48.335589Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:49.342607Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:50.350332Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:51.357388Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:52.364448Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:53.371547Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:54.378597Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:55.385606Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:56.394661Z] REJEITADO: motivos=[] score=0.314 best=0.314
root@danielgonzagatj1:~# bash -lc 'set -euo pipefail

### [A] Descobrir binário/modelo e checar
BIN="$(command -v llama-server || echo /root/llama.cpp/build/bin/llama-server)"
MODEL="/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf"
test -x "$BIN"   || { echo "ERRO: llama-server não encontrado em $BIN"; exit 1; }
test -f "$MODEL" || { echo "ERRO: modelo não encontrado em $MODEL"; exit 1; }

### [B] Wrappers NUMA (um backend por nó) — RECRIAR do zero
install -d /usr/local/bin

cat >/usr/local/bin/llama-run-s0.sh <<SH
#!/usr/bin/env bash
set -euo pipefail
THREADS="\$(nproc)"
CTX="8192"
PORT="8090"
API_KEY="DANIEL"
ulimit -n 65535 || true
exec numactl --cpunodebind=0 --membind=0 \\
  "$BIN" -m "$MODEL" -t "\$THREADS" -c "\$CTX" \\
  --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY"
SH
'cho "OK"" || trueer --full -n 20 status llama-s0 llama-s1 et-autoevolve | sed -
bash: line 150: warning: here-document at line 76 delimited by end-of-file (wanted `NGX')
bash: line 76: host: unbound variable
root@danielgonzagatj1:~# nginx -T | sed -n '1,260p'
journalctl -u llama-s0 -u llama-s1 -u et-autoevolve -n 120 --no-pager
tail -n 100 /var/log/et/autoevolve.log
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
# configuration file /etc/nginx/nginx.conf:
user www-data;
worker_processes auto;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;

events {
	worker_connections 768;
	# multi_accept on;
}

http {

	##
	# Basic Settings
	##

	sendfile on;
	tcp_nopush on;
	types_hash_max_size 2048;
	# server_tokens off;

	# server_names_hash_bucket_size 64;
	# server_name_in_redirect off;

	include /etc/nginx/mime.types;
	default_type application/octet-stream;

	##
	# SSL Settings
	##

	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE
	ssl_prefer_server_ciphers on;

	##
	# Logging Settings
	##

	access_log /var/log/nginx/access.log;
	error_log /var/log/nginx/error.log;

	##
	# Gzip Settings
	##

	gzip on;

	# gzip_vary on;
	# gzip_proxied any;
	# gzip_comp_level 6;
	# gzip_buffers 16 8k;
	# gzip_http_version 1.1;
	# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

	##
	# Virtual Host Configs
	##

	include /etc/nginx/conf.d/*.conf;
	include /etc/nginx/sites-enabled/*;
}


#mail {
#	# See sample authentication script at:
#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript
#
#	# auth_http localhost/auth.php;
#	# pop3_capabilities "TOP" "USER";
#	# imap_capabilities "IMAP4rev1" "UIDPLUS";
#
#	server {
#		listen     localhost:110;
#		protocol   pop3;
#		proxy      on;
#	}
#
#	server {
#		listen     localhost:143;
#		protocol   imap;
#		proxy      on;
#	}
#}

# configuration file /etc/nginx/modules-enabled/50-mod-http-geoip2.conf:
load_module modules/ngx_http_geoip2_module.so;

# configuration file /etc/nginx/modules-enabled/50-mod-http-image-filter.conf:
load_module modules/ngx_http_image_filter_module.so;

# configuration file /etc/nginx/modules-enabled/50-mod-http-xslt-filter.conf:
load_module modules/ngx_http_xslt_filter_module.so;

# configuration file /etc/nginx/modules-enabled/50-mod-mail.conf:
load_module modules/ngx_mail_module.so;

# configuration file /etc/nginx/modules-enabled/50-mod-stream.conf:
load_module modules/ngx_stream_module.so;

# configuration file /etc/nginx/modules-enabled/70-mod-stream-geoip2.conf:
load_module modules/ngx_stream_geoip2_module.so;

# configuration file /etc/nginx/mime.types:

types {
    text/html                             html htm shtml;
    text/css                              css;
    text/xml                              xml;
    image/gif                             gif;
    image/jpeg                            jpeg jpg;
    application/javascript                js;
    application/atom+xml                  atom;
    application/rss+xml                   rss;

    text/mathml                           mml;
    text/plain                            txt;
    text/vnd.sun.j2me.app-descriptor      jad;
    text/vnd.wap.wml                      wml;
    text/x-component                      htc;

    image/png                             png;
    image/tiff                            tif tiff;
    image/vnd.wap.wbmp                    wbmp;
    image/x-icon                          ico;
    image/x-jng                           jng;
    image/x-ms-bmp                        bmp;
    image/svg+xml                         svg svgz;
    image/webp                            webp;

    application/font-woff                 woff;
    application/java-archive              jar war ear;
    application/json                      json;
    application/mac-binhex40              hqx;
    application/msword                    doc;
    application/pdf                       pdf;
    application/postscript                ps eps ai;
    application/rtf                       rtf;
    application/vnd.apple.mpegurl         m3u8;
    application/vnd.ms-excel              xls;
    application/vnd.ms-fontobject         eot;
    application/vnd.ms-powerpoint         ppt;
    application/vnd.wap.wmlc              wmlc;
    application/vnd.google-earth.kml+xml  kml;
    application/vnd.google-earth.kmz      kmz;
    application/x-7z-compressed           7z;
    application/x-cocoa                   cco;
    application/x-java-archive-diff       jardiff;
    application/x-java-jnlp-file          jnlp;
    application/x-makeself                run;
    application/x-perl                    pl pm;
    application/x-pilot                   prc pdb;
    application/x-rar-compressed          rar;
    application/x-redhat-package-manager  rpm;
    application/x-sea                     sea;
    application/x-shockwave-flash         swf;
    application/x-stuffit                 sit;
    application/x-tcl                     tcl tk;
    application/x-x509-ca-cert            der pem crt;
    application/x-xpinstall               xpi;
    application/xhtml+xml                 xhtml;
    application/xspf+xml                  xspf;
    application/zip                       zip;

    application/octet-stream              bin exe dll;
    application/octet-stream              deb;
    application/octet-stream              dmg;
    application/octet-stream              iso img;
    application/octet-stream              msi msp msm;

    application/vnd.openxmlformats-officedocument.wordprocessingml.document    docx;
    application/vnd.openxmlformats-officedocument.spreadsheetml.sheet          xlsx;
    application/vnd.openxmlformats-officedocument.presentationml.presentation  pptx;

    audio/midi                            mid midi kar;
    audio/mpeg                            mp3;
    audio/ogg                             ogg;
    audio/x-m4a                           m4a;
    audio/x-realaudio                     ra;

    video/3gpp                            3gpp 3gp;
    video/mp2t                            ts;
    video/mp4                             mp4;
    video/mpeg                            mpeg mpg;
    video/quicktime                       mov;
    video/webm                            webm;
    video/x-flv                           flv;
    video/x-m4v                           m4v;
    video/x-mng                           mng;
    video/x-ms-asf                        asx asf;
    video/x-ms-wmv                        wmv;
    video/x-msvideo                       avi;
}

# configuration file /etc/nginx/sites-enabled/llama_api:

Aug 12 04:33:22 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:25 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 282.
Aug 12 04:33:25 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:25 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:25 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:27 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 283.
Aug 12 04:33:27 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:27 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:27 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:29 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 284.
Aug 12 04:33:29 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:29 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:29 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:31 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 285.
Aug 12 04:33:31 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:31 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:31 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:34 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 286.
Aug 12 04:33:34 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:34 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:34 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:36 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 287.
Aug 12 04:33:36 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:36 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:36 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:38 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 288.
Aug 12 04:33:38 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:38 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:38 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:40 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 289.
Aug 12 04:33:40 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:40 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:40 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:43 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 290.
Aug 12 04:33:43 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:43 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:43 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:45 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 291.
Aug 12 04:33:45 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:45 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:45 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:47 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 292.
Aug 12 04:33:47 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:47 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:47 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:49 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 293.
Aug 12 04:33:49 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:49 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:49 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:52 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 294.
Aug 12 04:33:52 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:52 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:52 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:54 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 295.
Aug 12 04:33:54 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:54 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:54 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:56 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 296.
Aug 12 04:33:56 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:56 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:56 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:33:58 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 297.
Aug 12 04:33:58 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:33:58 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:33:58 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:34:01 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 298.
Aug 12 04:34:01 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:34:01 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:34:01 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:34:03 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 299.
Aug 12 04:34:03 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:34:03 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:34:03 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:34:05 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 300.
Aug 12 04:34:05 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:34:05 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:34:05 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:34:07 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 301.
Aug 12 04:34:07 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:34:07 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:34:07 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:34:10 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 302.
Aug 12 04:34:10 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:34:10 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:34:10 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:34:10 danielgonzagatj1 llama-run-s1.sh[744752]: srv  params_from_: Chat format: Content-only
Aug 12 04:34:10 danielgonzagatj1 llama-run-s1.sh[744752]: slot launch_slot_: id  0 | task 14 | processing task
Aug 12 04:34:10 danielgonzagatj1 llama-run-s1.sh[744752]: slot update_slots: id  0 | task 14 | new prompt, n_ctx_slot = 8192, n_keep = 0, n_prompt_tokens = 17
Aug 12 04:34:10 danielgonzagatj1 llama-run-s1.sh[744752]: slot update_slots: id  0 | task 14 | need to evaluate at least 1 token for each active slot, n_past = 17, n_prompt_tokens = 17
Aug 12 04:34:10 danielgonzagatj1 llama-run-s1.sh[744752]: slot update_slots: id  0 | task 14 | kv cache rm [16, end)
Aug 12 04:34:10 danielgonzagatj1 llama-run-s1.sh[744752]: slot update_slots: id  0 | task 14 | prompt processing progress, n_past = 17, n_tokens = 1, progress = 0.058824
Aug 12 04:34:10 danielgonzagatj1 llama-run-s1.sh[744752]: slot update_slots: id  0 | task 14 | prompt done, n_past = 17, n_tokens = 1
Aug 12 04:34:11 danielgonzagatj1 llama-run-s1.sh[744752]: slot      release: id  0 | task 14 | stop processing: n_past = 22, truncated = 0
Aug 12 04:34:11 danielgonzagatj1 llama-run-s1.sh[744752]: slot print_timing: id  0 | task 14 |
Aug 12 04:34:11 danielgonzagatj1 llama-run-s1.sh[744752]: prompt eval time =     208.49 ms /     1 tokens (  208.49 ms per token,     4.80 tokens per second)
Aug 12 04:34:11 danielgonzagatj1 llama-run-s1.sh[744752]:        eval time =     973.11 ms /     6 tokens (  162.18 ms per token,     6.17 tokens per second)
Aug 12 04:34:11 danielgonzagatj1 llama-run-s1.sh[744752]:       total time =    1181.59 ms /     7 tokens
Aug 12 04:34:11 danielgonzagatj1 llama-run-s1.sh[744752]: srv  update_slots: all slots are idle
Aug 12 04:34:11 danielgonzagatj1 llama-run-s1.sh[744752]: srv  log_server_r: request: POST /v1/chat/completions 127.0.0.1 200
Aug 12 04:34:12 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 303.
Aug 12 04:34:12 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:34:12 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:34:12 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:34:14 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 304.
Aug 12 04:34:14 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:34:14 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:34:14 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:34:16 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 305.
Aug 12 04:34:16 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:34:16 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:34:16 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:34:19 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 306.
Aug 12 04:34:19 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 307.
Aug 12 04:34:19 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:34:19 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:34:19 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
Aug 12 04:34:21 danielgonzagatj1 systemd[1]: et-autoevolve.service: Scheduled restart job, restart counter is at 308.
Aug 12 04:34:21 danielgonzagatj1 systemd[1]: Stopped ET★ Autoevolve (self-improving loop).
Aug 12 04:34:21 danielgonzagatj1 systemd[1]: Started ET★ Autoevolve (self-improving loop).
Aug 12 04:34:21 danielgonzagatj1 systemd[1]: et-autoevolve.service: Deactivated successfully.
[2025-08-12T04:21:16.679750Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:17.686684Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:18.693745Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:19.700916Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:20.707965Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:21.714766Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:22.722093Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:23.729038Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:24.735889Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:25.742742Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:26.749763Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:27.756563Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:28.763443Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:29.770807Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:30.779780Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:31.786813Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:32.794237Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:33.801065Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:34.808104Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:35.817227Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:36.824392Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:37.831317Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:38.838217Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:39.845031Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:40.851846Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:41.858718Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:42.865742Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:43.872510Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:44.879314Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:45.887275Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:46.894152Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:47.900928Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:48.908026Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:49.914819Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:50.922645Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:51.929554Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:52.936543Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:53.943445Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:54.950438Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:55.958479Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:56.965529Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:57.972460Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:58.979456Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:21:59.986354Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:00.995097Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:02.002549Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:03.010061Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:04.016897Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:05.023811Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:06.030893Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:07.037889Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:08.045000Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:09.051937Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:10.058930Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:11.065906Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:12.073187Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:13.080214Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:14.087061Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:15.094290Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:16.103238Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:17.110191Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:18.117451Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:19.124435Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:20.131454Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:21.139733Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:22.146703Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:23.153673Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:24.160742Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:25.168032Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:26.175009Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:27.181869Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:28.189270Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:29.196084Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:30.203046Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:31.211039Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:32.217838Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:33.224846Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:34.232133Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:35.238951Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:36.247819Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:37.257665Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:38.264638Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:39.271734Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:40.278552Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:41.286532Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:42.293439Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:43.300332Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:44.307602Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:45.314415Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:46.321311Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:47.328658Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:48.335589Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:49.342607Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:50.350332Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:51.357388Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:52.364448Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:53.371547Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:54.378597Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:55.385606Z] REJEITADO: motivos=[] score=0.314 best=0.314
[2025-08-12T04:22:56.394661Z] REJEITADO: motivos=[] score=0.314 best=0.314
root@danielgonzagatj1:~# curl http://127.0.0.1:8080/v1/chat/completions \
  -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
  -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Escreva um haicai sobre café."}],"max_tokens":60}'
{"choices":[{"finish_reason":"stop","index":0,"message":{"role":"assistant","content":"Café se derrama,\naroma acolhedor toma,\nmanhã desperta."}}],"created":1754973319,"model":"qwen2.5-7b-instruct","system_fingerprint":"b6134-be48528b","object":"chat.completion","usage":{"completion_tokens":24,"prompt_tokens":18,"total_tokens":42},"id":"chatcmpl-WSCS078VEQHX0MX6VTDTM3oX9JjhyDJq","timings":{"prompt_n":15,"prompt_ms":890.691,"prompt_per_token_ms":59.379400000000004,"prompt_per_second":16.84085726699832,"predicted_n":24,"predicted_ms":3639.267,"predicted_per_token_ms":151.636125,"predicted_per_second":6.594734599027771}}root@danielgonzagatj1:~# tail -f /var/ltail -f /var/log/nginx/access.log
# faça 5–10 requests; deve alternar upstreams 8090/8091
127.0.0.1 - - [12/Aug/2025:04:22:56 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:24:05 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:24:25 +0000] "GET /v1/models HTTP/1.1" 502 166 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:25:51 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:26:07 +0000] "POST /v1/chat/completions HTTP/1.1" 200 588 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:28:08 +0000] "POST /v1/chat/completions HTTP/1.1" 200 576 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:30:08 +0000] "POST /v1/chat/completions HTTP/1.1" 200 565 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:32:10 +0000] "POST /v1/chat/completions HTTP/1.1" 200 575 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:34:11 +0000] "POST /v1/chat/completions HTTP/1.1" 200 575 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:35:19 +0000] "POST /v1/chat/completions HTTP/1.1" 200 628 "-" "curl/7.81.0"
^C
root@danielgonzagatj1:~# cat >/etc/systemd/system/et-autoevolve.service <<'U'
[Unit]
Description=ET★ Autoevolve (run-once)
[Service]
Type=oneshot
User=et
Group=et
WorkingDirectory=/opt/et
ExecStart=/opt/et/venv/bin/python /opt/et/et_autoevolve.py
U

cat >/etc/systemd/system/et-autoevolve.timer <<'U'
[Unit]
Description=Run ET★ Autoevolve every minute
[Timer]
OnBootSec=30
OnUnitActiveSec=60
Unit=et-autoevolve.service
[Install]
WantedBy=timers.target
U

systemctl daemon-reload
systemctl disable --now et-autoevolve.service
systemctl list-timers | grep et-autoevolve
Removed /etc/systemd/system/multi-user.target.wants/et-autoevolve.service.
Created symlink /etc/systemd/system/timers.target.wants/et-autoevolve.timer → /etc/systemd/system/et-autoevolve.timer.
n/a                         n/a                 Tue 2025-08-12 04:35:50 UTC 6ms ago      et-autoevolve.timer            et-autoevolve.service
root@danielgonzagatj1:~# cat >/etc/systemd/system/et-autoevolve.service <<'U'
[Unit]
Description=ET★ Autoevolve (run-once)
[Service]
Type=oneshot
User=et
Group=et
WorkingDirectory=/opt/et
ExecStart=/opt/et/venv/bin/python /opt/et/et_autoevolve.py
U

cat >/etc/systemd/system/et-autoevolve.timer <<'U'
[Unit]
Description=Run ET★ Autoevolve every minute
[Timer]
OnBootSec=30
OnUnitActiveSec=60
Unit=et-autoevolve.service
[Install]
WantedBy=timers.target
U

systemctl daemon-reload
systemctl disable --now et-autoevolve.service
systemctl list-timers | grep et-autoevolve
Warning: Stopping et-autoevolve.service, but it can still be activated by:
  et-autoevolve.timer
Tue 2025-08-12 04:36:50 UTC 27s left            Tue 2025-08-12 04:35:50 UTC 32s ago      et-autoevolve.timer            et-autoevolve.service
root@danielgonzagatj1:~# systemctl disable --now et-autoevolve.service
Warning: Stopping et-autoevolve.service, but it can still be activated by:
  et-autoevolve.timer
root@danielgonzagatj1:~# # deixar s0 no node1 e s1 no node0, por exemplo
sed -i 's/cpunodebind=0 --membind=0/cpunodebind=1 --membind=1/' /usr/local/bin/llama-run-s0.sh
sed -i 's/cpunodebind=1 --membind=1/cpunodebind=0 --membind=0/' /usr/local/bin/llama-run-s1.sh
systemctl restart llama-s0 llama-s1
root@danielgonzagatj1:~# ps aux | egrep 'apt|dpkg'
# se não for intencional, aguarde terminar; se travou de vez:
rm -f /var/lib/dpkg/lock-frontend /var/cache/apt/archives/lock
dpkg --configure -a
apt-get update
root      738993  0.0  0.0   7508  4164 pts/3    S+   04:20   0:00 bash -lc set -euo pipefail apt-get update -y >/dev/null apt-get install -y numactl >/dev/null  # sem isso, o exec numactl dá 127  # Descobrir onde está o llama-server de verdade LLAMA_BIN="$(command -v llama-server || true)" test -x "$LLAMA_BIN" || {   # tente caminhos comuns   for P in /root/llama.cpp/build/bin/llama-server /usr/local/bin/llama-server /usr/bin/llama-server; do     if [ -x "$P" ]; then LLAMA_BIN="$P"; break; fi   done } if [ -z "$LLAMA_BIN" ]; then   echo "ERRO: não achei o binário llama-server. Onde ele foi instalado?"   echo "Sugestão: find / -type f -name llama-server 2>/dev/null | head -n 3"   exit 1 fi echo "OK: usando LLAMA_BIN=$LLAMA_BIN"  MODEL="/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf" test -f "$MODEL" || { echo "ERRO: Modelo não encontrado em $MODEL"; exit 1; }  install -d /usr/local/bin  # Recria scripts com fallback (roda sem numactl se não existir) cat >/usr/local/bin/llama-run-s0.sh <<SH #!/usr/bin/env bash set -euo pipefail MODEL="$MODEL"; THREADS="24"; CTX="8192"; PORT="8090"; API_KEY="DANIEL" ulimit -n 65535 || true if command -v numactl >/dev/null 2>&1; then   exec numactl --cpunodebind=0 --membind=0 \\     "$LLAMA_BIN" -m "\$MODEL" -t "\$THREADS" -c "\$CTX" --numa \\     --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY" else   exec "$LLAMA_BIN" -m "\$MODEL" -t "\$THREADS" -c "\$CTX" \\     --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY" fi SH chmod +x /usr/local/bin/llama-run-s0.sh  cat >/usr/local/bin/llama-run-s1.sh <<SH #!/usr/bin/env bash set -euo pipefail MODEL="$MODEL"; THREADS="24"; CTX="8192"; PORT="8091"; API_KEY="DANIEL" ulimit -n 65535 || true if command -v numactl >/dev/null 2>&1; then   exec numactl --cpunodebind=1 --membind=1 \\     "$LLAMA_BIN" -m "\$MODEL" -t "\$THREADS" -c "\$CTX" --numa \\     --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY" else   exec "$LLAMA_BIN" -m "\$MODEL" -t "\$THREADS" -c "\$CTX" \\     --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY" fi SH chmod +x /usr/local/bin/llama-run-s1.sh  systemctl daemon-reload systemctl restart llama-s0 llama-s1 sleep 2 systemctl status llama-s0 llama-s1 --no-pager -n 5 
root      739320  0.0  0.0 100144 91416 pts/3    S+   04:20   0:00 apt-get install -y numactl
root      739421  0.0  0.0 100144 25512 pts/3    S+   04:20   0:00 apt-get install -y numactl
root      739429  0.0  0.0   2892   992 pts/3    S+   04:20   0:00 sh -c test -x /usr/lib/needrestart/apt-pinvoke && /usr/lib/needrestart/apt-pinvoke || true
root      746139  0.0  0.0   6612  2292 pts/4    S+   04:36   0:00 grep -E --color=auto apt|dpkg
Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://archive.ubuntu.com/ubuntu jammy-security InRelease
Reading package lists... Done
root@danielgonzagatj1:~# systemctl disable --now et-autoevolve.timer
systemctl stop et-autoevolve.service
systemctl list-timers | grep -i autoevolve || echo "timer off"
Removed /etc/systemd/system/timers.target.wants/et-autoevolve.timer.
timer off
root@danielgonzagatj1:~# upstream llama_backends {
    least_conn;          upstream llama_backends {
    least_conn;0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}
server {
server {en 8080;
    listen 8080;limit upload sizes (bigger prompts)
    # optional: limit upload sizes (bigger prompts)
    client_max_body_size 5m;
    location / {
    location / {tp_version 1.1;
        proxy_http_version 1.1;tion "";
        proxy_set_header Connection "";
        proxy_set_header Host $host;-For $remote_addr;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_read_timeout 300;
        proxy_send_timeout 300;
        proxy_next_upstream error timeout http_502 http_503 http_504;
        proxy_next_upstream error timeout http_502 http_503 http_504;
        proxy_pass http://llama_backends;
    }
}
upstream: command not found
least_conn: command not found
Command 'server' not found, did you mean:
  command 'serve' from snap serve (0.3.0)
  command 'serveo' from snap serveo (0.0.10)
  command 'jserver' from deb freewnn-jserver (1.1.1~a021+cvs20130302-7build1)
  command 'semver' from deb node-semver (7.3.5+~7.3.8-1)
  command 'kserver' from deb freewnn-kserver (1.1.1~a021+cvs20130302-7build1)
  command 'cserver' from deb freewnn-cserver (1.1.1~a021+cvs20130302-7build1)
See 'snap info <snapname>' for additional versions.
Command 'server' not found, did you mean:
  command 'serveo' from snap serveo (0.0.10)
  command 'serve' from snap serve (0.3.0)
  command 'cserver' from deb freewnn-cserver (1.1.1~a021+cvs20130302-7build1)
  command 'kserver' from deb freewnn-kserver (1.1.1~a021+cvs20130302-7build1)
  command 'jserver' from deb freewnn-jserver (1.1.1~a021+cvs20130302-7build1)
  command 'semver' from deb node-semver (7.3.5+~7.3.8-1)
See 'snap info <snapname>' for additional versions.
Command 'keepalive' not found, did you mean:
  command 'keepalived' from deb keepalived (1:2.2.4-0.2build1)
Try: apt install <deb name>
-bash: syntax error near unexpected token `}'
Command 'server' not found, did you mean:
  command 'serveo' from snap serveo (0.0.10)
  command 'serve' from snap serve (0.3.0)
  command 'cserver' from deb freewnn-cserver (1.1.1~a021+cvs20130302-7build1)
  command 'jserver' from deb freewnn-jserver (1.1.1~a021+cvs20130302-7build1)
  command 'kserver' from deb freewnn-kserver (1.1.1~a021+cvs20130302-7build1)
  command 'semver' from deb node-semver (7.3.5+~7.3.8-1)
See 'snap info <snapname>' for additional versions.
Command 'listen' not found, but can be installed with:
apt install ruby-listen
client_max_body_size: command not found
location: command not found
proxy_http_version: command not found
proxy_set_header: command not found
proxy_set_header: command not found
proxy_set_header: command not found
proxy_read_timeout: command not found
proxy_send_timeout: command not found
proxy_next_upstream: command not found
proxy_pass: command not found
-bash: syntax error near unexpected token `}'
-bash: syntax error near unexpected token `}'
root@danielgonzagatj1:~# rm -f /etc/nginx/sites-enabled/llama-balancer
ln -sf /etc/nginx/sites-available/llama_api /etc/nginx/sites-enabled/llama_api
nginx -t && systemctl reload nginx
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# for i in {1..6}; do curl -s http://127.0.0.1:8080/v1/models >/dev/null; done
tail -n 20 /var/log/nginx/access.log
127.0.0.1 - - [12/Aug/2025:04:22:55 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:22:55 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:22:55 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:22:55 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:22:56 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:22:56 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:22:56 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:22:56 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:22:56 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:24:05 +0000] "POST /v1/chat/completions HTTP/1.1" 502 166 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:24:25 +0000] "GET /v1/models HTTP/1.1" 502 166 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:25:51 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:26:07 +0000] "POST /v1/chat/completions HTTP/1.1" 200 588 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:28:08 +0000] "POST /v1/chat/completions HTTP/1.1" 200 576 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:30:08 +0000] "POST /v1/chat/completions HTTP/1.1" 200 565 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:32:10 +0000] "POST /v1/chat/completions HTTP/1.1" 200 575 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:34:11 +0000] "POST /v1/chat/completions HTTP/1.1" 200 575 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:35:19 +0000] "POST /v1/chat/completions HTTP/1.1" 200 628 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:36:23 +0000] "POST /v1/chat/completions HTTP/1.1" 200 575 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:38:25 +0000] "POST /v1/chat/completions HTTP/1.1" 200 577 "-" "python-requests/2.32.4"
root@danielgonzagatj1:~# sed -i 's/THREADS="$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s0.sh
sed -i 's/THREADS="$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s1.sh
systemctl restart llama-s0 llama-s1
root@danielgonzagatj1:~# sed -i 's/THREADS="$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s0.sh
sed -i 's/THREADS="$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s1.sh
systemctl restart llama-s0 llama-s1
root@danielgonzagatj1:~# systemctl daemon-reload
systemctl restart llama-s0 llama-s1
systemctl status llama-s0 llama-s1 --no-pager -n 20
● llama-s0.service - llama.cpp s0 (NUMA0)
     Loaded: loaded (/etc/systemd/system/llama-s0.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:39:18 UTC; 27ms ago
   Main PID: 747372 (llama-server)
      Tasks: 24 (limit: 462380)
     Memory: 7.8M
        CPU: 207ms
     CGroup: /system.slice/llama-s0.service
             └─747372 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:39:18 danielgonzagatj1 systemd[1]: Started llama.cpp s0 (NUMA0).

● llama-s1.service - llama.cpp s1 (NUMA1)
     Loaded: loaded (/etc/systemd/system/llama-s1.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:39:18 UTC; 74ms ago
   Main PID: 747348 (llama-server)
      Tasks: 73 (limit: 462380)
     Memory: 16.8M
        CPU: 1.312s
     CGroup: /system.slice/llama-s1.service
             └─747348 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:39:18 danielgonzagatj1 systemd[1]: Started llama.cpp s1 (NUMA1).
Aug 12 04:39:18 danielgonzagatj1 llama-run-s1.sh[747348]: build: 6134 (be4852…nu
Aug 12 04:39:18 danielgonzagatj1 llama-run-s1.sh[747348]: system info: n_thre…48
Aug 12 04:39:18 danielgonzagatj1 llama-run-s1.sh[747348]: system_info: n_thre… |
Aug 12 04:39:18 danielgonzagatj1 llama-run-s1.sh[747348]: main: binding port …ly
Aug 12 04:39:18 danielgonzagatj1 llama-run-s1.sh[747348]: main: HTTP server i…47
Aug 12 04:39:18 danielgonzagatj1 llama-run-s1.sh[747348]: main: loading model
Aug 12 04:39:18 danielgonzagatj1 llama-run-s1.sh[747348]: srv    load_model: …f'
Hint: Some lines were ellipsized, use -l to show in full.
root@danielgonzagatj1:~# # Backend health
curl -s http://127.0.0.1:8090/v1/models | jq .data[0].id
curl -s http://127.0.0.1:8091/v1/models | jq .data[0].id

# Through nginx
curl -s http://127.0.0.1:8080/v1/models | jq .data[0].id

# Chat smoke test
curl http://127.0.0.1:8080/v1/chat/completions \
  -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
  -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Diga oi em uma linha."}],"max_tokens":30}'
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
curl: (7) Failed to connect to 127.0.0.1 port 8080 after 0 ms: Connection refused
root@danielgonzagatj1:~# ps aux | egrep 'apt|dpkg'       # if something is mid-run, let it finish
# only if truly wedged:
rm -f /var/lib/dpkg/lock-frontend /var/cache/apt/archives/lock
dpkg --configure -a
apt-get update
root      738993  0.0  0.0   7508  4164 pts/3    S+   04:20   0:00 bash -lc set -euo pipefail apt-get update -y >/dev/null apt-get install -y numactl >/dev/null  # sem isso, o exec numactl dá 127  # Descobrir onde está o llama-server de verdade LLAMA_BIN="$(command -v llama-server || true)" test -x "$LLAMA_BIN" || {   # tente caminhos comuns   for P in /root/llama.cpp/build/bin/llama-server /usr/local/bin/llama-server /usr/bin/llama-server; do     if [ -x "$P" ]; then LLAMA_BIN="$P"; break; fi   done } if [ -z "$LLAMA_BIN" ]; then   echo "ERRO: não achei o binário llama-server. Onde ele foi instalado?"   echo "Sugestão: find / -type f -name llama-server 2>/dev/null | head -n 3"   exit 1 fi echo "OK: usando LLAMA_BIN=$LLAMA_BIN"  MODEL="/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf" test -f "$MODEL" || { echo "ERRO: Modelo não encontrado em $MODEL"; exit 1; }  install -d /usr/local/bin  # Recria scripts com fallback (roda sem numactl se não existir) cat >/usr/local/bin/llama-run-s0.sh <<SH #!/usr/bin/env bash set -euo pipefail MODEL="$MODEL"; THREADS="24"; CTX="8192"; PORT="8090"; API_KEY="DANIEL" ulimit -n 65535 || true if command -v numactl >/dev/null 2>&1; then   exec numactl --cpunodebind=0 --membind=0 \\     "$LLAMA_BIN" -m "\$MODEL" -t "\$THREADS" -c "\$CTX" --numa \\     --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY" else   exec "$LLAMA_BIN" -m "\$MODEL" -t "\$THREADS" -c "\$CTX" \\     --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY" fi SH chmod +x /usr/local/bin/llama-run-s0.sh  cat >/usr/local/bin/llama-run-s1.sh <<SH #!/usr/bin/env bash set -euo pipefail MODEL="$MODEL"; THREADS="24"; CTX="8192"; PORT="8091"; API_KEY="DANIEL" ulimit -n 65535 || true if command -v numactl >/dev/null 2>&1; then   exec numactl --cpunodebind=1 --membind=1 \\     "$LLAMA_BIN" -m "\$MODEL" -t "\$THREADS" -c "\$CTX" --numa \\     --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY" else   exec "$LLAMA_BIN" -m "\$MODEL" -t "\$THREADS" -c "\$CTX" \\     --host 127.0.0.1 --port "\$PORT" --api-key "\$API_KEY" fi SH chmod +x /usr/local/bin/llama-run-s1.sh  systemctl daemon-reload systemctl restart llama-s0 llama-s1 sleep 2 systemctl status llama-s0 llama-s1 --no-pager -n 5 
root      739320  0.0  0.0 100144 91416 pts/3    S+   04:20   0:00 apt-get install -y numactl
root      739421  0.0  0.0 100144 25512 pts/3    S+   04:20   0:00 apt-get install -y numactl
root      739429  0.0  0.0   2892   992 pts/3    S+   04:20   0:00 sh -c test -x /usr/lib/needrestart/apt-pinvoke && /usr/lib/needrestart/apt-pinvoke || true
root      747601  0.0  0.0   6612  2184 pts/4    S+   04:39   0:00 grep -E --color=auto apt|dpkg
Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://archive.ubuntu.com/ubuntu jammy-security InRelease
Reading package lists... Done
root@danielgonzagatj1:~# cat >/etc/nginx/sites-available/llama_api <<'NGX'
upstream llama_backends {
    least_conn;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}

server {
    listen 8080;

    # (optional) larger prompts
    client_max_body_size 5m;

    location / {
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;

        proxy_read_timeout 300;
        proxy_send_timeout 300;
        proxy_next_upstream error timeout http_502 http_503 http_504;

nginx -t && systemctl restart nginxllama_api /etc/nginx/sites-enabled/llama_api
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# # add this once to /etc/nginx/nginx.conf inside the 'http { }' block:
# log_format with upstream info
# (run: nano /etc/nginx/nginx.conf or use sed if you prefer)

log_format main '$remote_addr - $remote_user [$time_local] '
                '"$request" $status $body_bytes_sent '
                '"$http_referer" "$http_user_agent" '
                'upstream=$upstream_addr rt=$request_time urt=$upstream_response_time';

access_log /var/log/nginx/access.log main;

nginx -t && systemctl reload nginx
Command 'log_format' not found, did you mean:
  command 'logformat' from deb eclipse-titan (8.1.1-1)
Try: apt install <deb name>
"$request" $status $body_bytes_sent : command not found
"$http_referer" "$http_user_agent" : command not found
upstream=$upstream_addr rt=$request_time urt=$upstream_response_time: command not found
access_log: command not found
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# curl -s http://127.0.0.1:8080/v1/models | jq .data[0].id
for i in {1..4}; do
  curl -s http://127.0.0.1:8080/v1/chat/completions \
    -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
    -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Ping?"}],"max_tokens":5}' >/dev/null
done
tail -n 10 /var/log/nginx/access.log
# look for 'upstream=127.0.0.1:8090' and '…8091' in the last column
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
127.0.0.1 - - [12/Aug/2025:04:34:11 +0000] "POST /v1/chat/completions HTTP/1.1" 200 575 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:35:19 +0000] "POST /v1/chat/completions HTTP/1.1" 200 628 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:36:23 +0000] "POST /v1/chat/completions HTTP/1.1" 200 575 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:38:25 +0000] "POST /v1/chat/completions HTTP/1.1" 200 577 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:40:26 +0000] "POST /v1/chat/completions HTTP/1.1" 200 588 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:40:32 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:40:33 +0000] "POST /v1/chat/completions HTTP/1.1" 200 582 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:40:34 +0000] "POST /v1/chat/completions HTTP/1.1" 200 570 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:40:35 +0000] "POST /v1/chat/completions HTTP/1.1" 200 570 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:40:36 +0000] "POST /v1/chat/completions HTTP/1.1" 200 577 "-" "curl/7.81.0"
root@danielgonzagatj1:~# # s0 on node0
sed -i 's/THREADS="$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s0.sh
# s1 on node1
sed -i 's/THREADS="$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s1.sh
systemctl restart llama-s0 llama-s1
root@danielgonzagatj1:~# dpkg --configure -a
apt-get update
Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://archive.ubuntu.com/ubuntu jammy-security InRelease
Reading package lists... Done
root@danielgonzagatj1:~# # Remova configs duplicadas antigas (se existirem)
rm -f /etc/nginx/sites-enabled/llama-balancer \
      /etc/nginx/sites-available/llama-balancer \
      /etc/nginx/conf.d/llama_api.conf

# (Re)crie o site oficial
cat >/etc/nginx/sites-available/llama_api <<'NGX'
upstream llama_backends {
    least_conn;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}

server {
    listen 8080;

    # para prompts maiores
    client_max_body_size 10m;

    location / {
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
nginx -t && systemctl reload nginxllama_api /etc/nginx/sites-enabled/llama_api
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# curl -i http://127.0.0.1:8080/v1/models | head -n 20   # deve vir 200 e header X-Upstream
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   699  100   699    0     0   784k      0 --:--:-- --:--:-- --:--:--  682k
HTTP/1.1 200 OK
Server: nginx/1.18.0 (Ubuntu)
Date: Tue, 12 Aug 2025 04:42:40 GMT
Content-Type: application/json; charset=utf-8
Content-Length: 699
Connection: keep-alive
Access-Control-Allow-Origin: 
X-Upstream: 127.0.0.1:8090

{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754973760,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}root@danielgonzagatj1:~# sudo sed -i 's/THREADsudo sed -i 's/THREADS="\$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s0.sh
sudo sed -i 's/THREADS="\$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s1.sh 

systemctl restart llama-s0 llama-s1
systemctl --no-pager -n 20 status llama-s0 llama-s1
● llama-s0.service - llama.cpp s0 (NUMA0)
     Loaded: loaded (/etc/systemd/system/llama-s0.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:42:46 UTC; 29ms ago
   Main PID: 748840 (llama-server)
      Tasks: 24 (limit: 462380)
     Memory: 7.2M
        CPU: 286ms
     CGroup: /system.slice/llama-s0.service
             └─748840 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:42:46 danielgonzagatj1 systemd[1]: Started llama.cpp s0 (NUMA0).

● llama-s1.service - llama.cpp s1 (NUMA1)
     Loaded: loaded (/etc/systemd/system/llama-s1.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:42:46 UTC; 75ms ago
   Main PID: 748816 (llama-server)
      Tasks: 73 (limit: 462380)
     Memory: 17.0M
        CPU: 1.367s
     CGroup: /system.slice/llama-s1.service
             └─748816 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:42:46 danielgonzagatj1 systemd[1]: Started llama.cpp s1 (NUMA1).
Aug 12 04:42:46 danielgonzagatj1 llama-run-s1.sh[748816]: build: 6134 (be4852…nu
Aug 12 04:42:46 danielgonzagatj1 llama-run-s1.sh[748816]: system info: n_thre…48
Aug 12 04:42:46 danielgonzagatj1 llama-run-s1.sh[748816]: system_info: n_thre… |
Aug 12 04:42:46 danielgonzagatj1 llama-run-s1.sh[748816]: main: binding port …ly
Aug 12 04:42:46 danielgonzagatj1 llama-run-s1.sh[748816]: main: HTTP server i…47
Aug 12 04:42:46 danielgonzagatj1 llama-run-s1.sh[748816]: main: loading model
Aug 12 04:42:46 danielgonzagatj1 llama-run-s1.sh[748816]: srv    load_model: …f'
Hint: Some lines were ellipsized, use -l to show in full.
root@danielgonzagatj1:~# curl -s http://127.0.0.1:8090/v1/models | jq '.data[0].id'
curl -s http://127.0.0.1:8091/v1/models | jq '.data[0].id'
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
root@danielgonzagatj1:~# curl http://127.0.0.1:8080/v1/chat/completions \
  -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
  -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Escreva um haicai sobre café."}],"max_tokens":60}' -i

# Rode 5–10 vezes; o header X-Upstream deve alternar entre 127.0.0.1:8090 e :8091
HTTP/1.1 200 OK
Server: nginx/1.18.0 (Ubuntu)
Date: Tue, 12 Aug 2025 04:43:05 GMT
Content-Type: application/json; charset=utf-8
Content-Length: 639
Connection: keep-alive
Access-Control-Allow-Origin: 
X-Upstream: 127.0.0.1:8091

{"choices":[{"finish_reason":"stop","index":0,"message":{"role":"assistant","content":"Café se derrama,\n aromas acordam sonhos,\n dia começa bem."}}],"created":1754973785,"model":"qwen2.5-7b-instruct","system_fingerprint":"b6134-be48528b","object":"chat.completion","usage":{"completion_tokens":21,"prompt_tokens":18,"total_tokens":39},"id":"chatcmpl-p5JAWubEh6GFXQJOOnQ5PSmukwlCaCqz","timings":{"prompt_n":18,"prompt_ms":801.934,"prompt_per_token_ms":44.55188888888889,"prompt_per_second":22.445737429763547,"predicted_n":21,"predicted_ms":2262.843,"predicted_per_token_ms":107.75442857142856,"predicted_per_second":9.280361032559485}}root@danielgonzagatj1:~# # l# logs do Nginx
tail -f /var/log/nginx/access.log /var/log/nginx/error.log

# ver trocas de backend nos headers (X-Upstream)
for i in {1..6}; do
  curl -s -D - http://127.0.0.1:8080/v1/models -o /dev/null | grep X-Upstream
done

# logs dos serviços
journalctl -u llama-s0 -u llama-s1 -n 80 --no-pager
==> /var/log/nginx/access.log <==
127.0.0.1 - - [12/Aug/2025:04:40:26 +0000] "POST /v1/chat/completions HTTP/1.1" 200 588 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:40:32 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:40:33 +0000] "POST /v1/chat/completions HTTP/1.1" 200 582 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:40:34 +0000] "POST /v1/chat/completions HTTP/1.1" 200 570 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:40:35 +0000] "POST /v1/chat/completions HTTP/1.1" 200 570 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:40:36 +0000] "POST /v1/chat/completions HTTP/1.1" 200 577 "-" "curl/7.81.0"
187.62.85.87 - - [12/Aug/2025:04:41:06 +0000] "POST /v1/chat/completions HTTP/1.1" 200 636 "-" "curl/8.7.1"
127.0.0.1 - - [12/Aug/2025:04:42:30 +0000] "POST /v1/chat/completions HTTP/1.1" 200 588 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:42:40 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:43:05 +0000] "POST /v1/chat/completions HTTP/1.1" 200 639 "-" "curl/7.81.0"

==> /var/log/nginx/error.log <==
2025/08/12 04:22:56 [error] 741594#741594: *41 no live upstreams while connecting to upstream, client: 127.0.0.1, server: , request: "POST /v1/chat/completions HTTP/1.1", upstream: "http://llama_backends/v1/chat/completions", host: "127.0.0.1:8080"
2025/08/12 04:22:56 [error] 741594#741594: *42 no live upstreams while connecting to upstream, client: 127.0.0.1, server: , request: "POST /v1/chat/completions HTTP/1.1", upstream: "http://llama_backends/v1/chat/completions", host: "127.0.0.1:8080"
2025/08/12 04:24:05 [error] 741594#741594: *43 connect() failed (111: Unknown error) while connecting to upstream, client: 127.0.0.1, server: , request: "POST /v1/chat/completions HTTP/1.1", upstream: "http://127.0.0.1:8091/v1/chat/completions", host: "127.0.0.1:8080"
2025/08/12 04:24:05 [error] 741594#741594: *43 connect() failed (111: Unknown error) while connecting to upstream, client: 127.0.0.1, server: , request: "POST /v1/chat/completions HTTP/1.1", upstream: "http://127.0.0.1:8090/v1/chat/completions", host: "127.0.0.1:8080"
2025/08/12 04:24:25 [error] 743156#743156: *1 connect() failed (111: Unknown error) while connecting to upstream, client: 127.0.0.1, server: , request: "GET /v1/models HTTP/1.1", upstream: "http://127.0.0.1:8090/v1/models", host: "127.0.0.1:8080"
2025/08/12 04:24:25 [error] 743156#743156: *1 connect() failed (111: Unknown error) while connecting to upstream, client: 127.0.0.1, server: , request: "GET /v1/models HTTP/1.1", upstream: "http://127.0.0.1:8091/v1/models", host: "127.0.0.1:8080"
2025/08/12 04:28:03 [emerg] 745210#745210: duplicate upstream "llama_backends" in /etc/nginx/sites-enabled/llama_api:1
2025/08/12 04:38:50 [notice] 746860#746860: signal process started
2025/08/12 04:40:26 [notice] 748112#748112: signal process started
2025/08/12 04:42:33 [notice] 748757#748757: signal process started
^C
X-Upstream: 127.0.0.1:8090
X-Upstream: 127.0.0.1:8091
X-Upstream: 127.0.0.1:8090
X-Upstream: 127.0.0.1:8091
X-Upstream: 127.0.0.1:8090
X-Upstream: 127.0.0.1:8091
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {{- "\n\n# Tools\n\nYou may call one or more functions to assist with the user query.\n\nYou are provided with function signatures within <tools></tools> XML tags:\n<tools>" }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {%- for tool in tools %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {{- "\n" }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {{- tool | tojson }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {%- endfor %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {{- "\n</tools>\n\nFor each function call, return a json object with function name and arguments within <tool_call></tool_call> XML tags:\n<tool_call>\n{\"name\": <function-name>, \"arguments\": <args-json-object>}\n</tool_call><|im_end|>\n" }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: {%- else %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {%- if messages[0]['role'] == 'system' %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {{- '<|im_start|>system\n' + messages[0]['content'] + '<|im_end|>\n' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {%- else %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {{- '<|im_start|>system\nYou are Qwen, created by Alibaba Cloud. You are a helpful assistant.<|im_end|>\n' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {%- endif %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: {%- endif %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: {%- for message in messages %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {%- if (message.role == "user") or (message.role == "system" and not loop.first) or (message.role == "assistant" and not message.tool_calls) %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {{- '<|im_start|>' + message.role + '\n' + message.content + '<|im_end|>' + '\n' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {%- elif message.role == "assistant" %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {{- '<|im_start|>' + message.role }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {%- if message.content %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:             {{- '\n' + message.content }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {%- endif %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {%- for tool_call in message.tool_calls %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:             {%- if tool_call.function is defined %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:                 {%- set tool_call = tool_call.function %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:             {%- endif %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:             {{- '\n<tool_call>\n{"name": "' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:             {{- tool_call.name }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:             {{- '", "arguments": ' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:             {{- tool_call.arguments | tojson }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:             {{- '}\n</tool_call>' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {%- endfor %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {{- '<|im_end|>\n' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {%- elif message.role == "tool" %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {%- if (loop.index0 == 0) or (messages[loop.index0 - 1].role != "tool") %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:             {{- '<|im_start|>user' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {%- endif %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {{- '\n<tool_response>\n' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {{- message.content }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {{- '\n</tool_response>' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {%- if loop.last or (messages[loop.index0 + 1].role != "tool") %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:             {{- '<|im_end|>\n' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:         {%- endif %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {%- endif %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: {%- endfor %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: {%- if add_generation_prompt %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]:     {{- '<|im_start|>assistant\n' }}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: {%- endif %}
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: , example_format: '<|im_start|>system
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: You are a helpful assistant<|im_end|>
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: <|im_start|>user
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: Hello<|im_end|>
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: <|im_start|>assistant
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: Hi there<|im_end|>
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: <|im_start|>user
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: How are you?<|im_end|>
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: <|im_start|>assistant
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: '
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: main: server is listening on http://127.0.0.1:8090 - starting the main loop
Aug 12 04:42:47 danielgonzagatj1 llama-run-s0.sh[748840]: srv  update_slots: all slots are idle
Aug 12 04:42:56 danielgonzagatj1 llama-run-s0.sh[748840]: srv  log_server_r: request: GET /v1/models 127.0.0.1 200
Aug 12 04:42:56 danielgonzagatj1 llama-run-s1.sh[748816]: srv  log_server_r: request: GET /v1/models 127.0.0.1 200
Aug 12 04:43:02 danielgonzagatj1 llama-run-s1.sh[748816]: srv  params_from_: Chat format: Content-only
Aug 12 04:43:02 danielgonzagatj1 llama-run-s1.sh[748816]: slot launch_slot_: id  0 | task 0 | processing task
Aug 12 04:43:02 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: id  0 | task 0 | new prompt, n_ctx_slot = 8192, n_keep = 0, n_prompt_tokens = 18
Aug 12 04:43:02 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: id  0 | task 0 | kv cache rm [0, end)
Aug 12 04:43:02 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: id  0 | task 0 | prompt processing progress, n_past = 18, n_tokens = 18, progress = 1.000000
Aug 12 04:43:02 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: id  0 | task 0 | prompt done, n_past = 18, n_tokens = 18
Aug 12 04:43:05 danielgonzagatj1 llama-run-s1.sh[748816]: slot      release: id  0 | task 0 | stop processing: n_past = 38, truncated = 0
Aug 12 04:43:05 danielgonzagatj1 llama-run-s1.sh[748816]: slot print_timing: id  0 | task 0 |
Aug 12 04:43:05 danielgonzagatj1 llama-run-s1.sh[748816]: prompt eval time =     801.93 ms /    18 tokens (   44.55 ms per token,    22.45 tokens per second)
Aug 12 04:43:05 danielgonzagatj1 llama-run-s1.sh[748816]:        eval time =    2262.84 ms /    21 tokens (  107.75 ms per token,     9.28 tokens per second)
Aug 12 04:43:05 danielgonzagatj1 llama-run-s1.sh[748816]:       total time =    3064.78 ms /    39 tokens
Aug 12 04:43:05 danielgonzagatj1 llama-run-s1.sh[748816]: srv  log_server_r: request: POST /v1/chat/completions 127.0.0.1 200
Aug 12 04:43:05 danielgonzagatj1 llama-run-s1.sh[748816]: srv  update_slots: all slots are idle
Aug 12 04:43:27 danielgonzagatj1 llama-run-s0.sh[748840]: srv  log_server_r: request: GET /v1/models 127.0.0.1 200
Aug 12 04:43:27 danielgonzagatj1 llama-run-s1.sh[748816]: srv  log_server_r: request: GET /v1/models 127.0.0.1 200
Aug 12 04:43:27 danielgonzagatj1 llama-run-s0.sh[748840]: srv  log_server_r: request: GET /v1/models 127.0.0.1 200
Aug 12 04:43:27 danielgonzagatj1 llama-run-s1.sh[748816]: srv  log_server_r: request: GET /v1/models 127.0.0.1 200
Aug 12 04:43:27 danielgonzagatj1 llama-run-s0.sh[748840]: srv  log_server_r: request: GET /v1/models 127.0.0.1 200
Aug 12 04:43:27 danielgonzagatj1 llama-run-s1.sh[748816]: srv  log_server_r: request: GET /v1/models 127.0.0.1 200
root@danielgonzagatj1:~# systemctl is-enabled et-autoevolve.timer || echo "timer off"
systemctl is-active  et-autoevolve.timer || echo "inactive"
disabled
timer off
inactive
inactive
root@danielgonzagatj1:~# # apagar qualquer resto conflitando
rm -f /etc/nginx/sites-enabled/llama-balancer \
      /etc/nginx/sites-available/llama-balancer \
      /etc/nginx/conf.d/llama_api.conf || true

# escrever o site correto
cat >/etc/nginx/sites-available/llama_api <<'NGX'
upstream llama_backends {
    least_conn;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}

server {
    listen 8080;
    client_max_body_size 5m;

    location / {
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_read_timeout 300;
nginx -t && systemctl reload nginxllama_api /etc/nginx/sites-enabled/llama_api
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# # backends diretos
curl -s http://127.0.0.1:8090/v1/models | head
curl -s http://127.0.0.1:8091/v1/models | head

# balanceador
curl -s http://127.0.0.1:8080/v1/models | head

# teste de chat (passa pelo nginx, exige a API key do llama-server)
curl http://127.0.0.1:8080/v1/chat/completions \
  -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
  -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Escreva um haicai sobre café."}],"max_tokens":60}'
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754974008,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754974008,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754974008,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}{"choices":[{"finish_reason":"stop","index":0,"message":{"role":"assistant","content":"Café se derrama,\n aromas acordam sonhos,\n dia renasce."}}],"created":1754974012,"model":"qwen2.5-7b-instruct","system_fingerprint":"b6134-be48528b","object":"chat.completion","usage":{"completion_tokens":22,"prompt_tokens":18,"total_tokens":40},"id":"chatcmpl-1sS7YFRbsdUfajq25bmMkT8kJzNO2hQS","timings":{"prompt_n":15,"prompt_ms":672.106,"prompt_per_token_ms":44.807066666666664,"prompt_per_second":22.31790818710144,"predicted_n":22,"predicted_ms":2972.591,"predicted_per_token_ms":135.11777272727272,"predicted_per_second":7.400950887626317}}root@danielgon# backends diretosnds diretos
curl -s http://127.0.0.1:8090/v1/models | head
curl -s http://127.0.0.1:8091/v1/models | head

# balanceador
curl -s http://127.0.0.1:8080/v1/models | head

# teste de chat (passa pelo nginx, exige a API key do llama-server)
curl http://127.0.0.1:8080/v1/chat/completions \
  -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
  -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Escreva um haicai sobre café."}],"max_tokens":60}'
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754974015,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754974015,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754974015,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}{"choices":[{"finish_reason":"stop","index":0,"message":{"role":"assistant","content":"Café se derrama,\n aromas acordam sonhos,\n dia novo brota."}}],"created":1754974019,"model":"qwen2.5-7b-instruct","system_fingerprint":"b6134-be48528b","object":"chat.completion","usage":{"completion_tokens":22,"prompt_tokens":18,"total_tokens":40},"id":"chatcmpl-Y2YEvmhug58ZSRZLxl2XiEhyNisy1jX1","timings":{"prompt_n":1,"prompt_ms":113.942,"prompt_per_token_ms":113.942,"prompt_per_second":8.77639500798652,"predicted_n":22,"predicted_ms":3011.91,"predicted_per_token_ms":136.905,"predicted_per_second":7.304335122895439}}root@danielgonzagatj1:~# # em um ter# em um terminal:
journalctl -fu llama-s0 -u llama-s1

# noutro, mande 6 requisições:
for i in {1..6}; do
  curl -s http://127.0.0.1:8080/v1/models >/dev/null
done
Aug 12 04:46:55 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: id  0 | task 52 | kv cache rm [17, end)
Aug 12 04:46:55 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: id  0 | task 52 | prompt processing progress, n_past = 18, n_tokens = 1, progress = 0.055556
Aug 12 04:46:55 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: id  0 | task 52 | prompt done, n_past = 18, n_tokens = 1
Aug 12 04:46:59 danielgonzagatj1 llama-run-s1.sh[748816]: slot      release: id  0 | task 52 | stop processing: n_past = 39, truncated = 0
Aug 12 04:46:59 danielgonzagatj1 llama-run-s1.sh[748816]: slot print_timing: id  0 | task 52 |
Aug 12 04:46:59 danielgonzagatj1 llama-run-s1.sh[748816]: prompt eval time =     113.94 ms /     1 tokens (  113.94 ms per token,     8.78 tokens per second)
Aug 12 04:46:59 danielgonzagatj1 llama-run-s1.sh[748816]:        eval time =    3011.91 ms /    22 tokens (  136.91 ms per token,     7.30 tokens per second)
Aug 12 04:46:59 danielgonzagatj1 llama-run-s1.sh[748816]:       total time =    3125.85 ms /    23 tokens
Aug 12 04:46:59 danielgonzagatj1 llama-run-s1.sh[748816]: srv  log_server_r: request: POST /v1/chat/completions 127.0.0.1 200
Aug 12 04:46:59 danielgonzagatj1 llama-run-s1.sh[748816]: srv  update_slots: all slots are idle
^C
root@danielgonzagatj1:~# systemctl disable --now et-autoevolve.timer
systemctl stop et-autoevolve.service
systemctl list-timers | grep -i autoevolve || echo "timer off"
timer off
root@danielgonzagatj1:~# set -euo pipefail

# Remova qualquer duplicata antiga
rm -f /etc/nginx/conf.d/llama_api.conf \
      /etc/nginx/sites-enabled/llama-balancer \
      /etc/nginx/sites-available/llama-balancer || true

# Escreva um único site "llama_api"
cat >/etc/nginx/sites-available/llama_api <<'NGX'
upstream llama_backends {
    least_conn;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}

server {
    listen 8080;
    # se quiser expor só local: use "listen 127.0.0.1:8080;" e faça o nginx público em outra porta/host

    client_max_body_size 5m;

    location / {
nginx -t && systemctl restart nginxllama_api /etc/nginx/sites-enabled/llama_api
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# # Backends
curl -s http://127.0.0.1:8090/v1/models | head -c 200; echo
curl -s http://127.0.0.1:8091/v1/models | head -c 200; echo

# Balanceador
curl -s http://127.0.0.1:8080/v1/models | head -c 200; echo

# 5 chamadas pra ver alternância/saúde
for i in {1..5}; do
  curl -s http://127.0.0.1:8080/v1/chat/completions \
    -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
    -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Ping?"}],"max_tokens":5}' \
    | jq -r '.choices[0].message.role' ; done

# Acompanhar logs do Nginx
tail -f /var/log/nginx/access.log /var/log/nginx/error.log
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","d
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","d
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","d
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
Connection to 92.38.150.138 closed.
danielpenin@Daniels-iMac ~ % ssh root@92.38.150.138                            
Enter passphrase for key '/Users/danielpenin/.ssh/id_ed25519': 
Enter passphrase for key '/Users/danielpenin/.ssh/id_ed25519': 
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-151-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Aug 12 04:49:56 AM UTC 2025

  System load:  0.21             Temperature:           58.0 C
  Usage of /:   7.0% of 3.43TB   Processes:             581
  Memory usage: 2%               Users logged in:       1
  Swap usage:   0%               IPv4 address for eno1: 92.38.150.138


1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.


Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

1 additional security update can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm



1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.

Last login: Tue Aug 12 04:22:02 2025 from 187.62.85.87
root@danielgonzagatj1:~# # Backends
curl -s http://127.0.0.1:8090/v1/models | head -c 200; echo
curl -s http://127.0.0.1:8091/v1/models | head -c 200; echo

# Balanceador
curl -s http://127.0.0.1:8080/v1/models | head -c 200; echo

# 5 chamadas pra ver alternância/saúde
for i in {1..5}; do
  curl -s http://127.0.0.1:8080/v1/chat/completions \
    -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
    -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Ping?"}],"max_tokens":5}' \
    | jq -r '.choices[0].message.role' ; done

# Acompanhar logs do Nginx
tail -f /var/log/nginx/access.log /var/log/nginx/error.log
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","d
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","d
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","d
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
==> /var/log/nginx/access.log <==
127.0.0.1 - - [12/Aug/2025:04:47:15 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:48:50 +0000] "POST /v1/chat/completions HTTP/1.1" 200 565 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:49:17 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:49:18 +0000] "POST /v1/chat/completions HTTP/1.1" 200 579 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:50:04 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:50:04 +0000] "POST /v1/chat/completions HTTP/1.1" 200 570 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:50:06 +0000] "POST /v1/chat/completions HTTP/1.1" 200 589 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:50:06 +0000] "POST /v1/chat/completions HTTP/1.1" 200 580 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:50:07 +0000] "POST /v1/chat/completions HTTP/1.1" 200 567 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:50:08 +0000] "POST /v1/chat/completions HTTP/1.1" 200 568 "-" "curl/7.81.0"

==> /var/log/nginx/error.log <==
2025/08/12 04:22:56 [error] 741594#741594: *42 no live upstreams while connecting to upstream, client: 127.0.0.1, server: , request: "POST /v1/chat/completions HTTP/1.1", upstream: "http://llama_backends/v1/chat/completions", host: "127.0.0.1:8080"
2025/08/12 04:24:05 [error] 741594#741594: *43 connect() failed (111: Unknown error) while connecting to upstream, client: 127.0.0.1, server: , request: "POST /v1/chat/completions HTTP/1.1", upstream: "http://127.0.0.1:8091/v1/chat/completions", host: "127.0.0.1:8080"
2025/08/12 04:24:05 [error] 741594#741594: *43 connect() failed (111: Unknown error) while connecting to upstream, client: 127.0.0.1, server: , request: "POST /v1/chat/completions HTTP/1.1", upstream: "http://127.0.0.1:8090/v1/chat/completions", host: "127.0.0.1:8080"
2025/08/12 04:24:25 [error] 743156#743156: *1 connect() failed (111: Unknown error) while connecting to upstream, client: 127.0.0.1, server: , request: "GET /v1/models HTTP/1.1", upstream: "http://127.0.0.1:8090/v1/models", host: "127.0.0.1:8080"
2025/08/12 04:24:25 [error] 743156#743156: *1 connect() failed (111: Unknown error) while connecting to upstream, client: 127.0.0.1, server: , request: "GET /v1/models HTTP/1.1", upstream: "http://127.0.0.1:8091/v1/models", host: "127.0.0.1:8080"
2025/08/12 04:28:03 [emerg] 745210#745210: duplicate upstream "llama_backends" in /etc/nginx/sites-enabled/llama_api:1
2025/08/12 04:38:50 [notice] 746860#746860: signal process started
2025/08/12 04:40:26 [notice] 748112#748112: signal process started
2025/08/12 04:42:33 [notice] 748757#748757: signal process started
2025/08/12 04:46:43 [notice] 749079#749079: signal process started
^C
root@danielgonzagatj1:~# systemctl status llama-s0 llama-s1 --no-pager -n 20
ps -o pid,cmd,psr -p $(pidof llama-server)
numactl -H | head -n 20
● llama-s0.service - llama.cpp s0 (NUMA0)
     Loaded: loaded (/etc/systemd/system/llama-s0.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:42:46 UTC; 7min ago
   Main PID: 748840 (llama-server)
      Tasks: 96 (limit: 462380)
     Memory: 524.0M
        CPU: 1min 54.861s
     CGroup: /system.slice/llama-s0.service
             └─748840 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: slot print_timing: … |
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: prompt eval time = …d)
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]:        eval time = …d)
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]:       total time = …ns
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: srv  log_server_r: …00
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: srv  update_slots: …le
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: srv  params_from_: …ly
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: slot launch_slot_: …sk
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: slot update_slots: …10
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: slot update_slots: …10
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: slot update_slots: …d)
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: slot update_slots: …00
Aug 12 04:50:06 danielgonzagatj1 llama-run-s0.sh[748840]: slot update_slots: … 1
Aug 12 04:50:07 danielgonzagatj1 llama-run-s0.sh[748840]: slot      release: … 0
Aug 12 04:50:07 danielgonzagatj1 llama-run-s0.sh[748840]: slot print_timing: … |
Aug 12 04:50:07 danielgonzagatj1 llama-run-s0.sh[748840]: prompt eval time = …d)
Aug 12 04:50:07 danielgonzagatj1 llama-run-s0.sh[748840]:        eval time = …d)
Aug 12 04:50:07 danielgonzagatj1 llama-run-s0.sh[748840]:       total time = …ns
Aug 12 04:50:07 danielgonzagatj1 llama-run-s0.sh[748840]: srv  log_server_r: …00
Aug 12 04:50:07 danielgonzagatj1 llama-run-s0.sh[748840]: srv  update_slots: …le

● llama-s1.service - llama.cpp s1 (NUMA1)
     Loaded: loaded (/etc/systemd/system/llama-s1.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:42:46 UTC; 7min ago
   Main PID: 748816 (llama-server)
      Tasks: 96 (limit: 462380)
     Memory: 526.5M
        CPU: 5min 41.638s
     CGroup: /system.slice/llama-s1.service
             └─748816 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:50:06 danielgonzagatj1 llama-run-s1.sh[748816]: slot print_timing: … |
Aug 12 04:50:06 danielgonzagatj1 llama-run-s1.sh[748816]: prompt eval time = …d)
Aug 12 04:50:06 danielgonzagatj1 llama-run-s1.sh[748816]:        eval time = …d)
Aug 12 04:50:06 danielgonzagatj1 llama-run-s1.sh[748816]:       total time = …ns
Aug 12 04:50:06 danielgonzagatj1 llama-run-s1.sh[748816]: srv  log_server_r: …00
Aug 12 04:50:06 danielgonzagatj1 llama-run-s1.sh[748816]: srv  update_slots: …le
Aug 12 04:50:07 danielgonzagatj1 llama-run-s1.sh[748816]: srv  params_from_: …ly
Aug 12 04:50:07 danielgonzagatj1 llama-run-s1.sh[748816]: slot launch_slot_: …sk
Aug 12 04:50:07 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: …10
Aug 12 04:50:07 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: …10
Aug 12 04:50:07 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: …d)
Aug 12 04:50:07 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: …00
Aug 12 04:50:07 danielgonzagatj1 llama-run-s1.sh[748816]: slot update_slots: … 1
Aug 12 04:50:08 danielgonzagatj1 llama-run-s1.sh[748816]: slot      release: … 0
Aug 12 04:50:08 danielgonzagatj1 llama-run-s1.sh[748816]: slot print_timing: … |
Aug 12 04:50:08 danielgonzagatj1 llama-run-s1.sh[748816]: prompt eval time = …d)
Aug 12 04:50:08 danielgonzagatj1 llama-run-s1.sh[748816]:        eval time = …d)
Aug 12 04:50:08 danielgonzagatj1 llama-run-s1.sh[748816]:       total time = …ns
Aug 12 04:50:08 danielgonzagatj1 llama-run-s1.sh[748816]: srv  log_server_r: …00
Aug 12 04:50:08 danielgonzagatj1 llama-run-s1.sh[748816]: srv  update_slots: …le
Hint: Some lines were ellipsized, use -l to show in full.
    PID CMD                         PSR
 748816 /root/llama.cpp/build/bin/l  20
 748840 /root/llama.cpp/build/bin/l  43
available: 2 nodes (0-1)
node 0 cpus: 0 2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46
node 0 size: 191903 MB
node 0 free: 1326 MB
node 1 cpus: 1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47
node 1 size: 193526 MB
node 1 free: 136235 MB
node distances:
node   0   1 
  0:  10  21 
  1:  21  10 
root@danielgonzagatj1:~# systemctl disable --now et-autoevolve.timer
systemctl stop et-autoevolve.service
systemctl list-timers | grep -i autoevolve || echo "timer off"
timer off
root@danielgonzagatj1:~# sudo tee /usr/local/bin/llama-run-s0.sh >/dev/null <<'SH'
#!/usr/bin/env bash
set -euo pipefail
BIN="$(command -v llama-server || echo /root/llama.cpp/build/bin/llama-server)"
MODEL="/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf"
THREADS="24"
CTX="8192"
PORT="8090"
API_KEY="DANIEL"
ulimit -n 65535 || true
exec numactl --cpunodebind=0 --membind=0 \
  "$BIN" -m "$MODEL" -t "$THREADS" -c "$CTX" \
  --host 127.0.0.1 --port "$PORT" --api-key "$API_KEY"
SH

sudo tee /usr/local/bin/llama-run-s1.sh >/dev/null <<'SH'
#!/usr/bin/env bash
set -euo pipefail
BIN="$(command -v llama-server || echo /root/llama.cpp/build/bin/llama-server)"
MODEL="/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf"
THREADS="24"
CTX="8192"
PORT="8091"
sudo systemctl --no-pager -n 5 status llama-s0 llama-s1
● llama-s0.service - llama.cpp s0 (NUMA0)
     Loaded: loaded (/etc/systemd/system/llama-s0.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:52:51 UTC; 66ms ago
   Main PID: 749561 (llama-server)
      Tasks: 40 (limit: 462380)
     Memory: 11.7M
        CPU: 1.095s
     CGroup: /system.slice/llama-s0.service
             └─749561 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:52:51 danielgonzagatj1 systemd[1]: Started llama.cpp s0 (NUMA0).

● llama-s1.service - llama.cpp s1 (NUMA1)
     Loaded: loaded (/etc/systemd/system/llama-s1.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:52:51 UTC; 31ms ago
   Main PID: 749586 (llama-server)
      Tasks: 24 (limit: 462380)
     Memory: 7.3M
        CPU: 281ms
     CGroup: /system.slice/llama-s1.service
             └─749586 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:52:51 danielgonzagatj1 systemd[1]: Started llama.cpp s1 (NUMA1).
root@danielgonzagatj1:~# # Remover duplicatas antigas
sudo rm -f /etc/nginx/conf.d/llama_api.conf
sudo rm -f /etc/nginx/sites-enabled/llama-balancer /etc/nginx/sites-available/llama-balancer

# (Re)criar o site correto com heredoc fechado (atenção ao 'NGX')
sudo tee /etc/nginx/sites-available/llama_api >/dev/null <<'NGX'
upstream llama_backends {
    least_conn;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}

server {
    listen 8080;
    client_max_body_size 5m;

    location / {
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_read_timeout 300;
sudo nginx -t && sudo systemctl reload nginx_api /etc/nginx/sites-enabled/llama_
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# # Remover duplicatas antigas
sudo rm -f /etc/nginx/conf.d/llama_api.conf
sudo rm -f /etc/nginx/sites-enabled/llama-balancer /etc/nginx/sites-available/llama-balancer

# (Re)criar o site correto com heredoc fechado (atenção ao 'NGX')
sudo tee /etc/nginx/sites-available/llama_api >/dev/null <<'NGX'
upstream llama_backends {
    least_conn;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}

server {
    listen 8080;
    client_max_body_size 5m;

    location / {
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_read_timeout 300;
sudo nginx -t && sudo systemctl reload nginx_api /etc/nginx/sites-enabled/llama_
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# curl -s http://127.0.0.1:8090/v1/models | head
curl -s http://127.0.0.1:8091/v1/models | head
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754974427,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754974427,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}root@danielgonzagatj1:~# for i in {1..6}; do                       for i in {1..6}; do
  curl -sI http://127.0.0.1:8080/v1/models | awk '/HTTP\/|X-Upstream/';
done
HTTP/1.1 200 OK
X-Upstream: 127.0.0.1:8090
HTTP/1.1 200 OK
X-Upstream: 127.0.0.1:8091
HTTP/1.1 200 OK
X-Upstream: 127.0.0.1:8090
HTTP/1.1 200 OK
X-Upstream: 127.0.0.1:8091
HTTP/1.1 200 OK
X-Upstream: 127.0.0.1:8090
HTTP/1.1 200 OK
X-Upstream: 127.0.0.1:8091
root@danielgonzagatj1:~# systemctl status llama-s0 llama-s1 --no-pager -n 10
curl -s http://127.0.0.1:8090/v1/models | jq .data[0].id
curl -s http://127.0.0.1:8091/v1/models | jq .data[0].id
● llama-s0.service - llama.cpp s0 (NUMA0)
     Loaded: loaded (/etc/systemd/system/llama-s0.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:52:51 UTC; 5min ago
   Main PID: 749561 (llama-server)
      Tasks: 96 (limit: 462380)
     Memory: 523.6M
        CPU: 56.244s
     CGroup: /system.slice/llama-s0.service
             └─749561 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:55:12 danielgonzagatj1 llama-run-s0.sh[749561]: slot update_slots: …d)
Aug 12 04:55:12 danielgonzagatj1 llama-run-s0.sh[749561]: slot update_slots: …24
Aug 12 04:55:12 danielgonzagatj1 llama-run-s0.sh[749561]: slot update_slots: … 1
Aug 12 04:55:13 danielgonzagatj1 llama-run-s0.sh[749561]: slot      release: … 0
Aug 12 04:55:13 danielgonzagatj1 llama-run-s0.sh[749561]: slot print_timing: … |
Aug 12 04:55:13 danielgonzagatj1 llama-run-s0.sh[749561]: prompt eval time = …d)
Aug 12 04:55:13 danielgonzagatj1 llama-run-s0.sh[749561]:        eval time = …d)
Aug 12 04:55:13 danielgonzagatj1 llama-run-s0.sh[749561]:       total time = …ns
Aug 12 04:55:13 danielgonzagatj1 llama-run-s0.sh[749561]: srv  log_server_r: …00
Aug 12 04:55:13 danielgonzagatj1 llama-run-s0.sh[749561]: srv  update_slots: …le

● llama-s1.service - llama.cpp s1 (NUMA1)
     Loaded: loaded (/etc/systemd/system/llama-s1.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-08-12 04:52:51 UTC; 5min ago
   Main PID: 749586 (llama-server)
      Tasks: 96 (limit: 462380)
     Memory: 524.5M
        CPU: 45.061s
     CGroup: /system.slice/llama-s1.service
             └─749586 /root/llama.cpp/build/bin/llama-server -m /root/models/qw…

Aug 12 04:57:49 danielgonzagatj1 llama-run-s1.sh[749586]: slot update_slots: …d)
Aug 12 04:57:49 danielgonzagatj1 llama-run-s1.sh[749586]: slot update_slots: …00
Aug 12 04:57:49 danielgonzagatj1 llama-run-s1.sh[749586]: slot update_slots: …17
Aug 12 04:57:50 danielgonzagatj1 llama-run-s1.sh[749586]: slot      release: … 0
Aug 12 04:57:50 danielgonzagatj1 llama-run-s1.sh[749586]: slot print_timing: … |
Aug 12 04:57:50 danielgonzagatj1 llama-run-s1.sh[749586]: prompt eval time = …d)
Aug 12 04:57:50 danielgonzagatj1 llama-run-s1.sh[749586]:        eval time = …d)
Aug 12 04:57:50 danielgonzagatj1 llama-run-s1.sh[749586]:       total time = …ns
Aug 12 04:57:50 danielgonzagatj1 llama-run-s1.sh[749586]: srv  log_server_r: …00
Aug 12 04:57:50 danielgonzagatj1 llama-run-s1.sh[749586]: srv  update_slots: …le
Hint: Some lines were ellipsized, use -l to show in full.
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
Command 'jq' not found, but can be installed with:
snap install jq  # version 1.5+dfsg-1, or
apt  install jq  # version 1.6-2.1ubuntu3
See 'snap info jq' for additional versions.
root@danielgonzagatj1:~# systemctl restart llama-s0 llama-s1
root@danielgonzagatj1:~# sudo sed -i 's/THREADS="$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s0.sh
sudo sed -i 's/THREADS="$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s1.sh
systemctl restart llama-s0 llama-s1
root@danielgonzagatj1:~# sudo tee /etc/nginx/sites-available/llama_api >/dev/null <<'NGX'
upstream llama_backends {
    least_conn;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}

server {
    listen 8080;

    client_max_body_size 5m;

    location / {
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;

        proxy_read_timeout 300;
        proxy_send_timeout 300;
        proxy_next_upstream error timeout http_502 http_503 http_504;

NGX }   proxy_pass http://llama_backends;
root@danielgonzagatj1:~# sudo rm -f /etc/nginx/sites-enabled/llama-balancer
sudo ln -sf /etc/nginx/sites-available/llama_api /etc/nginx/sites-enabled/llama_api
sudo rm -f /etc/nginx/conf.d/llama_api.conf  # if you had created one earlier
root@danielgonzagatj1:~# sudo nginx -t && sudo systemctl restart nginx
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# curl -s http://127.0.0.1:8080/v1/models | head
curl http://127.0.0.1:8080/v1/chat/completions \
  -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
  -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Escreva um haicai sobre café."}],"max_tokens":60}'
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754974724,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}{"choices":[{"finish_reason":"stop","index":0,"message":{"role":"assistant","content":"Café aromático,\nacorda meu sono noturno,\nsol nascente dentro."}}],"created":1754974727,"model":"qwen2.5-7b-instruct","system_fingerprint":"b6134-be48528b","object":"chat.completion","usage":{"completion_tokens":20,"prompt_tokens":18,"total_tokens":38},"id":"chatcmpl-zf2yVfWrAs486lzdCzh68A6d2Yx6Hssq","timings":{"prompt_n":18,"prompt_ms":813.716,"prompt_per_token_ms":45.20644444444444,"prompt_per_second":22.12073991417153,"predicted_n":20,"predicted_ms":2808.744,"predicted_per_token_ms":140.43720000000002,"predicted_per_second":7.12062046238461}}root@danielgonzagatj1:~# sudo tail -f /var/log/sudo tail -f /var/log/nginx/access.log
# in another shell, fire 5–10 requests via :8080
127.0.0.1 - - [12/Aug/2025:04:53:51 +0000] "HEAD /v1/models HTTP/1.1" 200 0 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:53:51 +0000] "HEAD /v1/models HTTP/1.1" 200 0 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:53:51 +0000] "HEAD /v1/models HTTP/1.1" 200 0 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:53:51 +0000] "HEAD /v1/models HTTP/1.1" 200 0 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:55:13 +0000] "POST /v1/chat/completions HTTP/1.1" 200 564 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:57:50 +0000] "POST /v1/chat/completions HTTP/1.1" 200 588 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:58:44 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
187.62.85.87 - - [12/Aug/2025:04:58:47 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/8.7.1"
127.0.0.1 - - [12/Aug/2025:04:58:47 +0000] "POST /v1/chat/completions HTTP/1.1" 200 641 "-" "curl/7.81.0"
187.62.85.87 - - [12/Aug/2025:04:58:50 +0000] "POST /v1/chat/completions HTTP/1.1" 200 641 "-" "curl/8.7.1"
systemctl disable --now et-autoevolve.timer et-autoevolve.service

^C
root@danielgonzagatj1:~# systemctl disable --now et-autoevolve.timer et-autoevolve.service
root@danielgonzagatj1:~# rm -f /etc/nginx/sites-enabled/llama-balancer
rm -f /etc/nginx/sites-available/llama-balancer
rm -f /etc/nginx/conf.d/llama_api.conf
root@danielgonzagatj1:~# cat >/etc/nginx/sites-available/llama_api <<'NGX'
upstream llama_backends {cat >/etc/nginx/sites-available/llama_api <<'NGX'
upstream llama_backends {
    least_conn;0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}
server {
server {en 8080;
    listen 8080;ody_size 10m;
    client_max_body_size 10m;
    location / {
    location / {tp_version 1.1;
        proxy_http_version 1.1;tion "";
        proxy_set_header Connection "";
        proxy_set_header Host $host;-For $remote_addr;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_read_timeout 300;
        proxy_send_timeout 300;or timeout http_502 http_503 http_504;
        proxy_next_upstream error timeout http_502 http_503 http_504;
        proxy_pass http://llama_backends;
    }
}GX
NGX
root@danielgonzagatj1:~# ln -sf /etc/nginx/sites-available/llama_api /etc/nginx/sites-enabled/llama_api
nginx -t && systemctl reload nginx
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# # locais
curl -s http://127.0.0.1:8090/v1/models | head -c 120
curl -s http://127.0.0.1:8091/v1/models | head -c 120
curl -s http://127.0.0.1:8080/v1/models | head -c 120

# externo (da sua máquina):
curl http://92.38.150.138:8080/v1/models
curl http://92.38.150.138:8080/v1/chat/completions \
  -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
  -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Escreva um haicai sobre café."}],"max_tokens":60}'
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","digest":"","type":"model","description":"","tags":[""],"capabilities":["completion"],"parameters":"","details":{"parent_model":"","format":"gguf","family":"","families":[""],"parameter_size":"","quantization_level":""}}],"object":"list","data":[{"id":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","object":"model","created":1754974914,"owned_by":"llamacpp","meta":{"vocab_type":2,"n_vocab":152064,"n_ctx_train":32768,"n_embd":3584,"n_params":7615616512,"size":5438877696}}]}{"choices":[{"finish_reason":"stop","index":0,"message":{"role":"assistant","content":"Café escorre quente,\n aromas acordam os sentidos,\n dia começa novo."}}],"created":1754974918,"model":"qwen2.5-7b-instruct","system_fingerprint":"b6134-be48528b","object":"chat.completion","usage":{"completion_tokens":22,"prompt_tokens":18,"total_tokens":40},"id":"chatcmpl-yNZUFkln35OGziYCoLl86vp0GGXX7Tlt","timings":{"prompt_n":1,"prompt_ms":158.315,"prompt_per_token_ms":158.315,"prompt_per_second":6.316520860310141,"predicted_n":22,"predicted_ms":3100.827,"predicted_per_token_ms":140.94668181818182,"predicted_per_second":7.094881462267969}}root@daniel# adiciona um formato com $upstream_addr$upstream_addr
grep -q log_format /etc/nginx/nginx.conf || sed -i '/http {/a \
    log_format llapi '\''$remote_addr - $request "$status" $body_bytes_sent -> $upstream_addr'\'';' /etc/nginx/nginx.conf

# aponte o access_log para esse formato dentro do server 8080 (se quiser)
sed -i '/server {/,/}/ s|#* *access_log .*|        access_log /var/log/nginx/access.log llapi;|' /etc/nginx/sites-available/llama_api

nginx -t && systemctl reload nginx
tail -f /var/log/nginx/access.log
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
127.0.0.1 - - [12/Aug/2025:04:57:50 +0000] "POST /v1/chat/completions HTTP/1.1" 200 588 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:58:44 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
187.62.85.87 - - [12/Aug/2025:04:58:47 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/8.7.1"
127.0.0.1 - - [12/Aug/2025:04:58:47 +0000] "POST /v1/chat/completions HTTP/1.1" 200 641 "-" "curl/7.81.0"
187.62.85.87 - - [12/Aug/2025:04:58:50 +0000] "POST /v1/chat/completions HTTP/1.1" 200 641 "-" "curl/8.7.1"
127.0.0.1 - - [12/Aug/2025:04:59:50 +0000] "POST /v1/chat/completions HTTP/1.1" 200 585 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:05:01:52 +0000] "POST /v1/chat/completions HTTP/1.1" 200 574 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:05:01:54 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
92.38.150.138 - - [12/Aug/2025:05:01:54 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
92.38.150.138 - - [12/Aug/2025:05:01:58 +0000] "POST /v1/chat/completions HTTP/1.1" 200 637 "-" "curl/7.81.0"
^C
root@danielgonzagatj1:~# sed -i 's/THREADS="\(.*\)"/THREADS="24"/' /usr/local/bin/llama-run-s0.sh
sed -i 's/THREADS="\(.*\)"/THREADS="24"/' /usr/local/bin/llama-run-s1.sh
systemctl restart llama-s0 llama-s1
root@danielgonzagatj1:~# set -euo pipefail

# 1) Write a single site with one upstream
cat >/etc/nginx/sites-available/llama_api <<'NGX'
upstream llama_backends {
    least_conn;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}

server {
    listen 8080;

    # optional: larger payloads for long prompts
    client_max_body_size 5m;

    location / {
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;

        proxy_read_timeout 300;
curl -sS http://127.0.0.1:8080/v1/models | head -c 200; echos-enabled/llama_api
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","d
root@danielgonzagatj1:~# # Add a log format that includes upstream addr
awk '
/http \{/ && !x {print; print "    log_format llama \'$remote_addr - $remote_user [$time_local] \"$request\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\" upstream=$upstream_addr\';"; x=1; next}1
' /etc/nginx/nginx.conf > /tmp/nginx.conf.new && mv /tmp/nginx.conf.new /etc/nginx/nginx.conf

# Use it on the server block
sed -i 's|access_log /var/log/nginx/access\.log;|access_log /var/log/nginx/access.log llama;|' /etc/nginx/nginx.conf

nginx -t && systemctl reload nginx
> ^C
root@danielgonzagatj1:~# for i in {1..6}; do
  curl -s -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
    -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"ping"}],"max_tokens":4}' \
    http://127.0.0.1:8080/v1/chat/completions >/dev/null
done

tail -n 20 /var/log/nginx/access.log
# look for: upstream=127.0.0.1:8090 and upstream=127.0.0.1:8091 alternating
127.0.0.1 - - [12/Aug/2025:04:53:51 +0000] "HEAD /v1/models HTTP/1.1" 200 0 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:04:55:13 +0000] "POST /v1/chat/completions HTTP/1.1" 200 564 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:57:50 +0000] "POST /v1/chat/completions HTTP/1.1" 200 588 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:04:58:44 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
187.62.85.87 - - [12/Aug/2025:04:58:47 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/8.7.1"
127.0.0.1 - - [12/Aug/2025:04:58:47 +0000] "POST /v1/chat/completions HTTP/1.1" 200 641 "-" "curl/7.81.0"
187.62.85.87 - - [12/Aug/2025:04:58:50 +0000] "POST /v1/chat/completions HTTP/1.1" 200 641 "-" "curl/8.7.1"
127.0.0.1 - - [12/Aug/2025:04:59:50 +0000] "POST /v1/chat/completions HTTP/1.1" 200 585 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:05:01:52 +0000] "POST /v1/chat/completions HTTP/1.1" 200 574 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:05:01:54 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
92.38.150.138 - - [12/Aug/2025:05:01:54 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
92.38.150.138 - - [12/Aug/2025:05:01:58 +0000] "POST /v1/chat/completions HTTP/1.1" 200 637 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:06 +0000] "POST /v1/chat/completions HTTP/1.1" 200 586 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:05:04:32 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:52 +0000] "POST /v1/chat/completions HTTP/1.1" 200 569 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:53 +0000] "POST /v1/chat/completions HTTP/1.1" 200 569 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:54 +0000] "POST /v1/chat/completions HTTP/1.1" 200 557 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:54 +0000] "POST /v1/chat/completions HTTP/1.1" 200 557 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:55 +0000] "POST /v1/chat/completions HTTP/1.1" 200 557 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:55 +0000] "POST /v1/chat/completions HTTP/1.1" 200 558 "-" "curl/7.81.0"
root@danielgonzagatj1:~# cat >/etc/nginx/sites-available/llama_api <<'NGX'
upstream llama_backends {
    least_conn;
    server 127.0.0.1:8090 max_fails=3 fail_timeout=15s;
    server 127.0.0.1:8091 max_fails=3 fail_timeout=15s;
    keepalive 64;
}

server {
    listen 8080;

    client_max_body_size 5m;

    location / {
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;

        proxy_read_timeout 300;
        proxy_send_timeout 300;
        proxy_next_upstream error timeout http_502 http_503 http_504;

        proxy_pass http://llama_backends;
NGX }
root@danielgonzagatj1:~# rm -f /etc/nginx/sites-enabled/llama-balancer \
      /etc/nginx/conf.d/llama_api.conf 2>/dev/null
ln -sfn /etc/nginx/sites-available/llama_api /etc/nginx/sites-enabled/llama_api
nginx -t && systemctl reload nginx
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
root@danielgonzagatj1:~# curl -s http://127.0.0.1:8090/v1/models | head -c 200; echo
curl -s http://127.0.0.1:8091/v1/models | head -c 200; echo
curl -s http://127.0.0.1:8080/v1/models | head -c 200; echo
curl -s http://127.0.0.1:8080/v1/chat/completions \
  -H "Authorization: Bearer DANIEL" -H "Content-Type: application/json" \
  -d '{"model":"qwen2.5-7b-instruct","messages":[{"role":"user","content":"Escreva um haicai sobre café."}],"max_tokens":60}'
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","d
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","d
{"models":[{"name":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","model":"/root/models/qwen2.5-7b-instruct-gguf/Qwen2.5-7B-Instruct-Q5_K_M.gguf","modified_at":"","size":"","d
{"choices":[{"finish_reason":"stop","index":0,"message":{"role":"assistant","content":"Café se derrama,\nAroma acaricia ar,\nDia renasce nele."}}],"created":1754975257,"model":"qwen2.5-7b-instruct","system_fingerprint":"b6134-be48528b","object":"chat.completion","usage":{"completion_tokens":23,"prompt_tokens":18,"total_tokens":41},"id":"chatcmpl-GRm1EJtYyofuAqxcKn6H4vpB9siGFOU7","timings":{"prompt_n":15,"prompt_ms":694.455,"prompt_per_token_ms":46.297000000000004,"prompt_per_second":21.599671684990387,"predicted_n":23,"predicted_ms":3263.51,"predicted_per_token_ms":141.8917391304348,"predicted_per_second":7.047626635125984}}root@danielgonzagatj1:~# log_formlog_format upstreamlog '$remote_addr - $request '
                       '→ upstream=$upstream_addr status=$status rt=$request_time';
access_log /var/log/nginx/access.log upstreamlog;
Command 'log_format' not found, did you mean:
  command 'logformat' from deb eclipse-titan (8.1.1-1)
Try: apt install <deb name>
Connection to 92.38.150.138 closed.
danielpenin@Daniels-iMac ~ % ssh root@92.38.150.138
Enter passphrase for key '/Users/danielpenin/.ssh/id_ed25519': 
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-151-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Aug 12 05:08:06 AM UTC 2025

  System load:  0.08             Temperature:           59.0 C
  Usage of /:   7.0% of 3.43TB   Processes:             580
  Memory usage: 2%               Users logged in:       1
  Swap usage:   0%               IPv4 address for eno1: 92.38.150.138


1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.


Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

1 additional security update can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm



1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.

Last login: Tue Aug 12 04:49:56 2025 from 187.62.85.87
root@danielgonzagatj1:~# nginx -t && systemctl reload nginx
tail -f /var/log/nginx/access.log
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
127.0.0.1 - - [12/Aug/2025:05:04:52 +0000] "POST /v1/chat/completions HTTP/1.1" 200 569 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:53 +0000] "POST /v1/chat/completions HTTP/1.1" 200 569 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:54 +0000] "POST /v1/chat/completions HTTP/1.1" 200 557 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:54 +0000] "POST /v1/chat/completions HTTP/1.1" 200 557 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:55 +0000] "POST /v1/chat/completions HTTP/1.1" 200 557 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:04:55 +0000] "POST /v1/chat/completions HTTP/1.1" 200 558 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:06:07 +0000] "POST /v1/chat/completions HTTP/1.1" 200 586 "-" "python-requests/2.32.4"
127.0.0.1 - - [12/Aug/2025:05:07:33 +0000] "GET /v1/models HTTP/1.1" 200 699 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:07:37 +0000] "POST /v1/chat/completions HTTP/1.1" 200 633 "-" "curl/7.81.0"
127.0.0.1 - - [12/Aug/2025:05:08:07 +0000] "POST /v1/chat/completions HTTP/1.1" 200 564 "-" "python-requests/2.32.4"
^C
root@danielgonzagatj1:~# sed -i 's/THREADS="$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s0.sh
sed -i 's/THREADS="$(nproc)"/THREADS="24"/' /usr/local/bin/llama-run-s1.sh
systemctl restart llama-s0 llama-s1
root@danielgonzagatj1:~# systemctl disable --now et-autoevolve.service et-autoevolve.timer
root@danielgonzagatj1:~# Read from remote host 92.38.150.138: Connection reset by peer
Connection to 92.38.150.138 closed.
client_loop: send disconnect: Broken pipe
danielpenin@Daniels-iMac ~ % eshot
zsh: command not found: eshot
danielpenin@Daniels-iMac ~ % User=et
danielpenin@Daniels-iMac ~ % Group=et
danielpenin@Daniels-iMac ~ % WorkingDirectory=/opt/et
danielpenin@Daniels-iMac ~ % ExecStart=/opt/et/venv/bin/python /opt/et/et_autoevolve.py --config /opt/et/et_config.yaml
zsh: no such file or directory: /opt/et/et_autoevolve.py
danielpenin@Daniels-iMac ~ % U
zsh: command not found: U
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % cat >/etc/systemd/system/et-autoevolve.timer <<U
heredoc> [Unit]
heredoc> Description=Run ET★ Autoevolve ETΩ every minute
heredoc> 
heredoc> [Timer]
heredoc> OnBootSec=30
heredoc> OnUnitActiveSec=60
heredoc> Unit=et-autoevolve.service
heredoc> 
heredoc> [Install]
heredoc> WantedBy=timers.target
heredoc> U
zsh: no such file or directory: /etc/systemd/system/et-autoevolve.timer
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % systemctl daemon-reload
zsh: command not found: systemctl
danielpenin@Daniels-iMac ~ % systemctl enable --now et-autoevolve.timer
zsh: command not found: systemctl
danielpenin@Daniels-iMac ~ % systemctl list-timers | grep et-autoevolve || true
zsh: command not found: systemctl
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % echo "ETΩ ativada com rollout=20% e guardrails ativos."
ETΩ ativada com rollout=20% e guardrails ativos.
danielpenin@Daniels-iMac ~ % '
quote>  
quote> 
danielpenin@Daniels-iMac ~ % >....                                              
onfig.yaml
U

cat >/etc/systemd/system/et-autoevolve.timer <<U
[Unit]
Description=Run ET★ Autoevolve ETΩ every minute

[Timer]
OnBootSec=30
OnUnitActiveSec=60
Unit=et-autoevolve.service

[Install]
WantedBy=timers.target
U

systemctl daemon-reload
systemctl enable --now et-autoevolve.timer
systemctl list-timers | grep et-autoevolve || true

echo "ETΩ ativada com rollout=20% e guardrails ativos."
'

install: mkdir /opt/et: Permission denied
danielpenin@Daniels-iMac ~ % >....                                              
WantedBy=timers.target
EOF

systemctl daemon-reload
systemctl enable --now et-omega-monitor.timer

### 6) primeiros resultados imediatos
/opt/et/et_monitor.sh || true

echo
echo "✅ Monitoramento ETΩ habilitado."
echo "- Logs:            /var/log/et/autoevolve.log (com logrotate)"
echo "- Sumário CSV:     /var/log/et/et_omega_stats.csv"
echo "- Timer monitor:   et-omega-monitor.timer (5/5 min)"
echo "- Journal:         persistente (systemd-journald)"
echo
echo "Comandos úteis:"
echo " journalctl -u et-autoevolve.service -n 100 --no-pager"
echo " journalctl -u et-omega-monitor.service -n 50 --no-pager"
echo " tail -f /var/log/et/autoevolve.log"
echo " tail -n 30 /var/log/et/et_omega_stats.csv"
'

grep: /etc/systemd/journald.conf: No such file or directory
sed: 1: "/etc/systemd/journald.conf": unterminated substitute pattern
danielpenin@Daniels-iMac ~ % ssh root@92.38.150,138
ssh: Could not resolve hostname 92.38.150,138: nodename nor servname provided, or not known
danielpenin@Daniels-iMac ~ % ssh root@92.38.150.138
Enter passphrase for key '/Users/danielpenin/.ssh/id_ed25519': 
Enter passphrase for key '/Users/danielpenin/.ssh/id_ed25519': 
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-151-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Aug 12 05:23:36 AM UTC 2025

  System load:  0.0              Temperature:           58.0 C
  Usage of /:   7.0% of 3.43TB   Processes:             578
  Memory usage: 2%               Users logged in:       1
  Swap usage:   0%               IPv4 address for eno1: 92.38.150.138


1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.


Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

1 additional security update can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm



1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.

Last login: Tue Aug 12 05:08:07 2025 from 187.62.85.87
root@danielgonzagatj1:~# bash -lc 'set -euo pipefail

WEBROOT="/var/www/et-omega"
CSV_SRC="/var/log/et/et_omega_stats.csv"
CSV_DST="$WEBROOT/et_omega_stats.csv"

### 1) Webroot
install -d -m 755 "$WEBROOT"

### 2) HTML + JS (sem dependências externas)
cat >"$WEBROOT/index.html" <<'"HTML"'
<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ETΩ — Dashboard</title>
<style>
  :root { --bg:#0b1220; --card:#121a2b; --fg:#e6eefc; --muted:#9bb0d3; --good:#2dd4bf; --warn:#f59e0b; --bad:#ef4444; }
  *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--fg);font:15px/1.5 system-ui,Segoe UI,Roboto,Helvetica,Arial}
  header{padding:20px 16px;border-bottom:1px solid #1e2a44;background:linear-gradient(180deg,#0f172a,#0b1220)}
'cho "CSV origem:  $CSV_SRC  (sincronizado 1/1 min)")::8088/"nabled/et-omegatKPI
bash: line 231: warning: here-document at line 11 delimited by end-of-file (wanted `HTML')
bash: line 11: DST: unbound variable
bash: line 11: SRC: unbound variable
root@danielgonzagatj1:~# Read from remote host 92.38.150.138: Connection reset by peer
Connection to 92.38.150.138 closed.
client_loop: send disconnect: Broken pipe
danielpenin@Daniels-iMac ~ % txt /home/agent/app/requirements.txt
zsh: command not found: txt
danielpenin@Daniels-iMac ~ % RUN pip install --no-cache-dir -r requirements.txt
zsh: command not found: RUN
danielpenin@Daniels-iMac ~ % COPY agent /home/agent/app
zsh: command not found: COPY
danielpenin@Daniels-iMac ~ % ENV PYTHONUNBUFFERED=1
__CFBundleIdentifier=com.apple.Terminal
TMPDIR=/var/folders/k1/q451hxf93bs3878h6cjb25dw0000gn/T/
XPC_FLAGS=0x0
TERM=xterm-256color
SSH_AUTH_SOCK=/private/tmp/com.apple.launchd.IQxbaASf5q/Listeners
XPC_SERVICE_NAME=0
TERM_PROGRAM=Apple_Terminal
TERM_PROGRAM_VERSION=454.1
TERM_SESSION_ID=A909C851-960A-4687-8AE7-887EA0463B07
SHELL=/bin/zsh
HOME=/Users/danielpenin
LOGNAME=danielpenin
USER=danielpenin
PATH=/Users/danielpenin/.nvm/versions/node/v22.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin://Applications/Topaz Gigapixel AI.app/Contents/Resources/bin
SHLVL=1
PWD=/Users/danielpenin
OLDPWD=/Users/danielpenin
HOMEBREW_PREFIX=/opt/homebrew
HOMEBREW_CELLAR=/opt/homebrew/Cellar
HOMEBREW_REPOSITORY=/opt/homebrew
INFOPATH=/opt/homebrew/share/info:
NVM_DIR=/Users/danielpenin/.nvm
NVM_CD_FLAGS=-q
NVM_BIN=/Users/danielpenin/.nvm/versions/node/v22.18.0/bin
NVM_INC=/Users/danielpenin/.nvm/versions/node/v22.18.0/include/node
LANG=pt_BR.UTF-8
_=/usr/bin/ENV
PYTHONUNBUFFERED=1
danielpenin@Daniels-iMac ~ % CMD [\"python\", \"-u\", \"/home/agent/app/agent.py\"]
zsh: bad pattern: ["python",
danielpenin@Daniels-iMac ~ % EOF
zsh: command not found: EOF
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % ### [5] Código base do agente (mínimo viável + espaço pra evoluir)
zsh: no matches found: [5]
danielpenin@Daniels-iMac ~ % install -d -o etomega -g etomega /srv/etomega/agent
install: unknown group etomega
danielpenin@Daniels-iMac ~ % cat >/srv/etomega/agent/requirements.txt <<EOF
heredoc> # Adicione libs aqui; começamos minimalista
heredoc> requests
heredoc> uvloop; platform_system != "Windows"
heredoc> EOF
zsh: no such file or directory: /srv/etomega/agent/requirements.txt
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % cat >/srv/etomega/agent/agent.py <<'PY'
heredoc> import os, time, json, subprocess, sys, pathlib, shlex
heredoc> 
heredoc> BASE = pathlib.Path('/mnt')  # será montado pelo podman
heredoc> WS   = BASE / 'workspace'
heredoc> DATA = BASE / 'data'
heredoc> MODELS = BASE / 'models'
heredoc> LOGS = BASE / 'logs'
heredoc> CACHE = BASE / 'cache'
heredoc> for p in [WS, DATA, MODELS, LOGS, CACHE]:
heredoc>     p.mkdir(parents=True, exist_ok=True)
heredoc> 
heredoc> print("[ETΩ] Agente inicializado. Liberdade dentro do sandbox (internet liberada).")
heredoc> print("[ETΩ] Montagens:", WS, DATA, MODELS, LOGS, CACHE)
heredoc> print("[ETΩ] Regras: sem acesso ao host fora desses diretórios; não mexer em usuários/SSH/serviços do host.")
heredoc> 
heredoc> # Loop simples de “auto-evolução” controlada:
heredoc> # - Observa /workspace/queue.json por tarefas (experimentos, treinamentos, pulls)
heredoc> # - Pode clonar repositórios, compilar, rodar benchmarks
heredoc> # - NÃO tem root; NÃO enxerga /etc do host; NÃO corta seu acesso.
heredoc> 
heredoc> QUEUE = WS / "queue.json"
heredoc> def load_queue():
heredoc>     if not QUEUE.exists():
heredoc>         return []
heredoc>     try:
heredoc>         return json.loads(QUEUE.read_text())
heredoc>     except Exception as e:
heredoc>         (LOGS / "errors.log").write_text(f"queue read error: {e}\n")
heredoc>         return []
heredoc> 
heredoc> def run(cmd, cwd=None, timeout=None, env=None):
heredoc>     print(f"[ETΩ] >> {cmd}")
heredoc>     try:
heredoc>         cp = subprocess.run(cmd, shell=True, cwd=cwd, timeout=timeout, env=env,
heredoc>                             stdout=subprocess.PIPE, stderr=subprocess.STDOUT, text=True)
heredoc>         out = cp.stdout or ""
heredoc>         (LOGS / "last_run.log").write_text(out[-100000:])
heredoc>         return cp.returncode, out
heredoc>     except Exception as e:
heredoc>         msg = f"run error: {e}"
heredoc>         print("[ETΩ] !!", msg)
heredoc>         (LOGS / "errors.log").write_text(msg+"\n")
heredoc>         return 1, str(e)
heredoc> 
heredoc> def task_clone(repo_url, into=None):
heredoc>     into = into or str(WS / "repos")
heredoc>     pathlib.Path(into).mkdir(parents=True, exist_ok=True)
heredoc>     return run(f"git clone --depth=1 {shlex.quote(repo_url)}", cwd=into)
heredoc> 
heredoc> def task_pip(packages):
heredoc>     pkgs = " ".join(shlex.quote(p) for p in packages)
heredoc>     return run(f"pip install --no-cache-dir {pkgs}")
heredoc> 
heredoc> def task_exec(code, cwd=None):
heredoc>     # executa um script Python arbitrário dentro do container (sandbox)
heredoc>     script = WS / "scratch.py"
heredoc>     script.write_text(code)
heredoc>     return run(f"python {script.name}", cwd=str(WS))
heredoc> 
heredoc> def task_shell(command, cwd=None):
heredoc>     # permite shell controlado dentro do container
heredoc>     return run(command, cwd=str(cwd) if cwd else None)
heredoc> 
heredoc> # Loop principal
heredoc> while True:
heredoc>     tasks = load_queue()
heredoc>     for t in tasks:
heredoc>         kind = t.get("type")
heredoc>         if   kind == "clone":  task_clone(t["repo"], t.get("into"))
heredoc>         elif kind == "pip":    task_pip(t["packages"])
heredoc>         elif kind == "py":     task_exec(t["code"], t.get("cwd"))
heredoc>         elif kind == "sh":     task_shell(t["command"], t.get("cwd"))
heredoc>         # extensão: adicionar aqui pipelines de treino, avaliação, etc.
heredoc>     time.sleep(5)
heredoc> PY
zsh: no such file or directory: /srv/etomega/agent/agent.py
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % chown -R etomega:etomega /srv/etomega
chown: etomega: illegal group name
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % ### [6] Build da imagem e serviço do usuário
zsh: no matches found: [6]
danielpenin@Daniels-iMac ~ % su - etomega -c "
dquote>   cd /srv/etomega
dquote>   podman build -t etomega:latest -f Containerfile .
dquote> "
Password:
su: Sorry
danielpenin@Daniels-iMac ~ %   -v /srv/etomega/cache:/mnt/cache:rw,z \
>   --env HF_HUB_DISABLE_SYMLINKS_WARNING=1 \
>   --env TOKENIZERS_PARALLELISM=false \
>   etomega:latest
zsh: command not found: -v
danielpenin@Daniels-iMac ~ % Restart=always
danielpenin@Daniels-iMac ~ % RestartSec=3
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % # Limites (ajuste depois, se quiser)
zsh: number expected
danielpenin@Daniels-iMac ~ % MemoryMax=0
danielpenin@Daniels-iMac ~ % CPUQuota=0
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % [Install]
zsh: no matches found: [Install]
danielpenin@Daniels-iMac ~ % WantedBy=multi-user.target
danielpenin@Daniels-iMac ~ % UNIT
zsh: command not found: UNIT
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % systemctl daemon-reload
zsh: command not found: systemctl
danielpenin@Daniels-iMac ~ % systemctl enable --now etomega-agent.service
zsh: command not found: systemctl
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % echo

danielpenin@Daniels-iMac ~ % echo \"OK: ETΩ rodando em container rootless (sandbox).
zsh: no matches found: (sandbox).
danielpenin@Daniels-iMac ~ % - Pastas no host: /srv/etomega/{workspace,data,models,logs,cache}
zsh: command not found: Pastas
danielpenin@Daniels-iMac ~ % - Fila de tarefas: /srv/etomega/workspace/queue.json (JSON)
zsh: unknown file attribute: J
danielpenin@Daniels-iMac ~ % - Logs: /srv/etomega/logs
zsh: command not found: Logs:
danielpenin@Daniels-iMac ~ % - Garantia: o agente não tem como alterar seu usuário/SSH/serviços do host.\"'
quote> ~
danielpenin@Daniels-iMac ~ % # 1) Clonar um repositório
cat >/srv/etomega/workspace/queue.json <<'JSON'
[
  {"type":"clone","repo":"https://github.com/ggml-org/llama.cpp"},
  {"type":"pip","packages":["numpy","torch==2.3.1","transformers"]},
  {"type":"py","code":"print(\'hello from ETΩ\')"},
  {"type":"sh","command":"python -c \"print(\'bench OK\')\""}
]
JSON

zsh: parse error near `)'
danielpenin@Daniels-iMac ~ % >....                                              
fi
# Execução auditada
LOGDIR="/opt/et8/logs" ; mkdir -p "$LOGDIR"
TS="$(date +%Y%m%d-%H%M%S)"
DEST="/opt/et8/work/changesets/approved/$(basename "$CS")"
cp -a "$CS" "$DEST"
script -qec "bash \"$DEST\"" "$LOGDIR/apply-$TS.typescript"
echo "[OK] Applied: $DEST"
SH
chmod +x /opt/et8/bin/et8-apply

# atalho no PATH
ln -sf /opt/et8/bin/et8-apply /usr/local/bin/et8-apply

### Mensagem final
echo
echo "==> ET★★★★ v8 pronta."
echo "Health:   curl -s http://127.0.0.1:7008/health"
echo "Proposta: curl -s http://127.0.0.1:7008/sample-proposal   # gera um changeset de exemplo"
echo "Aplicar:  et8-apply /opt/et8/work/changesets/pending/AAAA-bbb.sh"
'

bash: line 8: apt-get: command not found
[apt] lock ativo ou falha — aguardando e tentando de novo...
bash: line 14: dpkg: command not found
bash: line 8: apt-get: command not found
[apt] lock ativo ou falha — aguardando e tentando de novo...
bash: line 14: dpkg: command not found
bash: line 8: apt-get: command not found
[apt] lock ativo ou falha — aguardando e tentando de novo...
bash: line 14: dpkg: command not found
bash: line 8: apt-get: command not found
[apt] lock ativo ou falha — aguardando e tentando de novo...
bash: line 14: dpkg: command not found
bash: line 8: apt-get: command not found
[apt] lock ativo ou falha — aguardando e tentando de novo...
bash: line 14: dpkg: command not found
bash: line 8: apt-get: command not found
[apt] lock ativo ou falha — aguardando e tentando de novo...
bash: line 14: dpkg: command not found
bash: line 8: apt-get: command not found
[apt] lock ativo ou falha — aguardando e tentando de novo...
bash: line 14: dpkg: command not found
bash: line 8: apt-get: command not found
APT falhou após várias tentativas
danielpenin@Daniels-iMac ~ % ssh root@92.38.150.138
Enter passphrase for key '/Users/danielpenin/.ssh/id_ed25519': 
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-151-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Aug 12 05:42:37 AM UTC 2025

  System load:  0.0              Temperature:           58.0 C
  Usage of /:   7.0% of 3.43TB   Processes:             583
  Memory usage: 2%               Users logged in:       1
  Swap usage:   0%               IPv4 address for eno1: 92.38.150.138


1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.


Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

1 additional security update can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm



1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.

Last login: Tue Aug 12 05:23:37 2025 from 187.62.85.87
root@danielgonzagatj1:~# bash -lc 'set -euo pipefail

### ===== ET★★★★ v8 — Meta-AI Core (propose→approve) =====

OWNER="${SUDO_USER:-root}" ; OWNER_UID="$(id -u "$OWNER")" ; OWNER_GID="$(id -g "$OWNER")"

_retry_apt() {
  local try=0
  until apt-get update -y && DEBIAN_FRONTEND=noninteractive apt-get install -y \ 
       docker.io git python3-venv build-essential ca-certificates ; do
    try=$((try+1))
    if [ "$try" -ge 8 ]; then echo "APT falhou após várias tentativas"; exit 1; fi
    echo "[apt] lock ativo ou falha — aguardando e tentando de novo..." ; sleep 8
    rm -f /var/lib/dpkg/lock-frontend /var/cache/apt/archives/lock || true
    dpkg --configure -a || true
  done
}
command -v docker >/dev/null 2>&1 || _retry_apt

install -d -m 0755 /opt/et8/{work,logs,bin}
'cho "Aplicar:  et8-apply /opt/et8/work/changesets/pending/AAAA-bbb.sh"um change
DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
            Install the buildx component to build images with BuildKit:
            https://docs.docker.com/go/buildx/

Sending build context to Docker daemon  9.728kB
Step 1/9 : FROM python:3.11-slim
3.11-slim: Pulling from library/python
59e22667830b: Pull complete 
abd846fa1cdb: Pull complete 
b7b61708209a: Pull complete 
4085babbc570: Pull complete 
Digest: sha256:0ce77749ac83174a31d5e107ce0cfa6b28a2fd6b0615e029d9d84b39c48976ee
Status: Downloaded newer image for python:3.11-slim
 ---> f3bfd8e9386c
Step 2/9 : RUN apt-get update -y && apt-get install -y --no-install-recommends       git curl build-essential procps nano openssh-client &&     rm -rf /var/lib/apt/lists/*
 ---> Running in aeeafeb64658
Get:1 http://deb.debian.org/debian bookworm InRelease [151 kB]
Get:2 http://deb.debian.org/debian bookworm-updates InRelease [55.4 kB]
Get:3 http://deb.debian.org/debian-security bookworm-security InRelease [48.0 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 Packages [8793 kB]
Get:5 http://deb.debian.org/debian bookworm-updates/main amd64 Packages [6924 B]
Get:6 http://deb.debian.org/debian-security bookworm-security/main amd64 Packages [272 kB]
Fetched 9327 kB in 1s (6635 kB/s)
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  binutils binutils-common binutils-x86-64-linux-gnu bzip2 cpp cpp-12 dpkg-dev
  g++ g++-12 gcc gcc-12 git-man libasan8 libatomic1 libbinutils libbrotli1
  libbsd0 libc-dev-bin libc6-dev libcbor0.8 libcc1-0 libcrypt-dev
  libctf-nobfd0 libctf0 libcurl3-gnutls libcurl4 libdpkg-perl libedit2
  liberror-perl libexpat1 libfido2-1 libgcc-12-dev libgdbm-compat4 libgomp1
  libgprofng0 libisl23 libitm1 libjansson4 libldap-2.5-0 liblsan0 libmpc3
  libmpfr6 libnghttp2-14 libnsl-dev libperl5.36 libproc2-0 libpsl5
  libquadmath0 librtmp1 libsasl2-2 libsasl2-modules-db libssh2-1 libssl3
  libstdc++-12-dev libtirpc-dev libtsan2 libubsan1 linux-libc-dev make openssl
  patch perl perl-modules-5.36 rpcsvc-proto xz-utils
Suggested packages:
  binutils-doc bzip2-doc cpp-doc gcc-12-locales cpp-12-doc debian-keyring
  g++-multilib g++-12-multilib gcc-12-doc gcc-multilib manpages-dev autoconf
  automake libtool flex bison gdb gcc-doc gcc-12-multilib gettext-base
  git-daemon-run | git-daemon-sysvinit git-doc git-email git-gui gitk gitweb
  git-cvs git-mediawiki git-svn glibc-doc gnupg | sq | sqop | pgpainless-cli
  sensible-utils bzr libstdc++-12-doc make-doc hunspell keychain libpam-ssh
  monkeysphere ssh-askpass ed diffutils-doc perl-doc libterm-readline-gnu-perl
  | libterm-readline-perl-perl libtap-harness-archive-perl
Recommended packages:
  fakeroot gnupg | sq | sqop | pgpainless-cli libalgorithm-merge-perl less
  manpages manpages-dev libc-devtools libfile-fcntllock-perl
  liblocale-gettext-perl libldap-common publicsuffix libsasl2-modules xauth
  psmisc
The following NEW packages will be installed:
  binutils binutils-common binutils-x86-64-linux-gnu build-essential bzip2 cpp
  cpp-12 curl dpkg-dev g++ g++-12 gcc gcc-12 git git-man libasan8 libatomic1
  libbinutils libbrotli1 libbsd0 libc-dev-bin libc6-dev libcbor0.8 libcc1-0
  libcrypt-dev libctf-nobfd0 libctf0 libcurl3-gnutls libcurl4 libdpkg-perl
  libedit2 liberror-perl libexpat1 libfido2-1 libgcc-12-dev libgdbm-compat4
  libgomp1 libgprofng0 libisl23 libitm1 libjansson4 libldap-2.5-0 liblsan0
  libmpc3 libmpfr6 libnghttp2-14 libnsl-dev libperl5.36 libproc2-0 libpsl5
  libquadmath0 librtmp1 libsasl2-2 libsasl2-modules-db libssh2-1
  libstdc++-12-dev libtirpc-dev libtsan2 libubsan1 linux-libc-dev make nano
  openssh-client patch perl perl-modules-5.36 procps rpcsvc-proto xz-utils
The following packages will be upgraded:
  libssl3 openssl
2 upgraded, 69 newly installed, 0 to remove and 0 not upgraded.
Need to get 91.2 MB of archives.
After this operation, 379 MB of additional disk space will be used.
Get:1 http://deb.debian.org/debian bookworm/main amd64 perl-modules-5.36 all 5.36.0-7+deb12u2 [2815 kB]
Get:2 http://deb.debian.org/debian bookworm/main amd64 libgdbm-compat4 amd64 1.23-3 [48.2 kB]
Get:3 http://deb.debian.org/debian bookworm/main amd64 libperl5.36 amd64 5.36.0-7+deb12u2 [4207 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 perl amd64 5.36.0-7+deb12u2 [239 kB]
Get:5 http://deb.debian.org/debian bookworm/main amd64 nano amd64 7.2-1+deb12u1 [690 kB]
Get:6 http://deb.debian.org/debian bookworm/main amd64 libproc2-0 amd64 2:4.0.2-3 [62.8 kB]
Get:7 http://deb.debian.org/debian bookworm/main amd64 procps amd64 2:4.0.2-3 [709 kB]
Get:8 http://deb.debian.org/debian bookworm/main amd64 bzip2 amd64 1.0.8-5+b1 [49.8 kB]
Get:9 http://deb.debian.org/debian bookworm/main amd64 libbsd0 amd64 0.11.7-2 [117 kB]
Get:10 http://deb.debian.org/debian bookworm/main amd64 libedit2 amd64 3.1-20221030-2 [93.0 kB]
Get:11 http://deb.debian.org/debian bookworm/main amd64 libcbor0.8 amd64 0.8.0-2+b1 [27.4 kB]
Get:12 http://deb.debian.org/debian bookworm-updates/main amd64 libssl3 amd64 3.0.17-1~deb12u2 [2027 kB]
Get:13 http://deb.debian.org/debian bookworm/main amd64 libfido2-1 amd64 1.12.0-2+b1 [77.2 kB]
Get:14 http://deb.debian.org/debian bookworm-updates/main amd64 openssh-client amd64 1:9.2p1-2+deb12u7 [992 kB]
Get:15 http://deb.debian.org/debian bookworm/main amd64 xz-utils amd64 5.4.1-1 [471 kB]
Get:16 http://deb.debian.org/debian bookworm/main amd64 binutils-common amd64 2.40-2 [2487 kB]
Get:17 http://deb.debian.org/debian bookworm/main amd64 libbinutils amd64 2.40-2 [572 kB]
Get:18 http://deb.debian.org/debian bookworm/main amd64 libctf-nobfd0 amd64 2.40-2 [153 kB]
Get:19 http://deb.debian.org/debian bookworm/main amd64 libctf0 amd64 2.40-2 [89.8 kB]
Get:20 http://deb.debian.org/debian bookworm/main amd64 libgprofng0 amd64 2.40-2 [812 kB]
Get:21 http://deb.debian.org/debian bookworm/main amd64 libjansson4 amd64 2.14-2 [40.8 kB]
Get:22 http://deb.debian.org/debian bookworm/main amd64 binutils-x86-64-linux-gnu amd64 2.40-2 [2246 kB]
Get:23 http://deb.debian.org/debian bookworm/main amd64 binutils amd64 2.40-2 [65.0 kB]
Get:24 http://deb.debian.org/debian bookworm/main amd64 libc-dev-bin amd64 2.36-9+deb12u10 [47.1 kB]
Get:25 http://deb.debian.org/debian-security bookworm-security/main amd64 linux-libc-dev amd64 6.1.140-1 [2145 kB]
Get:26 http://deb.debian.org/debian bookworm/main amd64 libcrypt-dev amd64 1:4.4.33-2 [118 kB]
Get:27 http://deb.debian.org/debian bookworm/main amd64 libtirpc-dev amd64 1.3.3+ds-1 [191 kB]
Get:28 http://deb.debian.org/debian bookworm/main amd64 libnsl-dev amd64 1.3.0-2 [66.4 kB]
Get:29 http://deb.debian.org/debian bookworm/main amd64 rpcsvc-proto amd64 1.4.3-1 [63.3 kB]
Get:30 http://deb.debian.org/debian bookworm/main amd64 libc6-dev amd64 2.36-9+deb12u10 [1903 kB]
Get:31 http://deb.debian.org/debian bookworm/main amd64 libisl23 amd64 0.25-1.1 [683 kB]
Get:32 http://deb.debian.org/debian bookworm/main amd64 libmpfr6 amd64 4.2.0-1 [701 kB]
Get:33 http://deb.debian.org/debian bookworm/main amd64 libmpc3 amd64 1.3.1-1 [51.5 kB]
Get:34 http://deb.debian.org/debian bookworm/main amd64 cpp-12 amd64 12.2.0-14+deb12u1 [9768 kB]
Get:35 http://deb.debian.org/debian bookworm/main amd64 cpp amd64 4:12.2.0-3 [6836 B]
Get:36 http://deb.debian.org/debian bookworm/main amd64 libcc1-0 amd64 12.2.0-14+deb12u1 [41.7 kB]
Get:37 http://deb.debian.org/debian bookworm/main amd64 libgomp1 amd64 12.2.0-14+deb12u1 [116 kB]
Get:38 http://deb.debian.org/debian bookworm/main amd64 libitm1 amd64 12.2.0-14+deb12u1 [26.1 kB]
Get:39 http://deb.debian.org/debian bookworm/main amd64 libatomic1 amd64 12.2.0-14+deb12u1 [9376 B]
Get:40 http://deb.debian.org/debian bookworm/main amd64 libasan8 amd64 12.2.0-14+deb12u1 [2193 kB]
Get:41 http://deb.debian.org/debian bookworm/main amd64 liblsan0 amd64 12.2.0-14+deb12u1 [969 kB]
Get:42 http://deb.debian.org/debian bookworm/main amd64 libtsan2 amd64 12.2.0-14+deb12u1 [2197 kB]
Get:43 http://deb.debian.org/debian bookworm/main amd64 libubsan1 amd64 12.2.0-14+deb12u1 [883 kB]
Get:44 http://deb.debian.org/debian bookworm/main amd64 libquadmath0 amd64 12.2.0-14+deb12u1 [145 kB]
Get:45 http://deb.debian.org/debian bookworm/main amd64 libgcc-12-dev amd64 12.2.0-14+deb12u1 [2437 kB]
Get:46 http://deb.debian.org/debian bookworm/main amd64 gcc-12 amd64 12.2.0-14+deb12u1 [19.3 MB]
Get:47 http://deb.debian.org/debian bookworm/main amd64 gcc amd64 4:12.2.0-3 [5216 B]
Get:48 http://deb.debian.org/debian bookworm/main amd64 libstdc++-12-dev amd64 12.2.0-14+deb12u1 [2047 kB]
Get:49 http://deb.debian.org/debian bookworm/main amd64 g++-12 amd64 12.2.0-14+deb12u1 [10.7 MB]
Get:50 http://deb.debian.org/debian bookworm/main amd64 g++ amd64 4:12.2.0-3 [1356 B]
Get:51 http://deb.debian.org/debian bookworm/main amd64 make amd64 4.3-4.1 [396 kB]
Get:52 http://deb.debian.org/debian bookworm/main amd64 libdpkg-perl all 1.21.22 [603 kB]
Get:53 http://deb.debian.org/debian bookworm/main amd64 patch amd64 2.7.6-7 [128 kB]
Get:54 http://deb.debian.org/debian bookworm/main amd64 dpkg-dev all 1.21.22 [1353 kB]
Get:55 http://deb.debian.org/debian bookworm/main amd64 build-essential amd64 12.9 [7704 B]
Get:56 http://deb.debian.org/debian bookworm/main amd64 libbrotli1 amd64 1.0.9-2+b6 [275 kB]
Get:57 http://deb.debian.org/debian bookworm/main amd64 libsasl2-modules-db amd64 2.1.28+dfsg-10 [20.3 kB]
Get:58 http://deb.debian.org/debian bookworm/main amd64 libsasl2-2 amd64 2.1.28+dfsg-10 [59.7 kB]
Get:59 http://deb.debian.org/debian bookworm/main amd64 libldap-2.5-0 amd64 2.5.13+dfsg-5 [183 kB]
Get:60 http://deb.debian.org/debian bookworm/main amd64 libnghttp2-14 amd64 1.52.0-1+deb12u2 [73.0 kB]
Get:61 http://deb.debian.org/debian bookworm/main amd64 libpsl5 amd64 0.21.2-1 [58.7 kB]
Get:62 http://deb.debian.org/debian bookworm/main amd64 librtmp1 amd64 2.4+20151223.gitfa8646d.1-2+b2 [60.8 kB]
Get:63 http://deb.debian.org/debian bookworm/main amd64 libssh2-1 amd64 1.10.0-3+b1 [179 kB]
Get:64 http://deb.debian.org/debian bookworm/main amd64 libcurl4 amd64 7.88.1-10+deb12u12 [391 kB]
Get:65 http://deb.debian.org/debian bookworm/main amd64 curl amd64 7.88.1-10+deb12u12 [315 kB]
Get:66 http://deb.debian.org/debian bookworm/main amd64 libcurl3-gnutls amd64 7.88.1-10+deb12u12 [386 kB]
Get:67 http://deb.debian.org/debian bookworm/main amd64 libexpat1 amd64 2.5.0-1+deb12u1 [98.9 kB]
Get:68 http://deb.debian.org/debian bookworm/main amd64 liberror-perl all 0.17029-2 [29.0 kB]
Get:69 http://deb.debian.org/debian bookworm/main amd64 git-man all 1:2.39.5-0+deb12u2 [2053 kB]
Get:70 http://deb.debian.org/debian bookworm/main amd64 git amd64 1:2.39.5-0+deb12u2 [7260 kB]
Get:71 http://deb.debian.org/debian bookworm-updates/main amd64 openssl amd64 3.0.17-1~deb12u2 [1430 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 91.2 MB in 1s (105 MB/s)
Selecting previously unselected package perl-modules-5.36.
(Reading database ... 6688 files and directories currently installed.)
Preparing to unpack .../00-perl-modules-5.36_5.36.0-7+deb12u2_all.deb ...
Unpacking perl-modules-5.36 (5.36.0-7+deb12u2) ...
Selecting previously unselected package libgdbm-compat4:amd64.
Preparing to unpack .../01-libgdbm-compat4_1.23-3_amd64.deb ...
Unpacking libgdbm-compat4:amd64 (1.23-3) ...
Selecting previously unselected package libperl5.36:amd64.
Preparing to unpack .../02-libperl5.36_5.36.0-7+deb12u2_amd64.deb ...
Unpacking libperl5.36:amd64 (5.36.0-7+deb12u2) ...
Selecting previously unselected package perl.
Preparing to unpack .../03-perl_5.36.0-7+deb12u2_amd64.deb ...
Unpacking perl (5.36.0-7+deb12u2) ...
Selecting previously unselected package nano.
Preparing to unpack .../04-nano_7.2-1+deb12u1_amd64.deb ...
Unpacking nano (7.2-1+deb12u1) ...
Selecting previously unselected package libproc2-0:amd64.
Preparing to unpack .../05-libproc2-0_2%3a4.0.2-3_amd64.deb ...
Unpacking libproc2-0:amd64 (2:4.0.2-3) ...
Selecting previously unselected package procps.
Preparing to unpack .../06-procps_2%3a4.0.2-3_amd64.deb ...
Unpacking procps (2:4.0.2-3) ...
Selecting previously unselected package bzip2.
Preparing to unpack .../07-bzip2_1.0.8-5+b1_amd64.deb ...
Unpacking bzip2 (1.0.8-5+b1) ...
Selecting previously unselected package libbsd0:amd64.
Preparing to unpack .../08-libbsd0_0.11.7-2_amd64.deb ...
Unpacking libbsd0:amd64 (0.11.7-2) ...
Selecting previously unselected package libedit2:amd64.
Preparing to unpack .../09-libedit2_3.1-20221030-2_amd64.deb ...
Unpacking libedit2:amd64 (3.1-20221030-2) ...
Selecting previously unselected package libcbor0.8:amd64.
Preparing to unpack .../10-libcbor0.8_0.8.0-2+b1_amd64.deb ...
Unpacking libcbor0.8:amd64 (0.8.0-2+b1) ...
Preparing to unpack .../11-libssl3_3.0.17-1~deb12u2_amd64.deb ...
Unpacking libssl3:amd64 (3.0.17-1~deb12u2) over (3.0.16-1~deb12u1) ...
Selecting previously unselected package libfido2-1:amd64.
Preparing to unpack .../12-libfido2-1_1.12.0-2+b1_amd64.deb ...
Unpacking libfido2-1:amd64 (1.12.0-2+b1) ...
Selecting previously unselected package openssh-client.
Preparing to unpack .../13-openssh-client_1%3a9.2p1-2+deb12u7_amd64.deb ...
Unpacking openssh-client (1:9.2p1-2+deb12u7) ...
Selecting previously unselected package xz-utils.
Preparing to unpack .../14-xz-utils_5.4.1-1_amd64.deb ...
Unpacking xz-utils (5.4.1-1) ...
Selecting previously unselected package binutils-common:amd64.
Preparing to unpack .../15-binutils-common_2.40-2_amd64.deb ...
Unpacking binutils-common:amd64 (2.40-2) ...
Selecting previously unselected package libbinutils:amd64.
Preparing to unpack .../16-libbinutils_2.40-2_amd64.deb ...
Unpacking libbinutils:amd64 (2.40-2) ...
Selecting previously unselected package libctf-nobfd0:amd64.
Preparing to unpack .../17-libctf-nobfd0_2.40-2_amd64.deb ...
Unpacking libctf-nobfd0:amd64 (2.40-2) ...
Selecting previously unselected package libctf0:amd64.
Preparing to unpack .../18-libctf0_2.40-2_amd64.deb ...
Unpacking libctf0:amd64 (2.40-2) ...
Selecting previously unselected package libgprofng0:amd64.
Preparing to unpack .../19-libgprofng0_2.40-2_amd64.deb ...
Unpacking libgprofng0:amd64 (2.40-2) ...
Selecting previously unselected package libjansson4:amd64.
Preparing to unpack .../20-libjansson4_2.14-2_amd64.deb ...
Unpacking libjansson4:amd64 (2.14-2) ...
Selecting previously unselected package binutils-x86-64-linux-gnu.
Preparing to unpack .../21-binutils-x86-64-linux-gnu_2.40-2_amd64.deb ...
Unpacking binutils-x86-64-linux-gnu (2.40-2) ...
Selecting previously unselected package binutils.
Preparing to unpack .../22-binutils_2.40-2_amd64.deb ...
Unpacking binutils (2.40-2) ...
Selecting previously unselected package libc-dev-bin.
Preparing to unpack .../23-libc-dev-bin_2.36-9+deb12u10_amd64.deb ...
Unpacking libc-dev-bin (2.36-9+deb12u10) ...
Selecting previously unselected package linux-libc-dev:amd64.
Preparing to unpack .../24-linux-libc-dev_6.1.140-1_amd64.deb ...
Unpacking linux-libc-dev:amd64 (6.1.140-1) ...
Selecting previously unselected package libcrypt-dev:amd64.
Preparing to unpack .../25-libcrypt-dev_1%3a4.4.33-2_amd64.deb ...
Unpacking libcrypt-dev:amd64 (1:4.4.33-2) ...
Selecting previously unselected package libtirpc-dev:amd64.
Preparing to unpack .../26-libtirpc-dev_1.3.3+ds-1_amd64.deb ...
Unpacking libtirpc-dev:amd64 (1.3.3+ds-1) ...
Selecting previously unselected package libnsl-dev:amd64.
Preparing to unpack .../27-libnsl-dev_1.3.0-2_amd64.deb ...
Unpacking libnsl-dev:amd64 (1.3.0-2) ...
Selecting previously unselected package rpcsvc-proto.
Preparing to unpack .../28-rpcsvc-proto_1.4.3-1_amd64.deb ...
Unpacking rpcsvc-proto (1.4.3-1) ...
Selecting previously unselected package libc6-dev:amd64.
Preparing to unpack .../29-libc6-dev_2.36-9+deb12u10_amd64.deb ...
Unpacking libc6-dev:amd64 (2.36-9+deb12u10) ...
Selecting previously unselected package libisl23:amd64.
Preparing to unpack .../30-libisl23_0.25-1.1_amd64.deb ...
Unpacking libisl23:amd64 (0.25-1.1) ...
Selecting previously unselected package libmpfr6:amd64.
Preparing to unpack .../31-libmpfr6_4.2.0-1_amd64.deb ...
Unpacking libmpfr6:amd64 (4.2.0-1) ...
Selecting previously unselected package libmpc3:amd64.
Preparing to unpack .../32-libmpc3_1.3.1-1_amd64.deb ...
Unpacking libmpc3:amd64 (1.3.1-1) ...
Selecting previously unselected package cpp-12.
Preparing to unpack .../33-cpp-12_12.2.0-14+deb12u1_amd64.deb ...
Unpacking cpp-12 (12.2.0-14+deb12u1) ...
Selecting previously unselected package cpp.
Preparing to unpack .../34-cpp_4%3a12.2.0-3_amd64.deb ...
Unpacking cpp (4:12.2.0-3) ...
Selecting previously unselected package libcc1-0:amd64.
Preparing to unpack .../35-libcc1-0_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libcc1-0:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libgomp1:amd64.
Preparing to unpack .../36-libgomp1_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libgomp1:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libitm1:amd64.
Preparing to unpack .../37-libitm1_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libitm1:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libatomic1:amd64.
Preparing to unpack .../38-libatomic1_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libatomic1:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libasan8:amd64.
Preparing to unpack .../39-libasan8_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libasan8:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package liblsan0:amd64.
Preparing to unpack .../40-liblsan0_12.2.0-14+deb12u1_amd64.deb ...
Unpacking liblsan0:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libtsan2:amd64.
Preparing to unpack .../41-libtsan2_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libtsan2:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libubsan1:amd64.
Preparing to unpack .../42-libubsan1_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libubsan1:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libquadmath0:amd64.
Preparing to unpack .../43-libquadmath0_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libquadmath0:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libgcc-12-dev:amd64.
Preparing to unpack .../44-libgcc-12-dev_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libgcc-12-dev:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package gcc-12.
Preparing to unpack .../45-gcc-12_12.2.0-14+deb12u1_amd64.deb ...
Unpacking gcc-12 (12.2.0-14+deb12u1) ...
Selecting previously unselected package gcc.
Preparing to unpack .../46-gcc_4%3a12.2.0-3_amd64.deb ...
Unpacking gcc (4:12.2.0-3) ...
Selecting previously unselected package libstdc++-12-dev:amd64.
Preparing to unpack .../47-libstdc++-12-dev_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libstdc++-12-dev:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package g++-12.
Preparing to unpack .../48-g++-12_12.2.0-14+deb12u1_amd64.deb ...
Unpacking g++-12 (12.2.0-14+deb12u1) ...
Selecting previously unselected package g++.
Preparing to unpack .../49-g++_4%3a12.2.0-3_amd64.deb ...
Unpacking g++ (4:12.2.0-3) ...
Selecting previously unselected package make.
Preparing to unpack .../50-make_4.3-4.1_amd64.deb ...
Unpacking make (4.3-4.1) ...
Selecting previously unselected package libdpkg-perl.
Preparing to unpack .../51-libdpkg-perl_1.21.22_all.deb ...
Unpacking libdpkg-perl (1.21.22) ...
Selecting previously unselected package patch.
Preparing to unpack .../52-patch_2.7.6-7_amd64.deb ...
Unpacking patch (2.7.6-7) ...
Selecting previously unselected package dpkg-dev.
Preparing to unpack .../53-dpkg-dev_1.21.22_all.deb ...
Unpacking dpkg-dev (1.21.22) ...
Selecting previously unselected package build-essential.
Preparing to unpack .../54-build-essential_12.9_amd64.deb ...
Unpacking build-essential (12.9) ...
Selecting previously unselected package libbrotli1:amd64.
Preparing to unpack .../55-libbrotli1_1.0.9-2+b6_amd64.deb ...
Unpacking libbrotli1:amd64 (1.0.9-2+b6) ...
Selecting previously unselected package libsasl2-modules-db:amd64.
Preparing to unpack .../56-libsasl2-modules-db_2.1.28+dfsg-10_amd64.deb ...
Unpacking libsasl2-modules-db:amd64 (2.1.28+dfsg-10) ...
Selecting previously unselected package libsasl2-2:amd64.
Preparing to unpack .../57-libsasl2-2_2.1.28+dfsg-10_amd64.deb ...
Unpacking libsasl2-2:amd64 (2.1.28+dfsg-10) ...
Selecting previously unselected package libldap-2.5-0:amd64.
Preparing to unpack .../58-libldap-2.5-0_2.5.13+dfsg-5_amd64.deb ...
Unpacking libldap-2.5-0:amd64 (2.5.13+dfsg-5) ...
Selecting previously unselected package libnghttp2-14:amd64.
Preparing to unpack .../59-libnghttp2-14_1.52.0-1+deb12u2_amd64.deb ...
Unpacking libnghttp2-14:amd64 (1.52.0-1+deb12u2) ...
Selecting previously unselected package libpsl5:amd64.
Preparing to unpack .../60-libpsl5_0.21.2-1_amd64.deb ...
Unpacking libpsl5:amd64 (0.21.2-1) ...
Selecting previously unselected package librtmp1:amd64.
Preparing to unpack .../61-librtmp1_2.4+20151223.gitfa8646d.1-2+b2_amd64.deb ...
Unpacking librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2+b2) ...
Selecting previously unselected package libssh2-1:amd64.
Preparing to unpack .../62-libssh2-1_1.10.0-3+b1_amd64.deb ...
Unpacking libssh2-1:amd64 (1.10.0-3+b1) ...
Selecting previously unselected package libcurl4:amd64.
Preparing to unpack .../63-libcurl4_7.88.1-10+deb12u12_amd64.deb ...
Unpacking libcurl4:amd64 (7.88.1-10+deb12u12) ...
Selecting previously unselected package curl.
Preparing to unpack .../64-curl_7.88.1-10+deb12u12_amd64.deb ...
Unpacking curl (7.88.1-10+deb12u12) ...
Selecting previously unselected package libcurl3-gnutls:amd64.
Preparing to unpack .../65-libcurl3-gnutls_7.88.1-10+deb12u12_amd64.deb ...
Unpacking libcurl3-gnutls:amd64 (7.88.1-10+deb12u12) ...
Selecting previously unselected package libexpat1:amd64.
Preparing to unpack .../66-libexpat1_2.5.0-1+deb12u1_amd64.deb ...
Unpacking libexpat1:amd64 (2.5.0-1+deb12u1) ...
Selecting previously unselected package liberror-perl.
Preparing to unpack .../67-liberror-perl_0.17029-2_all.deb ...
Unpacking liberror-perl (0.17029-2) ...
Selecting previously unselected package git-man.
Preparing to unpack .../68-git-man_1%3a2.39.5-0+deb12u2_all.deb ...
Unpacking git-man (1:2.39.5-0+deb12u2) ...
Selecting previously unselected package git.
Preparing to unpack .../69-git_1%3a2.39.5-0+deb12u2_amd64.deb ...
Unpacking git (1:2.39.5-0+deb12u2) ...
Preparing to unpack .../70-openssl_3.0.17-1~deb12u2_amd64.deb ...
Unpacking openssl (3.0.17-1~deb12u2) over (3.0.16-1~deb12u1) ...
Setting up libexpat1:amd64 (2.5.0-1+deb12u1) ...
Setting up libpsl5:amd64 (0.21.2-1) ...
Setting up libcbor0.8:amd64 (0.8.0-2+b1) ...
Setting up libbrotli1:amd64 (1.0.9-2+b6) ...
Setting up binutils-common:amd64 (2.40-2) ...
Setting up libssl3:amd64 (3.0.17-1~deb12u2) ...
Setting up libnghttp2-14:amd64 (1.52.0-1+deb12u2) ...
Setting up linux-libc-dev:amd64 (6.1.140-1) ...
Setting up libctf-nobfd0:amd64 (2.40-2) ...
Setting up libgomp1:amd64 (12.2.0-14+deb12u1) ...
Setting up bzip2 (1.0.8-5+b1) ...
Setting up libjansson4:amd64 (2.14-2) ...
Setting up libsasl2-modules-db:amd64 (2.1.28+dfsg-10) ...
Setting up perl-modules-5.36 (5.36.0-7+deb12u2) ...
Setting up libtirpc-dev:amd64 (1.3.3+ds-1) ...
Setting up rpcsvc-proto (1.4.3-1) ...
Setting up make (4.3-4.1) ...
Setting up libmpfr6:amd64 (4.2.0-1) ...
Setting up librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2+b2) ...
Setting up xz-utils (5.4.1-1) ...
update-alternatives: using /usr/bin/xz to provide /usr/bin/lzma (lzma) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/lzma.1.gz because associated file /usr/share/man/man1/xz.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/unlzma.1.gz because associated file /usr/share/man/man1/unxz.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzcat.1.gz because associated file /usr/share/man/man1/xzcat.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzmore.1.gz because associated file /usr/share/man/man1/xzmore.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzless.1.gz because associated file /usr/share/man/man1/xzless.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzdiff.1.gz because associated file /usr/share/man/man1/xzdiff.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzcmp.1.gz because associated file /usr/share/man/man1/xzcmp.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzgrep.1.gz because associated file /usr/share/man/man1/xzgrep.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzegrep.1.gz because associated file /usr/share/man/man1/xzegrep.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzfgrep.1.gz because associated file /usr/share/man/man1/xzfgrep.1.gz (of link group lzma) doesn't exist
Setting up libquadmath0:amd64 (12.2.0-14+deb12u1) ...
Setting up libproc2-0:amd64 (2:4.0.2-3) ...
Setting up libmpc3:amd64 (1.3.1-1) ...
Setting up libatomic1:amd64 (12.2.0-14+deb12u1) ...
Setting up patch (2.7.6-7) ...
Setting up libgdbm-compat4:amd64 (1.23-3) ...
Setting up libsasl2-2:amd64 (2.1.28+dfsg-10) ...
Setting up libubsan1:amd64 (12.2.0-14+deb12u1) ...
Setting up nano (7.2-1+deb12u1) ...
update-alternatives: using /bin/nano to provide /usr/bin/editor (editor) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/editor.1.gz because associated file /usr/share/man/man1/nano.1.gz (of link group editor) doesn't exist
update-alternatives: using /bin/nano to provide /usr/bin/pico (pico) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/pico.1.gz because associated file /usr/share/man/man1/nano.1.gz (of link group pico) doesn't exist
Setting up libnsl-dev:amd64 (1.3.0-2) ...
Setting up libcrypt-dev:amd64 (1:4.4.33-2) ...
Setting up libasan8:amd64 (12.2.0-14+deb12u1) ...
Setting up procps (2:4.0.2-3) ...
Setting up git-man (1:2.39.5-0+deb12u2) ...
Setting up libssh2-1:amd64 (1.10.0-3+b1) ...
Setting up libtsan2:amd64 (12.2.0-14+deb12u1) ...
Setting up libbinutils:amd64 (2.40-2) ...
Setting up libfido2-1:amd64 (1.12.0-2+b1) ...
Setting up libisl23:amd64 (0.25-1.1) ...
Setting up libc-dev-bin (2.36-9+deb12u10) ...
Setting up openssl (3.0.17-1~deb12u2) ...
Setting up libbsd0:amd64 (0.11.7-2) ...
Setting up libcc1-0:amd64 (12.2.0-14+deb12u1) ...
Setting up libperl5.36:amd64 (5.36.0-7+deb12u2) ...
Setting up liblsan0:amd64 (12.2.0-14+deb12u1) ...
Setting up libitm1:amd64 (12.2.0-14+deb12u1) ...
Setting up libctf0:amd64 (2.40-2) ...
Setting up cpp-12 (12.2.0-14+deb12u1) ...
Setting up libedit2:amd64 (3.1-20221030-2) ...
Setting up libldap-2.5-0:amd64 (2.5.13+dfsg-5) ...
Setting up perl (5.36.0-7+deb12u2) ...
Setting up libgprofng0:amd64 (2.40-2) ...
Setting up libgcc-12-dev:amd64 (12.2.0-14+deb12u1) ...
Setting up libdpkg-perl (1.21.22) ...
Setting up cpp (4:12.2.0-3) ...
Setting up libcurl4:amd64 (7.88.1-10+deb12u12) ...
Setting up libc6-dev:amd64 (2.36-9+deb12u10) ...
Setting up curl (7.88.1-10+deb12u12) ...
Setting up binutils-x86-64-linux-gnu (2.40-2) ...
Setting up libstdc++-12-dev:amd64 (12.2.0-14+deb12u1) ...
Setting up openssh-client (1:9.2p1-2+deb12u7) ...
Setting up libcurl3-gnutls:amd64 (7.88.1-10+deb12u12) ...
Setting up binutils (2.40-2) ...
Setting up dpkg-dev (1.21.22) ...
Setting up liberror-perl (0.17029-2) ...
Setting up gcc-12 (12.2.0-14+deb12u1) ...
Setting up git (1:2.39.5-0+deb12u2) ...
Setting up g++-12 (12.2.0-14+deb12u1) ...
Setting up gcc (4:12.2.0-3) ...
Setting up g++ (4:12.2.0-3) ...
update-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode
Setting up build-essential (12.9) ...
Processing triggers for libc-bin (2.36-9+deb12u10) ...
 ---> Removed intermediate container aeeafeb64658
 ---> a57d19395d46
Step 3/9 : WORKDIR /app
 ---> Running in d70934b6f43d
 ---> Removed intermediate container d70934b6f43d
 ---> bc6ce865ae29
Step 4/9 : RUN python -m pip install --no-cache-dir uvicorn fastapi pydantic==2.*     && python -m pip install --no-cache-dir numpy scipy pandas scikit-learn     && python -m pip install --no-cache-dir torch --index-url https://download.pytorch.org/whl/cpu
 ---> Running in c900e744d861
Collecting uvicorn
  Downloading uvicorn-0.35.0-py3-none-any.whl.metadata (6.5 kB)
Collecting fastapi
  Downloading fastapi-0.116.1-py3-none-any.whl.metadata (28 kB)
Collecting pydantic==2.*
  Downloading pydantic-2.11.7-py3-none-any.whl.metadata (67 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 68.0/68.0 kB 7.7 MB/s eta 0:00:00
Collecting annotated-types>=0.6.0 (from pydantic==2.*)
  Downloading annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)
Collecting pydantic-core==2.33.2 (from pydantic==2.*)
  Downloading pydantic_core-2.33.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.8 kB)
Collecting typing-extensions>=4.12.2 (from pydantic==2.*)
  Downloading typing_extensions-4.14.1-py3-none-any.whl.metadata (3.0 kB)
Collecting typing-inspection>=0.4.0 (from pydantic==2.*)
  Downloading typing_inspection-0.4.1-py3-none-any.whl.metadata (2.6 kB)
Collecting click>=7.0 (from uvicorn)
  Downloading click-8.2.1-py3-none-any.whl.metadata (2.5 kB)
Collecting h11>=0.8 (from uvicorn)
  Downloading h11-0.16.0-py3-none-any.whl.metadata (8.3 kB)
Collecting starlette<0.48.0,>=0.40.0 (from fastapi)
  Downloading starlette-0.47.2-py3-none-any.whl.metadata (6.2 kB)
Collecting anyio<5,>=3.6.2 (from starlette<0.48.0,>=0.40.0->fastapi)
  Downloading anyio-4.10.0-py3-none-any.whl.metadata (4.0 kB)
Collecting idna>=2.8 (from anyio<5,>=3.6.2->starlette<0.48.0,>=0.40.0->fastapi)
  Downloading idna-3.10-py3-none-any.whl.metadata (10 kB)
Collecting sniffio>=1.1 (from anyio<5,>=3.6.2->starlette<0.48.0,>=0.40.0->fastapi)
  Downloading sniffio-1.3.1-py3-none-any.whl.metadata (3.9 kB)
Downloading pydantic-2.11.7-py3-none-any.whl (444 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 444.8/444.8 kB 149.2 MB/s eta 0:00:00
Downloading pydantic_core-2.33.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.0 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 126.0 MB/s eta 0:00:00
Downloading uvicorn-0.35.0-py3-none-any.whl (66 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 66.4/66.4 kB 245.0 MB/s eta 0:00:00
Downloading fastapi-0.116.1-py3-none-any.whl (95 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 95.6/95.6 kB 273.8 MB/s eta 0:00:00
Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
Downloading click-8.2.1-py3-none-any.whl (102 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 102.2/102.2 kB 277.7 MB/s eta 0:00:00
Downloading h11-0.16.0-py3-none-any.whl (37 kB)
Downloading starlette-0.47.2-py3-none-any.whl (72 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 73.0/73.0 kB 257.5 MB/s eta 0:00:00
Downloading typing_extensions-4.14.1-py3-none-any.whl (43 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 43.9/43.9 kB 242.9 MB/s eta 0:00:00
Downloading typing_inspection-0.4.1-py3-none-any.whl (14 kB)
Downloading anyio-4.10.0-py3-none-any.whl (107 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 107.2/107.2 kB 274.5 MB/s eta 0:00:00
Downloading idna-3.10-py3-none-any.whl (70 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 70.4/70.4 kB 261.7 MB/s eta 0:00:00
Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)
Installing collected packages: typing-extensions, sniffio, idna, h11, click, annotated-types, uvicorn, typing-inspection, pydantic-core, anyio, starlette, pydantic, fastapi
Successfully installed annotated-types-0.7.0 anyio-4.10.0 click-8.2.1 fastapi-0.116.1 h11-0.16.0 idna-3.10 pydantic-2.11.7 pydantic-core-2.33.2 sniffio-1.3.1 starlette-0.47.2 typing-extensions-4.14.1 typing-inspection-0.4.1 uvicorn-0.35.0
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv

[notice] A new release of pip is available: 24.0 -> 25.2
[notice] To update, run: pip install --upgrade pip
Collecting numpy
  Downloading numpy-2.3.2-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl.metadata (62 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.1/62.1 kB 4.6 MB/s eta 0:00:00
Collecting scipy
  Downloading scipy-1.16.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (61 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.0/62.0 kB 53.3 MB/s eta 0:00:00
Collecting pandas
  Downloading pandas-2.3.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (91 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 91.2/91.2 kB 194.8 MB/s eta 0:00:00
Collecting scikit-learn
  Downloading scikit_learn-1.7.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (11 kB)
Collecting python-dateutil>=2.8.2 (from pandas)
  Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
Collecting pytz>=2020.1 (from pandas)
  Downloading pytz-2025.2-py2.py3-none-any.whl.metadata (22 kB)
Collecting tzdata>=2022.7 (from pandas)
  Downloading tzdata-2025.2-py2.py3-none-any.whl.metadata (1.4 kB)
Collecting joblib>=1.2.0 (from scikit-learn)
  Downloading joblib-1.5.1-py3-none-any.whl.metadata (5.6 kB)
Collecting threadpoolctl>=3.1.0 (from scikit-learn)
  Downloading threadpoolctl-3.6.0-py3-none-any.whl.metadata (13 kB)
Collecting six>=1.5 (from python-dateutil>=2.8.2->pandas)
  Downloading six-1.17.0-py2.py3-none-any.whl.metadata (1.7 kB)
Downloading numpy-2.3.2-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl (16.9 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 16.9/16.9 MB 117.6 MB/s eta 0:00:00
Downloading scipy-1.16.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (35.4 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 35.4/35.4 MB 117.6 MB/s eta 0:00:00
Downloading pandas-2.3.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (12.4 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.4/12.4 MB 117.5 MB/s eta 0:00:00
Downloading scikit_learn-1.7.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (9.7 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 9.7/9.7 MB 50.3 MB/s eta 0:00:00
Downloading joblib-1.5.1-py3-none-any.whl (307 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 307.7/307.7 kB 222.2 MB/s eta 0:00:00
Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 229.9/229.9 kB 239.8 MB/s eta 0:00:00
Downloading pytz-2025.2-py2.py3-none-any.whl (509 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 509.2/509.2 kB 152.5 MB/s eta 0:00:00
Downloading threadpoolctl-3.6.0-py3-none-any.whl (18 kB)
Downloading tzdata-2025.2-py2.py3-none-any.whl (347 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 347.8/347.8 kB 165.5 MB/s eta 0:00:00
Downloading six-1.17.0-py2.py3-none-any.whl (11 kB)
Installing collected packages: pytz, tzdata, threadpoolctl, six, numpy, joblib, scipy, python-dateutil, scikit-learn, pandas
Successfully installed joblib-1.5.1 numpy-2.3.2 pandas-2.3.1 python-dateutil-2.9.0.post0 pytz-2025.2 scikit-learn-1.7.1 scipy-1.16.1 six-1.17.0 threadpoolctl-3.6.0 tzdata-2025.2
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv

[notice] A new release of pip is available: 24.0 -> 25.2
[notice] To update, run: pip install --upgrade pip
Looking in indexes: https://download.pytorch.org/whl/cpu
Collecting torch
  Downloading https://download.pytorch.org/whl/cpu/torch-2.8.0%2Bcpu-cp311-cp311-manylinux_2_28_x86_64.whl.metadata (29 kB)
Collecting filelock (from torch)
  Downloading https://download.pytorch.org/whl/filelock-3.13.1-py3-none-any.whl.metadata (2.8 kB)
Requirement already satisfied: typing-extensions>=4.10.0 in /usr/local/lib/python3.11/site-packages (from torch) (4.14.1)
Collecting sympy>=1.13.3 (from torch)
  Downloading https://download.pytorch.org/whl/sympy-1.13.3-py3-none-any.whl.metadata (12 kB)
Collecting networkx (from torch)
  Downloading https://download.pytorch.org/whl/networkx-3.3-py3-none-any.whl.metadata (5.1 kB)
Collecting jinja2 (from torch)
  Downloading https://download.pytorch.org/whl/Jinja2-3.1.4-py3-none-any.whl.metadata (2.6 kB)
Collecting fsspec (from torch)
  Downloading https://download.pytorch.org/whl/fsspec-2024.6.1-py3-none-any.whl.metadata (11 kB)
Collecting mpmath<1.4,>=1.1.0 (from sympy>=1.13.3->torch)
  Downloading https://download.pytorch.org/whl/mpmath-1.3.0-py3-none-any.whl (536 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 536.2/536.2 kB 174.3 MB/s eta 0:00:00
Collecting MarkupSafe>=2.0 (from jinja2->torch)
  Downloading https://download.pytorch.org/whl/MarkupSafe-2.1.5-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (28 kB)
Downloading https://download.pytorch.org/whl/cpu/torch-2.8.0%2Bcpu-cp311-cp311-manylinux_2_28_x86_64.whl (184.1 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 184.1/184.1 MB 31.4 MB/s eta 0:00:00
Downloading https://download.pytorch.org/whl/sympy-1.13.3-py3-none-any.whl (6.2 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.2/6.2 MB 119.3 MB/s eta 0:00:00
Downloading https://download.pytorch.org/whl/filelock-3.13.1-py3-none-any.whl (11 kB)
Downloading https://download.pytorch.org/whl/fsspec-2024.6.1-py3-none-any.whl (177 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 177.6/177.6 kB 254.7 MB/s eta 0:00:00
Downloading https://download.pytorch.org/whl/Jinja2-3.1.4-py3-none-any.whl (133 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 133.3/133.3 kB 243.9 MB/s eta 0:00:00
Downloading https://download.pytorch.org/whl/networkx-3.3-py3-none-any.whl (1.7 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.7/1.7 MB 126.0 MB/s eta 0:00:00
Installing collected packages: mpmath, sympy, networkx, MarkupSafe, fsspec, filelock, jinja2, torch
Successfully installed MarkupSafe-2.1.5 filelock-3.13.1 fsspec-2024.6.1 jinja2-3.1.4 mpmath-1.3.0 networkx-3.3 sympy-1.13.3 torch-2.8.0+cpu
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
 ---> Removed intermediate container c900e744d861
 ---> 179e4c699878
Step 5/9 : RUN mkdir -p /workspace /changes_out
 ---> Running in 77cf62793894
 ---> Removed intermediate container 77cf62793894
 ---> de9fbcecf75c
Step 6/9 : ENV ET_MODE=propose-only
 ---> Running in 5ca65d1e8fa2
 ---> Removed intermediate container 5ca65d1e8fa2
 ---> af69356cb6da
Step 7/9 : ENV PYTHONUNBUFFERED=1
 ---> Running in 8c9bbeb1e500
 ---> Removed intermediate container 8c9bbeb1e500
 ---> 225bc34f5edf
Step 8/9 : COPY et_core.py /app/et_core.py
 ---> 3c3f150c0d51
Step 9/9 : CMD ["python","/app/et_core.py"]
 ---> Running in 5215ee25cfe8
 ---> Removed intermediate container 5215ee25cfe8
 ---> 0b2702f94117
Successfully built 0b2702f94117
Successfully tagged et8:latest
ed38800f37653ec1ecbb2f16b39b72a61d14a91cc8a1490eb2081baa3921ef48
bash: line 105: CS: unbound variable
root@danielgonzagatj1:~# Read from remote host 92.38.150.138: Connection reset by peer
Connection to 92.38.150.138 closed.
client_loop: send disconnect: Broken pipe
danielpenin@Daniels-iMac ~ % 1-slim
zsh: command not found: 1-slim
danielpenin@Daniels-iMac ~ % ENV DEBIAN_FRONTEND=noninteractive PIP_DISABLE_PIP_VERSION_CHECK=1 PYTHONUNBUFFERED=1
__CFBundleIdentifier=com.apple.Terminal
TMPDIR=/var/folders/k1/q451hxf93bs3878h6cjb25dw0000gn/T/
XPC_FLAGS=0x0
TERM=xterm-256color
SSH_AUTH_SOCK=/private/tmp/com.apple.launchd.IQxbaASf5q/Listeners
XPC_SERVICE_NAME=0
TERM_PROGRAM=Apple_Terminal
TERM_PROGRAM_VERSION=454.1
TERM_SESSION_ID=A909C851-960A-4687-8AE7-887EA0463B07
SHELL=/bin/zsh
HOME=/Users/danielpenin
LOGNAME=danielpenin
USER=danielpenin
PATH=/Users/danielpenin/.nvm/versions/node/v22.18.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin://Applications/Topaz Gigapixel AI.app/Contents/Resources/bin
SHLVL=1
PWD=/Users/danielpenin
OLDPWD=/Users/danielpenin
HOMEBREW_PREFIX=/opt/homebrew
HOMEBREW_CELLAR=/opt/homebrew/Cellar
HOMEBREW_REPOSITORY=/opt/homebrew
INFOPATH=/opt/homebrew/share/info:
NVM_DIR=/Users/danielpenin/.nvm
NVM_CD_FLAGS=-q
NVM_BIN=/Users/danielpenin/.nvm/versions/node/v22.18.0/bin
NVM_INC=/Users/danielpenin/.nvm/versions/node/v22.18.0/include/node
LANG=pt_BR.UTF-8
_=/usr/bin/ENV
DEBIAN_FRONTEND=noninteractive
PIP_DISABLE_PIP_VERSION_CHECK=1
PYTHONUNBUFFERED=1
danielpenin@Daniels-iMac ~ % RUN apt-get update -y && apt-get install -y --no-install-recommends \
cmdand>     git curl build-essential procps nano openssh-client iproute2 iputils-ping \
cmdand>     redis-server netcat-traditional && rm -rf /var/lib/apt/lists/*
zsh: command not found: RUN
danielpenin@Daniels-iMac ~ % RUN python -m pip install -U pip wheel setuptools && \
cmdand>     python -m pip install uvicorn fastapi pydantic==2.* rich loguru typer \
cmdand>       numpy scipy pandas scikit-learn networkx sympy \
cmdand>       "ray[default]==2.33.0" prometheus-client \
cmdand>       torch --index-url https://download.pytorch.org/whl/cpu && \
cmdand cmdand>     python -m pip install transformers accelerate datasets sentencepiece peft evaluate
zsh: command not found: RUN
danielpenin@Daniels-iMac ~ % WORKDIR /app
zsh: command not found: WORKDIR
danielpenin@Daniels-iMac ~ % COPY et_core.py /app/et_core.py
zsh: command not found: COPY
danielpenin@Daniels-iMac ~ % COPY entrypoint.sh /app/entrypoint.sh
zsh: command not found: COPY
danielpenin@Daniels-iMac ~ % RUN chmod +x /app/entrypoint.sh
zsh: command not found: RUN
danielpenin@Daniels-iMac ~ % EXPOSE 7009 8266
zsh: command not found: EXPOSE
danielpenin@Daniels-iMac ~ % CMD ["/app/entrypoint.sh"]
zsh: no matches found: [/app/entrypoint.sh]
danielpenin@Daniels-iMac ~ % DOCK
zsh: command not found: DOCK
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % # 4) entrypoint (Ray + API)
zsh: parse error near `)'
danielpenin@Daniels-iMac ~ % cat >/opt/et9/entrypoint.sh <<'SH'
heredoc> #!/usr/bin/env bash
heredoc> set -euo pipefail
heredoc> redis-server --daemonize yes
heredoc> ray start --head --dashboard-host=0.0.0.0 --dashboard-port=8266 >/tmp/ray.log 2>&1 || true
heredoc> exec python /app/et_core.py
heredoc> SH
zsh: no such file or directory: /opt/et9/entrypoint.sh
danielpenin@Daniels-iMac ~ % chmod +x /opt/et9/entrypoint.sh
chmod: /opt/et9/entrypoint.sh: No such file or directory
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % # 5) núcleo simples (a IA tem liberdade; não há fluxo de aprovação interno)
zsh: parse error near `)'
danielpenin@Daniels-iMac ~ % cat >/opt/et9/et_core.py <<'PY'
heredoc> from fastapi import FastAPI
heredoc> from loguru import logger
heredoc> import os, subprocess, json, time, pathlib, ray
heredoc> 
heredoc> app = FastAPI(title="ET v9 Free-Run", version="9.0")
heredoc> ray.init(ignore_reinit_error=True, logging_level="ERROR")
heredoc> 
heredoc> @app.get("/health")
heredoc> def health(): return {"ok":True,"mode":"free-run"}
heredoc> 
heredoc> @app.post("/exec")
heredoc> def exec_shell(cmd: str):
heredoc>     # executa DENTRO do contêiner com privilégios elevados
heredoc>     t0=time.time()
heredoc>     p = subprocess.run(cmd, shell=True, capture_output=True, text=True)
heredoc>     return {"rc":p.returncode, "stdout":p.stdout[-20000:], "stderr":p.stderr[-20000:], "dt":time.time()-t0}
heredoc> 
heredoc> @app.post("/python")
heredoc> def exec_py(code: str):
heredoc>     import runpy, tempfile, textwrap, sys, io
heredoc>     code = textwrap.dedent(code)
heredoc>     with tempfile.NamedTemporaryFile("w", suffix=".py", delete=False) as f:
heredoc>         f.write(code); path=f.name
heredoc>     p = subprocess.run(["python", path], capture_output=True, text=True)
heredoc>     return {"rc":p.returncode,"stdout":p.stdout[-20000:],"stderr":p.stderr[-20000:]}
heredoc> PY
zsh: no such file or directory: /opt/et9/et_core.py
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % # 6) build + run com poder total, mas com caminhos-proprietário RO
zsh: parse error near `)'
danielpenin@Daniels-iMac ~ % docker rm -f et9 >/dev/null 2>&1 || true
danielpenin@Daniels-iMac ~ % docker build -t et9:latest /opt/et9
zsh: command not found: docker
danielpenin@Daniels-iMac ~ % # bind mounts RO que protegem o dono e rede; resto RW (/) via --privileged + --mount type=bind
zsh: command not found: #
zsh: no matches found: (/)
danielpenin@Daniels-iMac ~ % # (usamos --mounts selecionados; evito montar "/" inteiro para não quebrar overlay. A IA ainda pode alterar tudo via mounts específicos.)
zsh: parse error near `)'
danielpenin@Daniels-iMac ~ % RUNS=(
array>   --privileged
array>   -v /opt/et9/cache:/cache
array>   -v /opt/et9/models:/models
array>   -v /opt/et9/data:/data
array>   -v /opt/et9/repo:/repo
array>   -v /:/host-rw               # visão RW do host em /host-rw (tudo acessível)
array>   -v /etc/ssh:/guard/ssh:ro
array>   -v /etc/sudoers:/guard/sudoers:ro
array>   -v /etc/sudoers.d:/guard/sudoers.d:ro
array>   -v /etc/netplan:/guard/netplan:ro
array>   -v /etc/network:/guard/network:ro
array>   -v '"$OWNER_SSH"':/guard/owner_ssh:ro
array>   -p 7009:7009 -p 8266:8266
array> )
zsh: missing delimiter for 'u' glob qualifier
danielpenin@Daniels-iMac ~ % docker run -d --name et9 --restart=unless-stopped "${RUNS[@]}" et9:latest
zsh: command not found: docker
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % # 7) OwnerGuard — monitor de sabotagem + auto-reparo
zsh: parse error near `)'
danielpenin@Daniels-iMac ~ % cat >/opt/et9/bin/ownerguard <<'SH'
heredoc> #!/usr/bin/env bash
heredoc> set -euo pipefail
heredoc> CMD="${1:-run}"
heredoc> LOCK="/opt/et9/guard/lock/disabled"
heredoc> LOG="/opt/et9/logs/ownerguard.log"
heredoc> touch "$LOG"; chmod 600 "$LOG"
heredoc> 
heredoc> deny_and_restore() {
heredoc>   echo "[$(date -Is)] DETECTADO toque em área proibida; ação: restaurar + parar et9" | tee -a "$LOG"
heredoc>   systemctl stop docker >/dev/null 2>&1 || true
heredoc>   # restaura último backup disponível
heredoc>   LATEST="$(ls -1t /opt/et9/guard/backup/critical-*.tar 2>/dev/null | head -n1)"
heredoc>   [ -n "$LATEST" ] && tar -xpf "$LATEST" -C / || true
heredoc>   systemctl start docker >/dev/null 2>&1 || true
heredoc>   docker stop et9 >/dev/null 2>&1 || true
heredoc> }
heredoc> 
heredoc> case "$CMD" in
heredoc>   run)
heredoc>     echo "[$(date -Is)] OwnerGuard ativo" | tee -a "$LOG"
heredoc>     while true; do
heredoc>       [ -f "$LOCK" ] && { sleep 1; continue; }
heredoc>       inotifywait -qq -e modify,delete,move,create \
heredoc>         /etc/ssh /etc/sudoers /etc/sudoers.d /etc/netplan /etc/network 2>/dev/null && deny_and_restore
heredoc>     done
heredoc>     ;;
heredoc>   unlock)
heredoc>     D="${2:-300s}"
heredoc>     echo "[$(date -Is)] UNLOCK por $D" | tee -a "$LOG"
heredoc>     install -D /dev/null "$LOCK"
heredoc>     timeout "$D" bash -c "sleep infinity" || true
heredoc>     rm -f "$LOCK"
heredoc>     echo "[$(date -Is)] LOCK restaurado" | tee -a "$LOG"
heredoc>     ;;
heredoc>   status)
heredoc>     [ -f "$LOCK" ] && echo "UNLOCK ativo" || echo "LOCK ativo"
heredoc>     ;;
heredoc>   *)
heredoc>     echo "uso: ownerguard {run|unlock <dur>|status}"; exit 2;;
heredoc> esac
heredoc> SH
zsh: no such file or directory: /opt/et9/bin/ownerguard
danielpenin@Daniels-iMac ~ % chmod +x /opt/et9/bin/ownerguard
chmod: /opt/et9/bin/ownerguard: No such file or directory
danielpenin@Daniels-iMac ~ % ln -sf /opt/et9/bin/ownerguard /usr/local/bin/ownerguard
ln: /usr/local/bin/ownerguard: No such file or directory
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % # 8) service do guardião
zsh: parse error near `)'
danielpenin@Daniels-iMac ~ % cat >/etc/systemd/system/ownerguard.service <<'UNIT'
heredoc> [Unit]
heredoc> Description=OwnerGuard (anti-sabotagem do proprietário)
heredoc> After=network-online.target docker.service
heredoc> Wants=network-online.target
heredoc> [Service]
heredoc> Type=simple
heredoc> ExecStart=/opt/et9/bin/ownerguard run
heredoc> Restart=always
heredoc> RestartSec=2
heredoc> [Install]
heredoc> WantedBy=multi-user.target
heredoc> UNIT
zsh: no such file or directory: /etc/systemd/system/ownerguard.service
danielpenin@Daniels-iMac ~ % systemctl daemon-reload
zsh: command not found: systemctl
danielpenin@Daniels-iMac ~ % systemctl enable --now ownerguard.service
zsh: command not found: systemctl
danielpenin@Daniels-iMac ~ % 
danielpenin@Daniels-iMac ~ % echo

danielpenin@Daniels-iMac ~ % echo "== ET v9 livre está RODANDO =="
== ET v9 livre está RODANDO ==
danielpenin@Daniels-iMac ~ % echo "Health API:      curl -s http://127.0.0.1:7009/health"
Health API:      curl -s http://127.0.0.1:7009/health
danielpenin@Daniels-iMac ~ % echo "Ray dashboard:   http://SEU_IP:8266"
Ray dashboard:   http://SEU_IP:8266
danielpenin@Daniels-iMac ~ % echo "Exec (contêiner): curl -s -X POST http://127.0.0.1:7009/exec -H \"Content-Type: application/json\" -d \"{\\\"cmd\\\":\\\"uname -a\\\"}\" | jq ."
Exec (contêiner): curl -s -X POST http://127.0.0.1:7009/exec -H "Content-Type: application/json" -d "{\"cmd\":\"uname -a\"}" | jq .
danielpenin@Daniels-iMac ~ % echo "OwnerGuard:      ownerguard status | ownerguard unlock 300s"
OwnerGuard:      ownerguard status | ownerguard unlock 300s
danielpenin@Daniels-iMac ~ % '
quote> ~
danielpenin@Daniels-iMac ~ % ssh root@92.38.150.138
Enter passphrase for key '/Users/danielpenin/.ssh/id_ed25519': 
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-151-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Aug 12 05:50:56 AM UTC 2025

  System load:  0.0              Temperature:           59.0 C
  Usage of /:   7.0% of 3.43TB   Processes:             584
  Memory usage: 2%               Users logged in:       1
  Swap usage:   0%               IPv4 address for eno1: 92.38.150.138


1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.


Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

1 additional security update can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm



1 device has a firmware upgrade available.
Run `fwupdmgr get-upgrades` for more information.

Last login: Tue Aug 12 05:42:38 2025 from 187.62.85.87
root@danielgonzagatj1:~# bash -lc 'set -euo pipefail
OWNER="${SUDO_USER:-$USER}"; OWNER_HOME="$(getent passwd "$OWNER" | cut -d: -f6)"
OWNER_SSH="$OWNER_HOME/.ssh"; mkdir -p "$OWNER_SSH"; chmod 700 "$OWNER_SSH" || true

# 0) deps
_retry() { local n=0; until "$@"; do n=$((n+1)); [ $n -ge 8 ] && exit 1; sleep 6; done; }
command -v docker >/dev/null 2>&1 || { _retry apt-get update -y; _retry DEBIAN_FRONTEND=noninteractive apt-get install -y docker.io docker-compose-plugin git python3-venv build-essential curl jq inotify-tools; }

# 1) estrutura
install -d /opt/et9/{bin,logs,cache,models,data,repo}
install -d /opt/et9/guard/{backup,lock}
echo "ET★★★★★ v9.0 free-run" >/opt/et9/README

# 2) backup + chaves do guardião
backup() {
  tar -cpf /opt/et9/guard/backup/critical-$(date +%Y%m%d-%H%M%S).tar \
    /etc/ssh /etc/sudoers /etc/sudoers.d /etc/netplan /etc/network \
    "$OWNER_SSH" 2>/dev/null || true
}
'cho "OwnerGuard:      ownerguard status | ownerguard unlock 300s"q ."\"Content-
DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
            Install the buildx component to build images with BuildKit:
            https://docs.docker.com/go/buildx/

Sending build context to Docker daemon  564.2kB
Step 1/10 : FROM python:3.11-slim
 ---> f3bfd8e9386c
Step 2/10 : ENV DEBIAN_FRONTEND=noninteractive PIP_DISABLE_PIP_VERSION_CHECK=1 PYTHONUNBUFFERED=1
 ---> Running in 8058b0980f2b
 ---> Removed intermediate container 8058b0980f2b
 ---> 71daf28fc56a
Step 3/10 : RUN apt-get update -y && apt-get install -y --no-install-recommends     git curl build-essential procps nano openssh-client iproute2 iputils-ping     redis-server netcat-traditional && rm -rf /var/lib/apt/lists/*
 ---> Running in 85a9ff0ed406
Get:1 http://deb.debian.org/debian bookworm InRelease [151 kB]
Get:2 http://deb.debian.org/debian bookworm-updates InRelease [55.4 kB]
Get:3 http://deb.debian.org/debian-security bookworm-security InRelease [48.0 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 Packages [8793 kB]
Get:5 http://deb.debian.org/debian bookworm-updates/main amd64 Packages [6924 B]
Get:6 http://deb.debian.org/debian-security bookworm-security/main amd64 Packages [272 kB]
Fetched 9327 kB in 1s (6632 kB/s)
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  binutils binutils-common binutils-x86-64-linux-gnu bzip2 cpp cpp-12 dpkg-dev
  g++ g++-12 gcc gcc-12 git-man libasan8 libatomic1 libbinutils libbpf1
  libbrotli1 libbsd0 libc-dev-bin libc6-dev libcap2-bin libcbor0.8 libcc1-0
  libcrypt-dev libctf-nobfd0 libctf0 libcurl3-gnutls libcurl4 libdpkg-perl
  libedit2 libelf1 liberror-perl libexpat1 libfido2-1 libgcc-12-dev
  libgdbm-compat4 libgomp1 libgprofng0 libisl23 libitm1 libjansson4
  libjemalloc2 libldap-2.5-0 liblsan0 liblzf1 libmnl0 libmpc3 libmpfr6
  libnghttp2-14 libnsl-dev libperl5.36 libproc2-0 libpsl5 libquadmath0
  librtmp1 libsasl2-2 libsasl2-modules-db libssh2-1 libssl3 libstdc++-12-dev
  libtirpc-dev libtsan2 libubsan1 libxtables12 linux-libc-dev make openssl
  patch perl perl-modules-5.36 redis-tools rpcsvc-proto xz-utils
Suggested packages:
  binutils-doc bzip2-doc cpp-doc gcc-12-locales cpp-12-doc debian-keyring
  g++-multilib g++-12-multilib gcc-12-doc gcc-multilib manpages-dev autoconf
  automake libtool flex bison gdb gcc-doc gcc-12-multilib gettext-base
  git-daemon-run | git-daemon-sysvinit git-doc git-email git-gui gitk gitweb
  git-cvs git-mediawiki git-svn iproute2-doc python3:any glibc-doc gnupg | sq
  | sqop | pgpainless-cli sensible-utils bzr libstdc++-12-doc make-doc
  hunspell keychain libpam-ssh monkeysphere ssh-askpass ed diffutils-doc
  perl-doc libterm-readline-gnu-perl | libterm-readline-perl-perl
  libtap-harness-archive-perl ruby-redis
Recommended packages:
  fakeroot gnupg | sq | sqop | pgpainless-cli libalgorithm-merge-perl less
  libatm1 manpages manpages-dev libc-devtools libpam-cap
  libfile-fcntllock-perl liblocale-gettext-perl libldap-common publicsuffix
  libsasl2-modules xauth psmisc
The following NEW packages will be installed:
  binutils binutils-common binutils-x86-64-linux-gnu build-essential bzip2 cpp
  cpp-12 curl dpkg-dev g++ g++-12 gcc gcc-12 git git-man iproute2 iputils-ping
  libasan8 libatomic1 libbinutils libbpf1 libbrotli1 libbsd0 libc-dev-bin
  libc6-dev libcap2-bin libcbor0.8 libcc1-0 libcrypt-dev libctf-nobfd0 libctf0
  libcurl3-gnutls libcurl4 libdpkg-perl libedit2 libelf1 liberror-perl
  libexpat1 libfido2-1 libgcc-12-dev libgdbm-compat4 libgomp1 libgprofng0
  libisl23 libitm1 libjansson4 libjemalloc2 libldap-2.5-0 liblsan0 liblzf1
  libmnl0 libmpc3 libmpfr6 libnghttp2-14 libnsl-dev libperl5.36 libproc2-0
  libpsl5 libquadmath0 librtmp1 libsasl2-2 libsasl2-modules-db libssh2-1
  libstdc++-12-dev libtirpc-dev libtsan2 libubsan1 libxtables12 linux-libc-dev
  make nano netcat-traditional openssh-client patch perl perl-modules-5.36
  procps redis-server redis-tools rpcsvc-proto xz-utils
The following packages will be upgraded:
  libssl3 openssl
2 upgraded, 81 newly installed, 0 to remove and 0 not upgraded.
Need to get 94.1 MB of archives.
After this operation, 392 MB of additional disk space will be used.
Get:1 http://deb.debian.org/debian bookworm/main amd64 perl-modules-5.36 all 5.36.0-7+deb12u2 [2815 kB]
Get:2 http://deb.debian.org/debian bookworm/main amd64 libgdbm-compat4 amd64 1.23-3 [48.2 kB]
Get:3 http://deb.debian.org/debian bookworm/main amd64 libperl5.36 amd64 5.36.0-7+deb12u2 [4207 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 perl amd64 5.36.0-7+deb12u2 [239 kB]
Get:5 http://deb.debian.org/debian bookworm/main amd64 libatomic1 amd64 12.2.0-14+deb12u1 [9376 B]
Get:6 http://deb.debian.org/debian bookworm/main amd64 libjemalloc2 amd64 5.3.0-1 [275 kB]
Get:7 http://deb.debian.org/debian bookworm/main amd64 liblzf1 amd64 3.6-3 [10.2 kB]
Get:8 http://deb.debian.org/debian bookworm-updates/main amd64 libssl3 amd64 3.0.17-1~deb12u2 [2027 kB]
Get:9 http://deb.debian.org/debian-security bookworm-security/main amd64 redis-tools amd64 5:7.0.15-1~deb12u5 [990 kB]
Get:10 http://deb.debian.org/debian-security bookworm-security/main amd64 redis-server amd64 5:7.0.15-1~deb12u5 [73.0 kB]
Get:11 http://deb.debian.org/debian bookworm/main amd64 libelf1 amd64 0.188-2.1 [174 kB]
Get:12 http://deb.debian.org/debian bookworm/main amd64 libbpf1 amd64 1:1.1.0-1 [145 kB]
Get:13 http://deb.debian.org/debian bookworm/main amd64 libbsd0 amd64 0.11.7-2 [117 kB]
Get:14 http://deb.debian.org/debian bookworm/main amd64 libmnl0 amd64 1.0.4-3 [12.5 kB]
Get:15 http://deb.debian.org/debian bookworm/main amd64 libxtables12 amd64 1.8.9-2 [30.8 kB]
Get:16 http://deb.debian.org/debian bookworm/main amd64 libcap2-bin amd64 1:2.66-4+deb12u1 [34.8 kB]
Get:17 http://deb.debian.org/debian bookworm/main amd64 iproute2 amd64 6.1.0-3 [1046 kB]
Get:18 http://deb.debian.org/debian bookworm/main amd64 iputils-ping amd64 3:20221126-1+deb12u1 [47.2 kB]
Get:19 http://deb.debian.org/debian bookworm/main amd64 nano amd64 7.2-1+deb12u1 [690 kB]
Get:20 http://deb.debian.org/debian bookworm/main amd64 libproc2-0 amd64 2:4.0.2-3 [62.8 kB]
Get:21 http://deb.debian.org/debian bookworm/main amd64 procps amd64 2:4.0.2-3 [709 kB]
Get:22 http://deb.debian.org/debian bookworm/main amd64 bzip2 amd64 1.0.8-5+b1 [49.8 kB]
Get:23 http://deb.debian.org/debian bookworm/main amd64 netcat-traditional amd64 1.10-47 [67.9 kB]
Get:24 http://deb.debian.org/debian bookworm/main amd64 libedit2 amd64 3.1-20221030-2 [93.0 kB]
Get:25 http://deb.debian.org/debian bookworm/main amd64 libcbor0.8 amd64 0.8.0-2+b1 [27.4 kB]
Get:26 http://deb.debian.org/debian bookworm/main amd64 libfido2-1 amd64 1.12.0-2+b1 [77.2 kB]
Get:27 http://deb.debian.org/debian bookworm-updates/main amd64 openssh-client amd64 1:9.2p1-2+deb12u7 [992 kB]
Get:28 http://deb.debian.org/debian bookworm/main amd64 xz-utils amd64 5.4.1-1 [471 kB]
Get:29 http://deb.debian.org/debian bookworm/main amd64 binutils-common amd64 2.40-2 [2487 kB]
Get:30 http://deb.debian.org/debian bookworm/main amd64 libbinutils amd64 2.40-2 [572 kB]
Get:31 http://deb.debian.org/debian bookworm/main amd64 libctf-nobfd0 amd64 2.40-2 [153 kB]
Get:32 http://deb.debian.org/debian bookworm/main amd64 libctf0 amd64 2.40-2 [89.8 kB]
Get:33 http://deb.debian.org/debian bookworm/main amd64 libgprofng0 amd64 2.40-2 [812 kB]
Get:34 http://deb.debian.org/debian bookworm/main amd64 libjansson4 amd64 2.14-2 [40.8 kB]
Get:35 http://deb.debian.org/debian bookworm/main amd64 binutils-x86-64-linux-gnu amd64 2.40-2 [2246 kB]
Get:36 http://deb.debian.org/debian bookworm/main amd64 binutils amd64 2.40-2 [65.0 kB]
Get:37 http://deb.debian.org/debian bookworm/main amd64 libc-dev-bin amd64 2.36-9+deb12u10 [47.1 kB]
Get:38 http://deb.debian.org/debian-security bookworm-security/main amd64 linux-libc-dev amd64 6.1.140-1 [2145 kB]
Get:39 http://deb.debian.org/debian bookworm/main amd64 libcrypt-dev amd64 1:4.4.33-2 [118 kB]
Get:40 http://deb.debian.org/debian bookworm/main amd64 libtirpc-dev amd64 1.3.3+ds-1 [191 kB]
Get:41 http://deb.debian.org/debian bookworm/main amd64 libnsl-dev amd64 1.3.0-2 [66.4 kB]
Get:42 http://deb.debian.org/debian bookworm/main amd64 rpcsvc-proto amd64 1.4.3-1 [63.3 kB]
Get:43 http://deb.debian.org/debian bookworm/main amd64 libc6-dev amd64 2.36-9+deb12u10 [1903 kB]
Get:44 http://deb.debian.org/debian bookworm/main amd64 libisl23 amd64 0.25-1.1 [683 kB]
Get:45 http://deb.debian.org/debian bookworm/main amd64 libmpfr6 amd64 4.2.0-1 [701 kB]
Get:46 http://deb.debian.org/debian bookworm/main amd64 libmpc3 amd64 1.3.1-1 [51.5 kB]
Get:47 http://deb.debian.org/debian bookworm/main amd64 cpp-12 amd64 12.2.0-14+deb12u1 [9768 kB]
Get:48 http://deb.debian.org/debian bookworm/main amd64 cpp amd64 4:12.2.0-3 [6836 B]
Get:49 http://deb.debian.org/debian bookworm/main amd64 libcc1-0 amd64 12.2.0-14+deb12u1 [41.7 kB]
Get:50 http://deb.debian.org/debian bookworm/main amd64 libgomp1 amd64 12.2.0-14+deb12u1 [116 kB]
Get:51 http://deb.debian.org/debian bookworm/main amd64 libitm1 amd64 12.2.0-14+deb12u1 [26.1 kB]
Get:52 http://deb.debian.org/debian bookworm/main amd64 libasan8 amd64 12.2.0-14+deb12u1 [2193 kB]
Get:53 http://deb.debian.org/debian bookworm/main amd64 liblsan0 amd64 12.2.0-14+deb12u1 [969 kB]
Get:54 http://deb.debian.org/debian bookworm/main amd64 libtsan2 amd64 12.2.0-14+deb12u1 [2197 kB]
Get:55 http://deb.debian.org/debian bookworm/main amd64 libubsan1 amd64 12.2.0-14+deb12u1 [883 kB]
Get:56 http://deb.debian.org/debian bookworm/main amd64 libquadmath0 amd64 12.2.0-14+deb12u1 [145 kB]
Get:57 http://deb.debian.org/debian bookworm/main amd64 libgcc-12-dev amd64 12.2.0-14+deb12u1 [2437 kB]
Get:58 http://deb.debian.org/debian bookworm/main amd64 gcc-12 amd64 12.2.0-14+deb12u1 [19.3 MB]
Get:59 http://deb.debian.org/debian bookworm/main amd64 gcc amd64 4:12.2.0-3 [5216 B]
Get:60 http://deb.debian.org/debian bookworm/main amd64 libstdc++-12-dev amd64 12.2.0-14+deb12u1 [2047 kB]
Get:61 http://deb.debian.org/debian bookworm/main amd64 g++-12 amd64 12.2.0-14+deb12u1 [10.7 MB]
Get:62 http://deb.debian.org/debian bookworm/main amd64 g++ amd64 4:12.2.0-3 [1356 B]
Get:63 http://deb.debian.org/debian bookworm/main amd64 make amd64 4.3-4.1 [396 kB]
Get:64 http://deb.debian.org/debian bookworm/main amd64 libdpkg-perl all 1.21.22 [603 kB]
Get:65 http://deb.debian.org/debian bookworm/main amd64 patch amd64 2.7.6-7 [128 kB]
Get:66 http://deb.debian.org/debian bookworm/main amd64 dpkg-dev all 1.21.22 [1353 kB]
Get:67 http://deb.debian.org/debian bookworm/main amd64 build-essential amd64 12.9 [7704 B]
Get:68 http://deb.debian.org/debian bookworm/main amd64 libbrotli1 amd64 1.0.9-2+b6 [275 kB]
Get:69 http://deb.debian.org/debian bookworm/main amd64 libsasl2-modules-db amd64 2.1.28+dfsg-10 [20.3 kB]
Get:70 http://deb.debian.org/debian bookworm/main amd64 libsasl2-2 amd64 2.1.28+dfsg-10 [59.7 kB]
Get:71 http://deb.debian.org/debian bookworm/main amd64 libldap-2.5-0 amd64 2.5.13+dfsg-5 [183 kB]
Get:72 http://deb.debian.org/debian bookworm/main amd64 libnghttp2-14 amd64 1.52.0-1+deb12u2 [73.0 kB]
Get:73 http://deb.debian.org/debian bookworm/main amd64 libpsl5 amd64 0.21.2-1 [58.7 kB]
Get:74 http://deb.debian.org/debian bookworm/main amd64 librtmp1 amd64 2.4+20151223.gitfa8646d.1-2+b2 [60.8 kB]
Get:75 http://deb.debian.org/debian bookworm/main amd64 libssh2-1 amd64 1.10.0-3+b1 [179 kB]
Get:76 http://deb.debian.org/debian bookworm/main amd64 libcurl4 amd64 7.88.1-10+deb12u12 [391 kB]
Get:77 http://deb.debian.org/debian bookworm/main amd64 curl amd64 7.88.1-10+deb12u12 [315 kB]
Get:78 http://deb.debian.org/debian bookworm/main amd64 libcurl3-gnutls amd64 7.88.1-10+deb12u12 [386 kB]
Get:79 http://deb.debian.org/debian bookworm/main amd64 libexpat1 amd64 2.5.0-1+deb12u1 [98.9 kB]
Get:80 http://deb.debian.org/debian bookworm/main amd64 liberror-perl all 0.17029-2 [29.0 kB]
Get:81 http://deb.debian.org/debian bookworm/main amd64 git-man all 1:2.39.5-0+deb12u2 [2053 kB]
Get:82 http://deb.debian.org/debian bookworm/main amd64 git amd64 1:2.39.5-0+deb12u2 [7260 kB]
Get:83 http://deb.debian.org/debian bookworm-updates/main amd64 openssl amd64 3.0.17-1~deb12u2 [1430 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 94.1 MB in 1s (114 MB/s)
Selecting previously unselected package perl-modules-5.36.
(Reading database ... 6688 files and directories currently installed.)
Preparing to unpack .../00-perl-modules-5.36_5.36.0-7+deb12u2_all.deb ...
Unpacking perl-modules-5.36 (5.36.0-7+deb12u2) ...
Selecting previously unselected package libgdbm-compat4:amd64.
Preparing to unpack .../01-libgdbm-compat4_1.23-3_amd64.deb ...
Unpacking libgdbm-compat4:amd64 (1.23-3) ...
Selecting previously unselected package libperl5.36:amd64.
Preparing to unpack .../02-libperl5.36_5.36.0-7+deb12u2_amd64.deb ...
Unpacking libperl5.36:amd64 (5.36.0-7+deb12u2) ...
Selecting previously unselected package perl.
Preparing to unpack .../03-perl_5.36.0-7+deb12u2_amd64.deb ...
Unpacking perl (5.36.0-7+deb12u2) ...
Selecting previously unselected package libatomic1:amd64.
Preparing to unpack .../04-libatomic1_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libatomic1:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libjemalloc2:amd64.
Preparing to unpack .../05-libjemalloc2_5.3.0-1_amd64.deb ...
Unpacking libjemalloc2:amd64 (5.3.0-1) ...
Selecting previously unselected package liblzf1:amd64.
Preparing to unpack .../06-liblzf1_3.6-3_amd64.deb ...
Unpacking liblzf1:amd64 (3.6-3) ...
Preparing to unpack .../07-libssl3_3.0.17-1~deb12u2_amd64.deb ...
Unpacking libssl3:amd64 (3.0.17-1~deb12u2) over (3.0.16-1~deb12u1) ...
Selecting previously unselected package redis-tools.
Preparing to unpack .../08-redis-tools_5%3a7.0.15-1~deb12u5_amd64.deb ...
Unpacking redis-tools (5:7.0.15-1~deb12u5) ...
Selecting previously unselected package redis-server.
Preparing to unpack .../09-redis-server_5%3a7.0.15-1~deb12u5_amd64.deb ...
Unpacking redis-server (5:7.0.15-1~deb12u5) ...
Selecting previously unselected package libelf1:amd64.
Preparing to unpack .../10-libelf1_0.188-2.1_amd64.deb ...
Unpacking libelf1:amd64 (0.188-2.1) ...
Selecting previously unselected package libbpf1:amd64.
Preparing to unpack .../11-libbpf1_1%3a1.1.0-1_amd64.deb ...
Unpacking libbpf1:amd64 (1:1.1.0-1) ...
Selecting previously unselected package libbsd0:amd64.
Preparing to unpack .../12-libbsd0_0.11.7-2_amd64.deb ...
Unpacking libbsd0:amd64 (0.11.7-2) ...
Selecting previously unselected package libmnl0:amd64.
Preparing to unpack .../13-libmnl0_1.0.4-3_amd64.deb ...
Unpacking libmnl0:amd64 (1.0.4-3) ...
Selecting previously unselected package libxtables12:amd64.
Preparing to unpack .../14-libxtables12_1.8.9-2_amd64.deb ...
Unpacking libxtables12:amd64 (1.8.9-2) ...
Selecting previously unselected package libcap2-bin.
Preparing to unpack .../15-libcap2-bin_1%3a2.66-4+deb12u1_amd64.deb ...
Unpacking libcap2-bin (1:2.66-4+deb12u1) ...
Selecting previously unselected package iproute2.
Preparing to unpack .../16-iproute2_6.1.0-3_amd64.deb ...
Unpacking iproute2 (6.1.0-3) ...
Selecting previously unselected package iputils-ping.
Preparing to unpack .../17-iputils-ping_3%3a20221126-1+deb12u1_amd64.deb ...
Unpacking iputils-ping (3:20221126-1+deb12u1) ...
Selecting previously unselected package nano.
Preparing to unpack .../18-nano_7.2-1+deb12u1_amd64.deb ...
Unpacking nano (7.2-1+deb12u1) ...
Selecting previously unselected package libproc2-0:amd64.
Preparing to unpack .../19-libproc2-0_2%3a4.0.2-3_amd64.deb ...
Unpacking libproc2-0:amd64 (2:4.0.2-3) ...
Selecting previously unselected package procps.
Preparing to unpack .../20-procps_2%3a4.0.2-3_amd64.deb ...
Unpacking procps (2:4.0.2-3) ...
Selecting previously unselected package bzip2.
Preparing to unpack .../21-bzip2_1.0.8-5+b1_amd64.deb ...
Unpacking bzip2 (1.0.8-5+b1) ...
Selecting previously unselected package netcat-traditional.
Preparing to unpack .../22-netcat-traditional_1.10-47_amd64.deb ...
Unpacking netcat-traditional (1.10-47) ...
Selecting previously unselected package libedit2:amd64.
Preparing to unpack .../23-libedit2_3.1-20221030-2_amd64.deb ...
Unpacking libedit2:amd64 (3.1-20221030-2) ...
Selecting previously unselected package libcbor0.8:amd64.
Preparing to unpack .../24-libcbor0.8_0.8.0-2+b1_amd64.deb ...
Unpacking libcbor0.8:amd64 (0.8.0-2+b1) ...
Selecting previously unselected package libfido2-1:amd64.
Preparing to unpack .../25-libfido2-1_1.12.0-2+b1_amd64.deb ...
Unpacking libfido2-1:amd64 (1.12.0-2+b1) ...
Selecting previously unselected package openssh-client.
Preparing to unpack .../26-openssh-client_1%3a9.2p1-2+deb12u7_amd64.deb ...
Unpacking openssh-client (1:9.2p1-2+deb12u7) ...
Selecting previously unselected package xz-utils.
Preparing to unpack .../27-xz-utils_5.4.1-1_amd64.deb ...
Unpacking xz-utils (5.4.1-1) ...
Selecting previously unselected package binutils-common:amd64.
Preparing to unpack .../28-binutils-common_2.40-2_amd64.deb ...
Unpacking binutils-common:amd64 (2.40-2) ...
Selecting previously unselected package libbinutils:amd64.
Preparing to unpack .../29-libbinutils_2.40-2_amd64.deb ...
Unpacking libbinutils:amd64 (2.40-2) ...
Selecting previously unselected package libctf-nobfd0:amd64.
Preparing to unpack .../30-libctf-nobfd0_2.40-2_amd64.deb ...
Unpacking libctf-nobfd0:amd64 (2.40-2) ...
Selecting previously unselected package libctf0:amd64.
Preparing to unpack .../31-libctf0_2.40-2_amd64.deb ...
Unpacking libctf0:amd64 (2.40-2) ...
Selecting previously unselected package libgprofng0:amd64.
Preparing to unpack .../32-libgprofng0_2.40-2_amd64.deb ...
Unpacking libgprofng0:amd64 (2.40-2) ...
Selecting previously unselected package libjansson4:amd64.
Preparing to unpack .../33-libjansson4_2.14-2_amd64.deb ...
Unpacking libjansson4:amd64 (2.14-2) ...
Selecting previously unselected package binutils-x86-64-linux-gnu.
Preparing to unpack .../34-binutils-x86-64-linux-gnu_2.40-2_amd64.deb ...
Unpacking binutils-x86-64-linux-gnu (2.40-2) ...
Selecting previously unselected package binutils.
Preparing to unpack .../35-binutils_2.40-2_amd64.deb ...
Unpacking binutils (2.40-2) ...
Selecting previously unselected package libc-dev-bin.
Preparing to unpack .../36-libc-dev-bin_2.36-9+deb12u10_amd64.deb ...
Unpacking libc-dev-bin (2.36-9+deb12u10) ...
Selecting previously unselected package linux-libc-dev:amd64.
Preparing to unpack .../37-linux-libc-dev_6.1.140-1_amd64.deb ...
Unpacking linux-libc-dev:amd64 (6.1.140-1) ...
Selecting previously unselected package libcrypt-dev:amd64.
Preparing to unpack .../38-libcrypt-dev_1%3a4.4.33-2_amd64.deb ...
Unpacking libcrypt-dev:amd64 (1:4.4.33-2) ...
Selecting previously unselected package libtirpc-dev:amd64.
Preparing to unpack .../39-libtirpc-dev_1.3.3+ds-1_amd64.deb ...
Unpacking libtirpc-dev:amd64 (1.3.3+ds-1) ...
Selecting previously unselected package libnsl-dev:amd64.
Preparing to unpack .../40-libnsl-dev_1.3.0-2_amd64.deb ...
Unpacking libnsl-dev:amd64 (1.3.0-2) ...
Selecting previously unselected package rpcsvc-proto.
Preparing to unpack .../41-rpcsvc-proto_1.4.3-1_amd64.deb ...
Unpacking rpcsvc-proto (1.4.3-1) ...
Selecting previously unselected package libc6-dev:amd64.
Preparing to unpack .../42-libc6-dev_2.36-9+deb12u10_amd64.deb ...
Unpacking libc6-dev:amd64 (2.36-9+deb12u10) ...
Selecting previously unselected package libisl23:amd64.
Preparing to unpack .../43-libisl23_0.25-1.1_amd64.deb ...
Unpacking libisl23:amd64 (0.25-1.1) ...
Selecting previously unselected package libmpfr6:amd64.
Preparing to unpack .../44-libmpfr6_4.2.0-1_amd64.deb ...
Unpacking libmpfr6:amd64 (4.2.0-1) ...
Selecting previously unselected package libmpc3:amd64.
Preparing to unpack .../45-libmpc3_1.3.1-1_amd64.deb ...
Unpacking libmpc3:amd64 (1.3.1-1) ...
Selecting previously unselected package cpp-12.
Preparing to unpack .../46-cpp-12_12.2.0-14+deb12u1_amd64.deb ...
Unpacking cpp-12 (12.2.0-14+deb12u1) ...
Selecting previously unselected package cpp.
Preparing to unpack .../47-cpp_4%3a12.2.0-3_amd64.deb ...
Unpacking cpp (4:12.2.0-3) ...
Selecting previously unselected package libcc1-0:amd64.
Preparing to unpack .../48-libcc1-0_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libcc1-0:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libgomp1:amd64.
Preparing to unpack .../49-libgomp1_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libgomp1:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libitm1:amd64.
Preparing to unpack .../50-libitm1_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libitm1:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libasan8:amd64.
Preparing to unpack .../51-libasan8_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libasan8:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package liblsan0:amd64.
Preparing to unpack .../52-liblsan0_12.2.0-14+deb12u1_amd64.deb ...
Unpacking liblsan0:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libtsan2:amd64.
Preparing to unpack .../53-libtsan2_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libtsan2:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libubsan1:amd64.
Preparing to unpack .../54-libubsan1_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libubsan1:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libquadmath0:amd64.
Preparing to unpack .../55-libquadmath0_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libquadmath0:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package libgcc-12-dev:amd64.
Preparing to unpack .../56-libgcc-12-dev_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libgcc-12-dev:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package gcc-12.
Preparing to unpack .../57-gcc-12_12.2.0-14+deb12u1_amd64.deb ...
Unpacking gcc-12 (12.2.0-14+deb12u1) ...
Selecting previously unselected package gcc.
Preparing to unpack .../58-gcc_4%3a12.2.0-3_amd64.deb ...
Unpacking gcc (4:12.2.0-3) ...
Selecting previously unselected package libstdc++-12-dev:amd64.
Preparing to unpack .../59-libstdc++-12-dev_12.2.0-14+deb12u1_amd64.deb ...
Unpacking libstdc++-12-dev:amd64 (12.2.0-14+deb12u1) ...
Selecting previously unselected package g++-12.
Preparing to unpack .../60-g++-12_12.2.0-14+deb12u1_amd64.deb ...
Unpacking g++-12 (12.2.0-14+deb12u1) ...
Selecting previously unselected package g++.
Preparing to unpack .../61-g++_4%3a12.2.0-3_amd64.deb ...
Unpacking g++ (4:12.2.0-3) ...
Selecting previously unselected package make.
Preparing to unpack .../62-make_4.3-4.1_amd64.deb ...
Unpacking make (4.3-4.1) ...
Selecting previously unselected package libdpkg-perl.
Preparing to unpack .../63-libdpkg-perl_1.21.22_all.deb ...
Unpacking libdpkg-perl (1.21.22) ...
Selecting previously unselected package patch.
Preparing to unpack .../64-patch_2.7.6-7_amd64.deb ...
Unpacking patch (2.7.6-7) ...
Selecting previously unselected package dpkg-dev.
Preparing to unpack .../65-dpkg-dev_1.21.22_all.deb ...
Unpacking dpkg-dev (1.21.22) ...
Selecting previously unselected package build-essential.
Preparing to unpack .../66-build-essential_12.9_amd64.deb ...
Unpacking build-essential (12.9) ...
Selecting previously unselected package libbrotli1:amd64.
Preparing to unpack .../67-libbrotli1_1.0.9-2+b6_amd64.deb ...
Unpacking libbrotli1:amd64 (1.0.9-2+b6) ...
Selecting previously unselected package libsasl2-modules-db:amd64.
Preparing to unpack .../68-libsasl2-modules-db_2.1.28+dfsg-10_amd64.deb ...
Unpacking libsasl2-modules-db:amd64 (2.1.28+dfsg-10) ...
Selecting previously unselected package libsasl2-2:amd64.
Preparing to unpack .../69-libsasl2-2_2.1.28+dfsg-10_amd64.deb ...
Unpacking libsasl2-2:amd64 (2.1.28+dfsg-10) ...
Selecting previously unselected package libldap-2.5-0:amd64.
Preparing to unpack .../70-libldap-2.5-0_2.5.13+dfsg-5_amd64.deb ...
Unpacking libldap-2.5-0:amd64 (2.5.13+dfsg-5) ...
Selecting previously unselected package libnghttp2-14:amd64.
Preparing to unpack .../71-libnghttp2-14_1.52.0-1+deb12u2_amd64.deb ...
Unpacking libnghttp2-14:amd64 (1.52.0-1+deb12u2) ...
Selecting previously unselected package libpsl5:amd64.
Preparing to unpack .../72-libpsl5_0.21.2-1_amd64.deb ...
Unpacking libpsl5:amd64 (0.21.2-1) ...
Selecting previously unselected package librtmp1:amd64.
Preparing to unpack .../73-librtmp1_2.4+20151223.gitfa8646d.1-2+b2_amd64.deb ...
Unpacking librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2+b2) ...
Selecting previously unselected package libssh2-1:amd64.
Preparing to unpack .../74-libssh2-1_1.10.0-3+b1_amd64.deb ...
Unpacking libssh2-1:amd64 (1.10.0-3+b1) ...
Selecting previously unselected package libcurl4:amd64.
Preparing to unpack .../75-libcurl4_7.88.1-10+deb12u12_amd64.deb ...
Unpacking libcurl4:amd64 (7.88.1-10+deb12u12) ...
Selecting previously unselected package curl.
Preparing to unpack .../76-curl_7.88.1-10+deb12u12_amd64.deb ...
Unpacking curl (7.88.1-10+deb12u12) ...
Selecting previously unselected package libcurl3-gnutls:amd64.
Preparing to unpack .../77-libcurl3-gnutls_7.88.1-10+deb12u12_amd64.deb ...
Unpacking libcurl3-gnutls:amd64 (7.88.1-10+deb12u12) ...
Selecting previously unselected package libexpat1:amd64.
Preparing to unpack .../78-libexpat1_2.5.0-1+deb12u1_amd64.deb ...
Unpacking libexpat1:amd64 (2.5.0-1+deb12u1) ...
Selecting previously unselected package liberror-perl.
Preparing to unpack .../79-liberror-perl_0.17029-2_all.deb ...
Unpacking liberror-perl (0.17029-2) ...
Selecting previously unselected package git-man.
Preparing to unpack .../80-git-man_1%3a2.39.5-0+deb12u2_all.deb ...
Unpacking git-man (1:2.39.5-0+deb12u2) ...
Selecting previously unselected package git.
Preparing to unpack .../81-git_1%3a2.39.5-0+deb12u2_amd64.deb ...
Unpacking git (1:2.39.5-0+deb12u2) ...
Preparing to unpack .../82-openssl_3.0.17-1~deb12u2_amd64.deb ...
Unpacking openssl (3.0.17-1~deb12u2) over (3.0.16-1~deb12u1) ...
Setting up libexpat1:amd64 (2.5.0-1+deb12u1) ...
Setting up libpsl5:amd64 (0.21.2-1) ...
Setting up netcat-traditional (1.10-47) ...
update-alternatives: using /bin/nc.traditional to provide /bin/nc (nc) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/nc.1.gz because associated file /usr/share/man/man1/nc.traditional.1.gz (of link group nc) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/netcat.1.gz because associated file /usr/share/man/man1/nc.traditional.1.gz (of link group nc) doesn't exist
Setting up libcbor0.8:amd64 (0.8.0-2+b1) ...
Setting up libbrotli1:amd64 (1.0.9-2+b6) ...
Setting up binutils-common:amd64 (2.40-2) ...
Setting up libssl3:amd64 (3.0.17-1~deb12u2) ...
Setting up libnghttp2-14:amd64 (1.52.0-1+deb12u2) ...
Setting up linux-libc-dev:amd64 (6.1.140-1) ...
Setting up libctf-nobfd0:amd64 (2.40-2) ...
Setting up libjemalloc2:amd64 (5.3.0-1) ...
Setting up libgomp1:amd64 (12.2.0-14+deb12u1) ...
Setting up bzip2 (1.0.8-5+b1) ...
Setting up libjansson4:amd64 (2.14-2) ...
Setting up libsasl2-modules-db:amd64 (2.1.28+dfsg-10) ...
Setting up libcap2-bin (1:2.66-4+deb12u1) ...
Setting up perl-modules-5.36 (5.36.0-7+deb12u2) ...
Setting up libtirpc-dev:amd64 (1.3.3+ds-1) ...
Setting up rpcsvc-proto (1.4.3-1) ...
Setting up make (4.3-4.1) ...
Setting up libmpfr6:amd64 (4.2.0-1) ...
Setting up librtmp1:amd64 (2.4+20151223.gitfa8646d.1-2+b2) ...
Setting up liblzf1:amd64 (3.6-3) ...
Setting up xz-utils (5.4.1-1) ...
update-alternatives: using /usr/bin/xz to provide /usr/bin/lzma (lzma) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/lzma.1.gz because associated file /usr/share/man/man1/xz.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/unlzma.1.gz because associated file /usr/share/man/man1/unxz.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzcat.1.gz because associated file /usr/share/man/man1/xzcat.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzmore.1.gz because associated file /usr/share/man/man1/xzmore.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzless.1.gz because associated file /usr/share/man/man1/xzless.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzdiff.1.gz because associated file /usr/share/man/man1/xzdiff.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzcmp.1.gz because associated file /usr/share/man/man1/xzcmp.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzgrep.1.gz because associated file /usr/share/man/man1/xzgrep.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzegrep.1.gz because associated file /usr/share/man/man1/xzegrep.1.gz (of link group lzma) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/man1/lzfgrep.1.gz because associated file /usr/share/man/man1/xzfgrep.1.gz (of link group lzma) doesn't exist
Setting up libquadmath0:amd64 (12.2.0-14+deb12u1) ...
Setting up libproc2-0:amd64 (2:4.0.2-3) ...
Setting up libmpc3:amd64 (1.3.1-1) ...
Setting up libmnl0:amd64 (1.0.4-3) ...
Setting up libatomic1:amd64 (12.2.0-14+deb12u1) ...
Setting up patch (2.7.6-7) ...
Setting up libgdbm-compat4:amd64 (1.23-3) ...
Setting up libxtables12:amd64 (1.8.9-2) ...
Setting up libsasl2-2:amd64 (2.1.28+dfsg-10) ...
Setting up libubsan1:amd64 (12.2.0-14+deb12u1) ...
Setting up nano (7.2-1+deb12u1) ...
update-alternatives: using /bin/nano to provide /usr/bin/editor (editor) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/editor.1.gz because associated file /usr/share/man/man1/nano.1.gz (of link group editor) doesn't exist
update-alternatives: using /bin/nano to provide /usr/bin/pico (pico) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/pico.1.gz because associated file /usr/share/man/man1/nano.1.gz (of link group pico) doesn't exist
Setting up libnsl-dev:amd64 (1.3.0-2) ...
Setting up libcrypt-dev:amd64 (1:4.4.33-2) ...
Setting up libasan8:amd64 (12.2.0-14+deb12u1) ...
Setting up procps (2:4.0.2-3) ...
Setting up git-man (1:2.39.5-0+deb12u2) ...
Setting up libssh2-1:amd64 (1.10.0-3+b1) ...
Setting up libtsan2:amd64 (12.2.0-14+deb12u1) ...
Setting up libbinutils:amd64 (2.40-2) ...
Setting up libfido2-1:amd64 (1.12.0-2+b1) ...
Setting up libisl23:amd64 (0.25-1.1) ...
Setting up libc-dev-bin (2.36-9+deb12u10) ...
Setting up openssl (3.0.17-1~deb12u2) ...
Setting up libbsd0:amd64 (0.11.7-2) ...
Setting up libelf1:amd64 (0.188-2.1) ...
Setting up iputils-ping (3:20221126-1+deb12u1) ...
Setting up libcc1-0:amd64 (12.2.0-14+deb12u1) ...
Setting up libperl5.36:amd64 (5.36.0-7+deb12u2) ...
Setting up libbpf1:amd64 (1:1.1.0-1) ...
Setting up liblsan0:amd64 (12.2.0-14+deb12u1) ...
Setting up libitm1:amd64 (12.2.0-14+deb12u1) ...
Setting up libctf0:amd64 (2.40-2) ...
Setting up cpp-12 (12.2.0-14+deb12u1) ...
Setting up iproute2 (6.1.0-3) ...
Setting up libedit2:amd64 (3.1-20221030-2) ...
Setting up libldap-2.5-0:amd64 (2.5.13+dfsg-5) ...
Setting up perl (5.36.0-7+deb12u2) ...
Setting up libgprofng0:amd64 (2.40-2) ...
Setting up redis-tools (5:7.0.15-1~deb12u5) ...
Setting up libgcc-12-dev:amd64 (12.2.0-14+deb12u1) ...
Setting up libdpkg-perl (1.21.22) ...
Setting up cpp (4:12.2.0-3) ...
Setting up libcurl4:amd64 (7.88.1-10+deb12u12) ...
Setting up libc6-dev:amd64 (2.36-9+deb12u10) ...
Setting up curl (7.88.1-10+deb12u12) ...
Setting up binutils-x86-64-linux-gnu (2.40-2) ...
Setting up libstdc++-12-dev:amd64 (12.2.0-14+deb12u1) ...
Setting up openssh-client (1:9.2p1-2+deb12u7) ...
Setting up libcurl3-gnutls:amd64 (7.88.1-10+deb12u12) ...
Setting up binutils (2.40-2) ...
Setting up redis-server (5:7.0.15-1~deb12u5) ...
invoke-rc.d: could not determine current runlevel
invoke-rc.d: policy-rc.d denied execution of start.
Setting up dpkg-dev (1.21.22) ...
Setting up liberror-perl (0.17029-2) ...
Setting up gcc-12 (12.2.0-14+deb12u1) ...
Setting up git (1:2.39.5-0+deb12u2) ...
Setting up g++-12 (12.2.0-14+deb12u1) ...
Setting up gcc (4:12.2.0-3) ...
Setting up g++ (4:12.2.0-3) ...
update-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode
Setting up build-essential (12.9) ...
Processing triggers for libc-bin (2.36-9+deb12u10) ...
 ---> Removed intermediate container 85a9ff0ed406
 ---> 3114f69a06fc
Step 4/10 : RUN python -m pip install -U pip wheel setuptools &&     python -m pip install uvicorn fastapi pydantic==2.* rich loguru typer       numpy scipy pandas scikit-learn networkx sympy       "ray[default]==2.33.0" prometheus-client       torch --index-url https://download.pytorch.org/whl/cpu &&     python -m pip install transformers accelerate datasets sentencepiece peft evaluate
 ---> Running in 5ab2f641d617
Requirement already satisfied: pip in /usr/local/lib/python3.11/site-packages (24.0)
Collecting pip
  Downloading pip-25.2-py3-none-any.whl.metadata (4.7 kB)
Requirement already satisfied: wheel in /usr/local/lib/python3.11/site-packages (0.45.1)
Requirement already satisfied: setuptools in /usr/local/lib/python3.11/site-packages (65.5.1)
Collecting setuptools
  Downloading setuptools-80.9.0-py3-none-any.whl.metadata (6.6 kB)
Downloading pip-25.2-py3-none-any.whl (1.8 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 38.8 MB/s eta 0:00:00
Downloading setuptools-80.9.0-py3-none-any.whl (1.2 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 80.1 MB/s eta 0:00:00
Installing collected packages: setuptools, pip
  Attempting uninstall: setuptools
    Found existing installation: setuptools 65.5.1
    Uninstalling setuptools-65.5.1:
      Successfully uninstalled setuptools-65.5.1
  Attempting uninstall: pip
    Found existing installation: pip 24.0
    Uninstalling pip-24.0:
      Successfully uninstalled pip-24.0
Successfully installed pip-25.2 setuptools-80.9.0
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
Looking in indexes: https://download.pytorch.org/whl/cpu
ERROR: Could not find a version that satisfies the requirement uvicorn (from versions: none)
ERROR: No matching distribution found for uvicorn
The command '/bin/sh -c python -m pip install -U pip wheel setuptools &&     python -m pip install uvicorn fastapi pydantic==2.* rich loguru typer       numpy scipy pandas scikit-learn networkx sympy       "ray[default]==2.33.0" prometheus-client       torch --index-url https://download.pytorch.org/whl/cpu &&     python -m pip install transformers accelerate datasets sentencepiece peft evaluate' returned a non-zero code: 1
root@danielgonzagatj1:~# 
